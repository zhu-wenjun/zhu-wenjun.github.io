<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Wenjun.Zhu">
  
  
  
  <link rel="prev" href="https://zhu-wenjun.github.io/2018/docker/" />
  <link rel="next" href="https://zhu-wenjun.github.io/2019/smartnode/" />
  <link rel="canonical" href="https://zhu-wenjun.github.io/2018/go/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Golang ä¿¡æ‰‹æ‹ˆæ¥ | Uncertainty days
       
  </title>
  <meta name="title" content="Golang ä¿¡æ‰‹æ‹ˆæ¥ | Uncertainty days">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://zhu-wenjun.github.io"
    },
    "articleSection" : "posts",
    "name" : "Golang ä¿¡æ‰‹æ‹ˆæ¥",
    "headline" : "Golang ä¿¡æ‰‹æ‹ˆæ¥",
    "description" : "Golang ä¿¡æ‰‹æ‹ˆæ¥è¿™ä¸ªå‘æ˜¯åœ¨2018å¹´æŒ–çš„ï¼Œä½†æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯åœ¨2019å¹´å¡«çš„ğŸ‘»ğŸ‘»ğŸ‘»
GolangåŸºæœ¬ç‰¹æ€§  Golangæ˜¯é™æ€è¯­è¨€ï¼Œéœ€è¦å…ˆç¼–è¯‘å†æ‰§è¡Œï¼Œé™æ€è¯­è¨€çš„å¥½å¤„æ˜¯å…·æœ‰ç±»å‹å®‰å…¨ç‰¹æ€§ å¹¶å‘(goroutine)æ˜¯goè¯­è¨€æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€, goroutineç±»ä¼¼äºçº¿ç¨‹ï¼Œä½†æ˜¯æ¯”çº¿ç¨‹ä½¿ç”¨çš„å†…å­˜æ›´å°‘ é€šé“ï¼ˆchannelï¼‰æ˜¯ä¸€ç§å†…ç½®çš„æ•°æ®ç»“æ„ï¼Œç”¨äºåœ¨ä¸åŒçš„goroutineä¹‹é—´åŒæ­¥å‘é€å…·æœ‰ç±»å‹çš„æ¶ˆæ¯. TODO: æµ‹è¯•é€šé“ä¼ è¾“çš„å‰¯æœ¬å’ŒæŒ‡é’ˆåŠŸèƒ½Page5. Golangæä¾›ç±»æ— ç»§æ‰¿çš„ç±»å‹ç³»ç»Ÿï¼Œè¿™ä¸ªç±»å‹ç³»ç»Ÿæ”¯æŒé¢å‘å¯¹è±¡å¼€å‘ã€‚ Golangçš„ç»„åˆï¼ˆcompositionï¼‰è®¾è®¡æ¨¡å¼ï¼Œåªéœ€ç®€å•åœ°å°†ä¸€ä¸ªç±»å‹åµŒå…¥åˆ°å¦ä¸€ä¸ªç±»å‹ï¼Œæ¯”å¦‚æŠŠç±»å‹1åµŒå…¥åˆ°ç±»å‹2ä¸­ï¼Œé‚£ä¹ˆç±»å‹2å°±å¯ä»¥å¤ç”¨ç±»å‹1çš„æ‰€æœ‰åŠŸèƒ½ã€‚ ä¸€ä¸ªç±»å‹ç”±å…¶ä»–æ›´å¾®å°çš„ç±»å‹ç»„åˆè€Œæˆï¼Œé¿å…äº†ä¼ ç»Ÿçš„åŸºäºç»§æ‰¿çš„æ¨¡å‹ã€‚ Golangçš„æ¥å£(interface)å®ç°æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¯¹è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸æ˜¯å¯¹ç±»å‹è¿›è¡Œå»ºæ¨¡.ä¸éœ€è¦å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œç¼–è¯‘å™¨ä¼šåˆ¤æ–­ä¸€ä¸ªç±»å‹çš„å®ä¾‹æ˜¯å¦ç¬¦åˆæ­£åœ¨ä½¿ç”¨çš„æ¥å£. Golangå¯ä»¥åœ¨ https://play.golang.org æµè§ˆå™¨ä¸­è¿›è¡Œè°ƒè¯•, å¹¶å¯ä»¥æŠŠä½ çš„ä»£ç Shareç»™å…¶ä»–äºº. æ‰€æœ‰å¤„äºåŒä¸€ä¸ªæ–‡ä»¶å¤¹çš„ä»£ç æ–‡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªåŒ…åï¼Œé€šå¸¸åŒ…å’Œæ–‡ä»¶å¤¹åŒå åœ¨Golangä¸­ï¼Œå¦‚æœmainå‡½æ•°è¿”å›ï¼Œæ•´ä¸ªç¨‹åºä¹Ÿå°±ç»ˆæ­¢äº†ã€‚Goç¨‹åºç»ˆæ­¢æ—¶ï¼Œè¿˜ä¼šå…³é—­æ‰€æœ‰ä¹‹å‰å¯åŠ¨ä¸”è¿˜åœ¨è¿è¡Œçš„goroutineã€‚å†™å¹¶å‘ç¨‹åºæ—¶ï¼Œæœ€ä½³çš„åšæ³•æ˜¯ï¼Œåœ¨mainå‡½æ•°è¿”å›å‰ï¼Œæ¸…ç†å¹¶ç»ˆæ­¢æ‰€æœ‰ä¹‹å‰å¯åŠ¨çš„goroutineï¼Œæˆ–è€…(é—®é¢˜ä¸€), å¦‚ä½•åœ¨mainï¼ˆï¼‰å‡½æ•°ç»“æŸä¹‹å‰æ£€æŸ¥æ­¤è¿›ç¨‹æ‰€æ´¾ç”Ÿäº†å“ªäº›goroutineï¼Œç„¶åå†å°è¯•ç»ˆæ­¢å®ƒä»¬  1. ç±»å‹ç³»ç»Ÿ 1.1 åŸºç¡€æ•°æ®ç±»å‹ åŸºç¡€æ•°æ®ç±»å‹åˆ†ä¸ºï¼šæ•´å‹ï¼Œæµ®ç‚¹æ•°ï¼Œå¤æ•°ï¼Œå¸ƒå°”å‹ï¼Œå­—ç¬¦ä¸²å’Œå¸¸é‡
12ä¸ªæ•´å‹æ•°æ®ç±»å‹å¦‚ä¸‹æ‰€ç¤ºï¼Œintå’Œuintçš„ä½æ•°ä¾èµ–äºCPUçš„ä½æ•°(32ä½æˆ–64ä½) //adm
   int8 int16 int32(rune) int64 uint8(byte) uint16 uint32 uint64 int uint    uint8 the set of all unsigned 8-bit integers (0 to 255) uint16 the set of all unsigned 16-bit integers (0 to 65535) uint32 the set of all unsigned 32-bit integers (0 to 4294967295) uint64 the set of all unsigned 64-bit integers (0 to 18446744073709551615) int8 the set of all signed 8-bit integers (-128 to 127) int16 the set of all signed 16-bit integers (-32768 to 32767) int32 the set of all signed 32-bit integers (-2147483648 to 2147483647) int64 the set of all signed 64-bit integers (-9223372036854775808 to 9223372036854775807) float32 the set of all IEEE-754 32-bit floating-point numbers float64 the set of all IEEE-754 64-bit floating-point numbers complex64 the set of all complex numbers with float32 real and imaginary parts complex128 the set of all complex numbers with float64 real and imaginary parts byte alias for uint8 rune alias for int32 TODO: add a routine to calc the max and min value in each type.",
    "inLanguage" : "en-us",
    "author" : "Wenjun.Zhu",
    "creator" : "Wenjun.Zhu",
    "publisher": "Wenjun.Zhu",
    "accountablePerson" : "Wenjun.Zhu",
    "copyrightHolder" : "Wenjun.Zhu",
    "copyrightYear" : "2018",
    "datePublished": "2018-11-28 22:57:01 &#43;0800 &#43;0800",
    "dateModified" : "2018-11-28 22:57:01 &#43;0800 &#43;0800",
    "url" : "https://zhu-wenjun.github.io/2018/go/",
    "wordCount" : "13846",
    "keywords" : [  "Uncertainty days"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://zhu-wenjun.github.io">Uncertainty days</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://zhu-wenjun.github.io">Uncertainty days</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Golang ä¿¡æ‰‹æ‹ˆæ¥</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://zhu-wenjun.github.io" rel="author">Wenjun.Zhu</a> with â™¥ 
                <span class="post-time">
                on <time datetime=2018-11-28 itemprop="datePublished">November 28, 2018</time>
                </span>
                in
                

                |
                <a href="#gitalk-container" itemprop="discussionUrl">
                    <span class="post-comments-count gitalk-comment-count" itemprop="commentCount"></span>
                </a>
                
        </div>
    </header>

        
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#11-">1.1 åŸºç¡€æ•°æ®ç±»å‹</a></li>
    <li><a href="#12-type">1.2 type</a></li>
    <li><a href="#13-pointer">1.3 pointer</a></li>
    <li><a href="#14-rune">1.4 rune</a></li>
    <li><a href="#15-bool">1.5 bool</a></li>
    <li><a href="#16-byte">1.6 byte</a></li>
    <li><a href="#17-uintptr">1.7 uintptr</a></li>
    <li><a href="#18-string">1.8 string</a></li>
    <li><a href="#19-float">1.9 float</a></li>
    <li><a href="#110-complex">1.10 complex</a></li>
  </ul>

  <ul>
    <li><a href="#21-">2.1 æ•°ç»„å£°æ˜ä¸åˆå§‹åŒ–</a></li>
    <li><a href="#22-">2.2 æ•°ç»„å…ƒç´ ä¸ºæŒ‡é’ˆ</a></li>
    <li><a href="#23-">2.3 æ•°ç»„äº’ç›¸èµ‹å€¼</a></li>
    <li><a href="#24-">2.4 äºŒç»´æ•°ç»„</a></li>
  </ul>

  <ul>
    <li><a href="#31-">3.1 åˆ‡ç‰‡å£°æ˜å’Œåˆå§‹åŒ–</a></li>
    <li><a href="#32-make">3.2 ç”¨makeåˆ›å»ºåˆ‡ç‰‡</a></li>
    <li><a href="#33-append">3.3 ç”¨appendé™„åŠ åˆ‡ç‰‡</a></li>
    <li><a href="#34-copy">3.4 ç”¨copyæ‹·è´åˆ‡ç‰‡</a></li>
    <li><a href="#35-">3.5 éå†åˆ‡ç‰‡</a></li>
    <li><a href="#36-">3.6 åˆ’åˆ†åˆ‡ç‰‡</a></li>
    <li><a href="#37-">3.7 äºŒç»´åˆ‡ç‰‡</a></li>
  </ul>

  <ul>
    <li><a href="#41-">4.1 æ˜ å°„å£°æ˜ä¸åˆå§‹åŒ–</a></li>
    <li><a href="#42-">4.2 éå†æ˜ å°„</a></li>
    <li><a href="#43-">4.3 æœ‰åºæ‰“å°</a></li>
    <li><a href="#44-">4.4 åˆ é™¤é”®å€¼</a></li>
  </ul>

  <ul>
    <li><a href="#51-">5.1 å‡½æ•°ç­¾å</a></li>
    <li><a href="#52-">5.2 é€’å½’è°ƒç”¨</a></li>
    <li><a href="#53-">5.3 å‡½æ•°ç±»å‹</a></li>
    <li><a href="#54-">5.4 åŒ¿åå‡½æ•°</a></li>
    <li><a href="#55-">5.5 å˜å‚å‡½æ•°</a></li>
    <li><a href="#56-">5.6 å»¶è¿Ÿè°ƒç”¨</a></li>
    <li><a href="#57-">5.7 é”™è¯¯å¤„ç†</a></li>
    <li><a href="#58-">5.8 å´©æºƒ</a></li>
    <li><a href="#59-">5.9 æ¢å¤</a></li>
  </ul>

  <ul>
    <li><a href="#61-">6.1 æ–¹æ³•å£°æ˜</a></li>
    <li><a href="#62-">6.2 æ–¹æ³•æ¥æ”¶è€…ä¸ºæŒ‡é’ˆ</a></li>
    <li><a href="#63-">6.3 ç»“æ„ä½“å¼•ç”¨æˆå‘˜ç±»å‹çš„æ–¹æ³•</a></li>
    <li><a href="#64-">6.4 æ–¹æ³•æŒ‡é’ˆ</a></li>
  </ul>

  <ul>
    <li><a href="#71-">7.1 æ¥å£ç±»å‹</a></li>
    <li><a href="#72-">7.2 ç©ºæ¥å£ç±»å‹</a></li>
    <li><a href="#73-">7.3 ç»™æ¥å£å˜é‡èµ‹å€¼</a></li>
    <li><a href="#74-">7.4 ç±»å‹æ–­è¨€</a></li>
    <li><a href="#75-type-switch">7.5 type-switch</a></li>
    <li><a href="#76-">7.6 æ¥å£åµŒå…¥</a></li>
    <li><a href="#77-">7.7 æ¥å£å˜é‡æ¯”è¾ƒ</a></li>
  </ul>

  <ul>
    <li><a href="#81-">8.1 ä»€ä¹ˆæ˜¯é€šé“</a></li>
    <li><a href="#82-">8.2 åˆ›å»ºé€šé“</a></li>
    <li><a href="#83-">8.3 å‘é€/æ¥æ”¶æ•°æ®</a></li>
    <li><a href="#84-">8.4 å…³é—­é€šé“</a></li>
    <li><a href="#84-timesleep">8.4 ç”¨é€šé“æ›¿æ¢time.Sleep</a></li>
    <li><a href="#85-">8.5 å¤šä¸ªå‘é€ç«¯</a></li>
    <li><a href="#85-outofmemorybug">8.5 ä¸€ç§èƒ½äº§ç”Ÿoutofmemoryçš„bug</a></li>
    <li><a href="#86-channel">8.6 é€‰å–åˆé€‚çš„channelç¼“å­˜å¤§å°</a></li>
    <li><a href="#83--1">8.3 é€šé“ç›¸å…³çš„æ“ä½œ</a></li>
    <li><a href="#84--1">8.4 é€šé“ä¼šå´©æºƒçš„å‡ ç§æƒ…å†µ</a></li>
  </ul>

  <ul>
    <li><a href="#heading"></a></li>
    <li><a href="#91-concurrency">9.1. å¹¶å‘ï¼ˆconcurrencyï¼‰</a></li>
    <li><a href="#92-waitgroup">9.2 å¹¶å‘åŒæ­¥ä¹‹WaitGroup</a></li>
    <li><a href="#92-channel">9.2 å¹¶å‘åŒæ­¥ä¹‹channel</a></li>
  </ul>

  <ul>
    <li><a href="#101-if">10.1 ifæ¡ä»¶æ‰§è¡Œ</a></li>
    <li><a href="#102-for">10.2 forå¾ªç¯æ‰§è¡Œ</a></li>
    <li><a href="#103-switch">10.3 switchå¤šè·¯æ‰§è¡Œ</a></li>
    <li><a href="#104-select">10.4 selecté€šé“æ“ä½œ</a></li>
  </ul>

  <ul>
    <li><a href="#heading-1">å¯ä»¥æ¯”è¾ƒçš„ç±»å‹</a></li>
    <li><a href="#heading-2">ä¸å¯æ¯”è¾ƒçš„ç±»å‹</a></li>
    <li><a href="#untyped">æ— ç±»å‹untyped</a></li>
    <li><a href="#nil">é›¶å€¼ä¸ºnilçš„ç±»å‹</a></li>
    <li><a href="#printf">Printfæ‰“å°å‚æ•°</a></li>
    <li><a href="#heading-3">å¯å¯»å€å’Œä¸å¯å¯»å€</a></li>
    <li><a href="#heading-4">å‚è€ƒèµ„æ–™</a></li>
  </ul>
</nav>
  </div>
</div>


    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <p><strong>Golang ä¿¡æ‰‹æ‹ˆæ¥è¿™ä¸ªå‘æ˜¯åœ¨2018å¹´æŒ–çš„ï¼Œä½†æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯åœ¨2019å¹´å¡«çš„ğŸ‘»ğŸ‘»ğŸ‘»</strong></p>
<h1 id="golang">GolangåŸºæœ¬ç‰¹æ€§</h1>
<ol>
<li>Golangæ˜¯é™æ€è¯­è¨€ï¼Œéœ€è¦å…ˆç¼–è¯‘å†æ‰§è¡Œï¼Œé™æ€è¯­è¨€çš„å¥½å¤„æ˜¯å…·æœ‰ç±»å‹å®‰å…¨ç‰¹æ€§</li>
<li>å¹¶å‘(goroutine)æ˜¯goè¯­è¨€æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€, goroutineç±»ä¼¼äºçº¿ç¨‹ï¼Œä½†æ˜¯æ¯”çº¿ç¨‹ä½¿ç”¨çš„å†…å­˜æ›´å°‘</li>
<li>é€šé“ï¼ˆchannelï¼‰æ˜¯ä¸€ç§å†…ç½®çš„æ•°æ®ç»“æ„ï¼Œç”¨äºåœ¨ä¸åŒçš„goroutineä¹‹é—´åŒæ­¥å‘é€å…·æœ‰ç±»å‹çš„æ¶ˆæ¯. TODO: æµ‹è¯•é€šé“ä¼ è¾“çš„å‰¯æœ¬å’ŒæŒ‡é’ˆåŠŸèƒ½Page5.</li>
<li>Golangæä¾›ç±»æ— ç»§æ‰¿çš„ç±»å‹ç³»ç»Ÿï¼Œè¿™ä¸ªç±»å‹ç³»ç»Ÿæ”¯æŒé¢å‘å¯¹è±¡å¼€å‘ã€‚</li>
<li>Golangçš„ç»„åˆï¼ˆcompositionï¼‰è®¾è®¡æ¨¡å¼ï¼Œåªéœ€ç®€å•åœ°å°†ä¸€ä¸ªç±»å‹åµŒå…¥åˆ°å¦ä¸€ä¸ªç±»å‹ï¼Œæ¯”å¦‚æŠŠç±»å‹1åµŒå…¥åˆ°ç±»å‹2ä¸­ï¼Œé‚£ä¹ˆç±»å‹2å°±å¯ä»¥å¤ç”¨ç±»å‹1çš„æ‰€æœ‰åŠŸèƒ½ã€‚
ä¸€ä¸ªç±»å‹ç”±å…¶ä»–æ›´å¾®å°çš„ç±»å‹ç»„åˆè€Œæˆï¼Œé¿å…äº†ä¼ ç»Ÿçš„åŸºäºç»§æ‰¿çš„æ¨¡å‹ã€‚</li>
<li>Golangçš„æ¥å£(interface)å®ç°æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¯¹è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸æ˜¯å¯¹ç±»å‹è¿›è¡Œå»ºæ¨¡.ä¸éœ€è¦å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œç¼–è¯‘å™¨ä¼šåˆ¤æ–­ä¸€ä¸ªç±»å‹çš„å®ä¾‹æ˜¯å¦ç¬¦åˆæ­£åœ¨ä½¿ç”¨çš„æ¥å£.</li>
<li>Golangå¯ä»¥åœ¨ <a href="https://play.golang.org">https://play.golang.org</a> æµè§ˆå™¨ä¸­è¿›è¡Œè°ƒè¯•, å¹¶å¯ä»¥æŠŠä½ çš„ä»£ç Shareç»™å…¶ä»–äºº.</li>
<li>æ‰€æœ‰å¤„äºåŒä¸€ä¸ªæ–‡ä»¶å¤¹çš„ä»£ç æ–‡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªåŒ…åï¼Œé€šå¸¸åŒ…å’Œæ–‡ä»¶å¤¹åŒå</li>
<li>åœ¨Golangä¸­ï¼Œå¦‚æœmainå‡½æ•°è¿”å›ï¼Œæ•´ä¸ªç¨‹åºä¹Ÿå°±ç»ˆæ­¢äº†ã€‚Goç¨‹åºç»ˆæ­¢æ—¶ï¼Œè¿˜ä¼šå…³é—­æ‰€æœ‰ä¹‹å‰å¯åŠ¨ä¸”è¿˜åœ¨è¿è¡Œçš„goroutineã€‚å†™å¹¶å‘ç¨‹åºæ—¶ï¼Œæœ€ä½³çš„åšæ³•æ˜¯ï¼Œåœ¨mainå‡½æ•°è¿”å›å‰ï¼Œæ¸…ç†å¹¶ç»ˆæ­¢æ‰€æœ‰ä¹‹å‰å¯åŠ¨çš„goroutineï¼Œæˆ–è€…(é—®é¢˜ä¸€), å¦‚ä½•åœ¨mainï¼ˆï¼‰å‡½æ•°ç»“æŸä¹‹å‰æ£€æŸ¥æ­¤è¿›ç¨‹æ‰€æ´¾ç”Ÿäº†å“ªäº›goroutineï¼Œç„¶åå†å°è¯•ç»ˆæ­¢å®ƒä»¬</li>
</ol>
<h1 id="1-">1. ç±»å‹ç³»ç»Ÿ</h1>
<h2 id="11-">1.1 åŸºç¡€æ•°æ®ç±»å‹</h2>
<p>åŸºç¡€æ•°æ®ç±»å‹åˆ†ä¸ºï¼šæ•´å‹ï¼Œæµ®ç‚¹æ•°ï¼Œå¤æ•°ï¼Œå¸ƒå°”å‹ï¼Œå­—ç¬¦ä¸²å’Œå¸¸é‡</p>
<p>12ä¸ªæ•´å‹æ•°æ®ç±»å‹å¦‚ä¸‹æ‰€ç¤ºï¼Œintå’Œuintçš„ä½æ•°ä¾èµ–äºCPUçš„ä½æ•°(32ä½æˆ–64ä½) //adm</p>
<table>
<thead>
<tr>
<th align="center">int8</th>
<th align="center">int16</th>
<th align="center">int32<!-- raw HTML omitted -->(rune)</th>
<th align="center">int64</th>
<th align="center">uint8<!-- raw HTML omitted -->(byte)</th>
<th align="center">uint16</th>
<th align="center">uint32</th>
<th align="center">uint64</th>
<th align="center">int</th>
<th align="center">uint</th>
</tr>
</thead>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">uint8</span>       <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">unsigned</span>  <span style="color:#ae81ff">8</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#ae81ff">0</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">255</span>)
<span style="color:#66d9ef">uint16</span>      <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">unsigned</span> <span style="color:#ae81ff">16</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#ae81ff">0</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">65535</span>)
<span style="color:#66d9ef">uint32</span>      <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">unsigned</span> <span style="color:#ae81ff">32</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#ae81ff">0</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">4294967295</span>)
<span style="color:#66d9ef">uint64</span>      <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">unsigned</span> <span style="color:#ae81ff">64</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#ae81ff">0</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">18446744073709551615</span>)

<span style="color:#66d9ef">int8</span>        <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">signed</span>  <span style="color:#ae81ff">8</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">128</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">127</span>)
<span style="color:#66d9ef">int16</span>       <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">signed</span> <span style="color:#ae81ff">16</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">32768</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">32767</span>)
<span style="color:#66d9ef">int32</span>       <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">signed</span> <span style="color:#ae81ff">32</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">2147483648</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">2147483647</span>)
<span style="color:#66d9ef">int64</span>       <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">signed</span> <span style="color:#ae81ff">64</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">integers</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">9223372036854775808</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">9223372036854775807</span>)

<span style="color:#66d9ef">float32</span>     <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">IEEE</span><span style="color:#f92672">-</span><span style="color:#ae81ff">754</span> <span style="color:#ae81ff">32</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">floating</span><span style="color:#f92672">-</span><span style="color:#a6e22e">point</span> <span style="color:#a6e22e">numbers</span>
<span style="color:#66d9ef">float64</span>     <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">IEEE</span><span style="color:#f92672">-</span><span style="color:#ae81ff">754</span> <span style="color:#ae81ff">64</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bit</span> <span style="color:#a6e22e">floating</span><span style="color:#f92672">-</span><span style="color:#a6e22e">point</span> <span style="color:#a6e22e">numbers</span>

<span style="color:#66d9ef">complex64</span>   <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">complex</span> <span style="color:#a6e22e">numbers</span> <span style="color:#a6e22e">with</span> <span style="color:#66d9ef">float32</span> <span style="color:#a6e22e">real</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">imaginary</span> <span style="color:#a6e22e">parts</span>
<span style="color:#66d9ef">complex128</span>  <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">complex</span> <span style="color:#a6e22e">numbers</span> <span style="color:#a6e22e">with</span> <span style="color:#66d9ef">float64</span> <span style="color:#a6e22e">real</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">imaginary</span> <span style="color:#a6e22e">parts</span>

<span style="color:#66d9ef">byte</span>        <span style="color:#a6e22e">alias</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">uint8</span>
<span style="color:#66d9ef">rune</span>        <span style="color:#a6e22e">alias</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">int32</span>
</code></pre></div><p><!-- raw HTML omitted -->TODO: add a routine to calc the max and min value in each type.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">uint</span>     <span style="color:#a6e22e">either</span> <span style="color:#ae81ff">32</span> <span style="color:#a6e22e">or</span> <span style="color:#ae81ff">64</span> <span style="color:#a6e22e">bits</span>
<span style="color:#66d9ef">int</span>      <span style="color:#a6e22e">same</span> <span style="color:#a6e22e">size</span> <span style="color:#a6e22e">as</span> <span style="color:#66d9ef">uint</span>
<span style="color:#66d9ef">uintptr</span>  <span style="color:#a6e22e">an</span> <span style="color:#a6e22e">unsigned</span> <span style="color:#a6e22e">integer</span> <span style="color:#a6e22e">large</span> <span style="color:#a6e22e">enough</span> <span style="color:#a6e22e">to</span> <span style="color:#a6e22e">store</span> <span style="color:#a6e22e">the</span> <span style="color:#a6e22e">uninterpreted</span> <span style="color:#a6e22e">bits</span> <span style="color:#a6e22e">of</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">pointer</span> <span style="color:#a6e22e">value</span>
</code></pre></div><p>æ•´å‹çš„å­—é¢é‡æœ‰3ç§è¡¨ç°å½¢å¼ï¼š10è¿›åˆ¶ï¼Œ8è¿›åˆ¶å’Œ16è¿›åˆ¶ï¼Œä»¥ä¸‹3ä¸ªæ•´å‹å­—é¢é‡å‡è¡¨ç¤ºåè¿›åˆ¶çš„15</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">15</span>  <span style="color:#75715e">// 10è¿›åˆ¶å½¢å¼(ä¸€å®šä¸èƒ½ä»¥&#34;0&#34;å¼€å¤´)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">017</span> <span style="color:#75715e">//  8è¿›åˆ¶å½¢å¼(å¿…é¡»ä»¥&#34;0&#34;å¼€å¤´)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">0xF</span> <span style="color:#75715e">// 16è¿›åˆ¶å½¢å¼(å¿…é¡»ä»¥&#34;0x&#34; æˆ– &#34;0X&#34;å¼€å¤´)
</span></code></pre></div><h2 id="12-type">1.2 type</h2>
<p>type: ç±»å‹å£°æ˜(type declaration)åŒ…å«2ç§å½¢å¼ï¼šåˆ«åå£°æ˜(alias declaration)å’Œç±»å‹å®šä¹‰(type definition) //adm</p>
<p><strong>åˆ«åå£°æ˜</strong>æ˜¯ä¸ºåŸç±»å‹Tç»‘å®šä¸€ä¸ªåˆ«åï¼Œåˆ«åç±»å‹ä¸åŸç±»å‹æ˜¯ç›¸åŒçš„ï¼Œå½¢å¼ä¸ºï¼š</p>
<p><code>type indentifier = T</code></p>
<p><strong>ç±»å‹å®šä¹‰</strong>æ˜¯åœ¨åŸç±»å‹Tçš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸åŒç±»å‹</p>
<p><code>type indentifier  T</code></p>
<p>å¦‚ä¸‹ä¾‹å­æ‰€ç¤º:<!-- raw HTML omitted -->
IntAliasç±»å‹æ˜¯intç±»å‹çš„<strong>åˆ«åå£°æ˜</strong>ï¼ŒIntAliaså’Œintæ˜¯ä¸¤ä¸ªç›¸åŒçš„ç±»å‹ï¼Œä»–ä»¬çš„å˜é‡iaå’Œiå¯ä»¥è¿›è¡Œæ¯”è¾ƒã€‚<!-- raw HTML omitted -->
IntDefinitionç±»å‹æ˜¯intç±»å‹çš„<strong>ç±»å‹å®šä¹‰</strong>ï¼ŒIntDefinitionå’Œintæ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹ï¼Œä»–ä»¬çš„å˜é‡idå’Œiæ˜¯ä¸èƒ½è¿›è¡Œæ¯”è¾ƒçš„ã€‚<!-- raw HTML omitted -->
å¦‚æœæƒ³è¦idå’Œiè¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥å°†å…¶ä¸­ä¸€ä¸ªå˜é‡è¿›è¡Œç±»å‹è½¬æ¢ã€‚IntDefinitionåˆ°intçš„ç±»å‹æ¼”å˜æµç¨‹ä¸ºIntDefinition&ndash;intï¼Œæ‰€ä»¥IntDefinitionç±»å‹çš„idç›´æ¥å°±å¯è½¬æ¢ä¸º(int)<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">IntAlias</span> = <span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">IntDefinition</span> <span style="color:#66d9ef">int</span>

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">100</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ia</span> <span style="color:#a6e22e">IntAlias</span> = <span style="color:#ae81ff">100</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">id</span> <span style="color:#a6e22e">IntDefinition</span> = <span style="color:#ae81ff">100</span>

println(<span style="color:#e6db74">&#34;i == ia?&#34;</span>, <span style="color:#a6e22e">i</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">ia</span>) <span style="color:#75715e">//true, i å’Œ iaæ˜¯ç›¸åŒç±»å‹ï¼Œç›¸å½“äº2ä¸ªç›¸åŒç±»å‹çš„å˜é‡åœ¨è¿›è¡Œå€¼çš„æ¯”è¾ƒã€‚
</span><span style="color:#75715e"></span><span style="color:#75715e">//println(&#34;i == id?&#34;, i == id) //invalid operation: i == id (mismatched types int and IntDefinition), ç¼–è¯‘å‡ºé”™ï¼Œiå’Œidæ˜¯ä¸åŒçš„ç±»å‹ã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34;i == id?&#34;</span>, <span style="color:#a6e22e">i</span> <span style="color:#f92672">==</span> (<span style="color:#66d9ef">int</span>)(<span style="color:#a6e22e">id</span>)) <span style="color:#75715e">//içš„ç±»å‹ä¸ºintã€‚idçš„ç±»å‹æ¼”å˜æ–¹å¼ä¸ºIntDefinition--intï¼Œidä»IntDefinitionç±»å‹åˆ°intç±»å‹ç›´æ¥è½¬æ¢å³å¯(int)(id)
</span></code></pre></div><p><code>i == ia? true</code><!-- raw HTML omitted -->
<code>i == id? true</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/psyd9W99doe"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a></p>
<p>byteå’Œruneå°±æ˜¯uint8å’Œint32çš„<strong>åˆ«åå£°æ˜</strong><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// byte is an alias for uint8 and is equivalent to uint8 in all ways. It is
</span><span style="color:#75715e"></span><span style="color:#75715e">// used, by convention, to distinguish byte values from 8-bit unsigned
</span><span style="color:#75715e"></span><span style="color:#75715e">// integer values.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#66d9ef">byte</span> = <span style="color:#66d9ef">uint8</span>
<span style="color:#75715e">// rune is an alias for int32 and is equivalent to int32 in all ways. It is
</span><span style="color:#75715e"></span><span style="color:#75715e">// used, by convention, to distinguish character values from integer values.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#66d9ef">rune</span> = <span style="color:#66d9ef">int32</span>
</code></pre></div><p>å¦‚ä¸‹ä¾‹å­ä¸­ï¼ŒT2æ˜¯t1çš„åˆ«åå£°æ˜ï¼Œt1æœ¬æ¥æ˜¯ä¸å¯å¯¼å‡ºçš„ï¼Œä½†t1çš„ç±»å‹åˆ«åT2é¦–å­—æ¯æ˜¯å¤§å†™ï¼Œæ‰€ä»¥T2æ˜¯å¯ä»¥å¯¼å‡ºçš„ã€‚é€šå¸¸å¯ä»¥ç›´æ¥å°†t1æ”¹ä¸ºå¤§å†™çš„T1ï¼Œç›´æ¥å¯¼å‡ºã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">t1</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">S</span> <span style="color:#66d9ef">string</span>
}
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">T2</span> = <span style="color:#a6e22e">t1</span>

</code></pre></div><blockquote>
<p>More reference: <a href="https://colobu.com/2017/06/26/learn-go-type-aliases/">https://colobu.com/2017/06/26/learn-go-type-aliases/</a></p>
</blockquote>
<p>å®šä¹‰çš„ç±»å‹(Defined Types)å’Œéå®šä¹‰çš„ç±»å‹(Non-Defined Types)ï¼Œä¹Ÿå«å‘½åçš„ç±»å‹(named types)å’Œéå‘½åçš„ç±»å‹(unamed types) //adm</p>
<p>**å®šä¹‰çš„ç±»å‹(Defined Types)**<!-- raw HTML omitted -->
Â Â Â Â Â <code>1.æ‰€æœ‰çš„åŸºç¡€ç±»å‹éƒ½æ˜¯â€œå®šä¹‰çš„ç±»å‹(Defined Types)â€ï¼Œæ¯”å¦‚int, string, bool, floatç­‰ç±»å‹</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>2.é€šè¿‡â€œç±»å‹å®šä¹‰â€åˆ›å»ºå‡ºæ¥çš„ç±»å‹å±äºâ€œå®šä¹‰çš„ç±»å‹(Defined Types)â€ï¼Œæ¯”å¦‚type A intï¼Œç±»å‹Aæ˜¯å®šä¹‰çš„ç±»å‹</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>3.é€šè¿‡â€œç±»å‹å®šä¹‰â€åˆ›å»ºå‡ºæ¥çš„ç±»å‹çš„åˆ«åä¹Ÿæ˜¯â€œå®šä¹‰çš„ç±»å‹(Defined Types)â€ï¼Œæ¯”å¦‚type B=Aï¼Œç±»å‹Bä¹Ÿæ˜¯å®šä¹‰çš„ç±»å‹</code><!-- raw HTML omitted --></p>
<p>**éå®šä¹‰çš„ç±»å‹(Non-Defined Types)**<!-- raw HTML omitted -->
Â Â Â Â Â <code>1.å¤åˆæ•°æ®ç±»å‹æ˜¯â€œéå®šä¹‰çš„ç±»å‹(Non-Defined Types)â€ï¼Œæ¯”å¦‚sliceï¼Œmapï¼Œchannelå’Œstructå®šä¹‰çš„ç»“æ„ä½“ç±»å‹ã€‚</code><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">A</span> []<span style="color:#66d9ef">string</span> <span style="color:#75715e">//[]stringæ˜¯åˆ‡ç‰‡ï¼Œå±äºå¤åˆæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥[]stringæ˜¯â€œéå®šä¹‰çš„ç±»å‹(Non-Defined Types)â€ã€‚ ä½†æ˜¯Aæ˜¯é€šè¿‡â€œç±»å‹å®šä¹‰â€åˆ›å»ºå‡ºæ¥çš„ç±»å‹ï¼Œå±äºâ€œå®šä¹‰çš„ç±»å‹(Defined Types)â€ï¼Œç¬¦åˆâ€œå®šä¹‰çš„ç±»å‹(Defined Types)â€çš„ç¬¬2ç‚¹ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">B</span> = <span style="color:#a6e22e">A</span> <span style="color:#75715e">//Bæ˜¯é€šè¿‡â€œç±»å‹å®šä¹‰â€åˆ›å»ºå‡ºæ¥çš„ç±»å‹Açš„åˆ«åï¼Œæ‰€ä»¥Bä¹Ÿæ˜¯â€œå®šä¹‰çš„ç±»å‹(Defined Types)â€,ç¬¦åˆâ€œå®šä¹‰çš„ç±»å‹(Defined Types)â€çš„ç¬¬3ç‚¹ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">C</span> = []<span style="color:#66d9ef">string</span> <span style="color:#75715e">//[]stringæ˜¯åˆ‡ç‰‡ï¼Œå±äºå¤åˆæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥[]stringæ˜¯**éå®šä¹‰çš„ç±»å‹(Non-Defined Types)**ã€‚Cä¸ç¬¦åˆâ€œå®šä¹‰çš„ç±»å‹(Defined Types)â€çš„3ç‚¹å®šä¹‰ï¼ŒCæ˜¯â€œéå®šä¹‰çš„ç±»å‹(Non-Defined Types)â€ã€‚
</span></code></pre></div><p>PointeræŒ‡é’ˆ: ç±»å‹Tçš„æŒ‡é’ˆç±»å‹ä¸º<em>Tï¼ŒTæ˜¯</em>Tçš„åŸºç¡€ç±»å‹ï¼Œ*Tç±»å‹çš„å˜é‡æˆ‘ä»¬ç§°ä¹‹ä¸ºæŒ‡é’ˆï¼ŒæŒ‡é’ˆå­˜å‚¨çš„æ˜¯åœ°å€ã€‚ //adm</p>
<h2 id="13-pointer">1.3 pointer</h2>
<p>åŸºç¡€ç±»å‹çš„å˜é‡å¯ä»¥é€šè¿‡&amp;ç¬¦å·æ¥å¾—åˆ°å˜é‡çš„å†…å­˜åœ°å€</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">100</span>
println(<span style="color:#e6db74">&#34;Value of a:&#34;</span>, <span style="color:#a6e22e">a</span>)
println(<span style="color:#e6db74">&#34;Address of a:&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>)
</code></pre></div><p><code>Value of a: 100</code>
<code>Address of a: 0x41c7ac</code></p>
<p><a href="https://play.golang.org/p/UMN5EBhBMi0"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a> <!-- raw HTML omitted --></p>
<p>å†…å»ºå‡½æ•°new(T)å¯ä»¥ä¸º*Tç±»å‹çš„å˜é‡åˆ†é…å†…å­˜å¹¶è¿”å›è¿™å—å†…å­˜çš„åœ°å€ï¼Œæ¯”å¦‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> <span style="color:#75715e">//p ä¸º*intç±»å‹çš„æŒ‡é’ˆï¼Œ*intçš„åŸºç¡€ç±»å‹æ˜¯int
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34;p: &#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">p</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">p</span> = new(<span style="color:#66d9ef">int</span>) <span style="color:#75715e">//new(int)åˆ†é…ä¸€å—å­˜å‚¨intå‹æ•°å€¼çš„å†…å­˜ï¼Œå¹¶è¿”å›è¿™å—å†…å­˜çš„åœ°å€ç»™p
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34;p: &#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">p</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
</code></pre></div><p><code>p:  0x0 true</code>
<code>p:  0x41c7ac false</code></p>
<p><a href="https://play.golang.org/p/DaCmuO67au9"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a><!-- raw HTML omitted --></p>
<p>å¦‚ä¸‹ä¾‹å­æ¼”ç¤ºäº†æŒ‡é’ˆå’Œæ•´å‹å˜é‡çš„å…³ç³»</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">100</span>
println(<span style="color:#e6db74">&#34;Value of a:&#34;</span>, <span style="color:#a6e22e">a</span>)
println(<span style="color:#e6db74">&#34;Address of a:&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pa</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>
println()
println(<span style="color:#e6db74">&#34;Value of pa:&#34;</span>, <span style="color:#a6e22e">pa</span>)

<span style="color:#a6e22e">pa</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span> <span style="color:#75715e">//å°†å˜é‡açš„åœ°å€èµ‹ç»™paï¼Œpaå­˜å‚¨çš„æ˜¯å˜é‡açš„åœ°å€ï¼Œå³paæŒ‡å‘å˜é‡aã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34;Value of pa:&#34;</span>, <span style="color:#a6e22e">pa</span>)
println(<span style="color:#e6db74">&#34;Value pointed by pa:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">pa</span>) <span style="color:#75715e">//*paè¡¨ç¤ºå–å‡ºpaå­˜å‚¨åœ°å€ä¸Šçš„æ•°æ®ï¼Œå³açš„å€¼ã€‚
</span><span style="color:#75715e"></span>
<span style="color:#f92672">*</span><span style="color:#a6e22e">pa</span> = <span style="color:#ae81ff">200</span> <span style="color:#75715e">//*pa = 200æŒ‡çš„æ˜¯å°†200èµ‹åˆ°paæ‰€æŒ‡å‘çš„åœ°å€ä¸Šï¼Œpaå­˜å‚¨çš„æ˜¯å˜é‡açš„åœ°å€ï¼Œä»è€Œå˜é‡açš„å€¼ä»100å˜ä¸ºäº†200
</span><span style="color:#75715e"></span>println()
println(<span style="color:#e6db74">&#34;Value of pa:&#34;</span>, <span style="color:#a6e22e">pa</span>)
println(<span style="color:#e6db74">&#34;Value pointed by pa:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">pa</span>)

<span style="color:#a6e22e">pa</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//å°†paçš„å€¼èµ‹ä¸ºnilï¼Œåˆ™paä¸å†æŒ‡å‘å˜é‡aï¼Œpaçš„å€¼å˜äº†ï¼Œä½†å˜é‡açš„åœ°å€å’Œå€¼å‡æœªå˜
</span><span style="color:#75715e"></span>println()
println(<span style="color:#e6db74">&#34;Value of pa:&#34;</span>, <span style="color:#a6e22e">pa</span>)
println(<span style="color:#e6db74">&#34;Value of a:&#34;</span>, <span style="color:#a6e22e">a</span>)
println(<span style="color:#e6db74">&#34;Address of a:&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>)
</code></pre></div><p><code>Value of a: 100</code><!-- raw HTML omitted -->
<code>Address of a: 0x41c7a4</code><!-- raw HTML omitted --></p>
<p><code>Value of pa: 0x0</code><!-- raw HTML omitted --></p>
<p><code>Value of pa: 0x41c7a4</code><!-- raw HTML omitted -->
<code>Value pointed by pa: 100</code><!-- raw HTML omitted --></p>
<p><code>Value of pa: 0x41c7a4</code><!-- raw HTML omitted -->
<code>Value pointed by pa: 200</code><!-- raw HTML omitted --></p>
<p><code>Value of pa: 0x0</code><!-- raw HTML omitted -->
<code>Value of a: 200</code><!-- raw HTML omitted -->
<code>Address of a: 0x41c7a4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/L81O1OBPYrS"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a><!-- raw HTML omitted --></p>
<p>æŒ‡é’ˆç±»å‹è½¬æ¢</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">DINT</span> <span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PINT</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PDINT</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">DINT</span>

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">200</span>
println(<span style="color:#e6db74">&#34;i:&#34;</span>, <span style="color:#a6e22e">i</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">p</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">i</span>
println(<span style="color:#e6db74">&#34;p:&#34;</span>, <span style="color:#a6e22e">p</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">di</span> <span style="color:#a6e22e">DINT</span>
<span style="color:#75715e">//di = i //cannot use i (type int) as type DINT in assignment
</span><span style="color:#75715e"></span><span style="color:#a6e22e">di</span> = (<span style="color:#a6e22e">DINT</span>)(<span style="color:#a6e22e">i</span>) <span style="color:#75715e">//æ˜¾ç¤ºè½¬æ¢;éæŒ‡é’ˆç±»å‹çš„å®šä¹‰ç±»å‹(DINT)å’ŒåŸºç¡€ç±»å‹(int)çš„å˜é‡ä¸å¯ä»¥äº’ç›¸ç›´æ¥èµ‹å€¼ï¼Œç¼–è¯‘å™¨æ— æ³•ä½¿ç”¨éšå¼è½¬æ¢ï¼Œä»£ç é‡Œéœ€è¦æ˜¾ç¤ºè½¬æ¢ã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34; i to  di:&#34;</span>, <span style="color:#a6e22e">di</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pi</span> <span style="color:#a6e22e">PINT</span>
<span style="color:#a6e22e">pi</span> = <span style="color:#a6e22e">p</span>         <span style="color:#75715e">//éšå¼è½¬æ¢;piçš„ç±»å‹æ¼”å˜æ˜¯PINT--*int; pçš„ç±»å‹æ˜¯*intã€‚*intåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*intç±»å‹çš„å˜é‡på¯ä»¥ç›´æ¥(éšå¼è½¬æ¢)èµ‹ç»™PINTç±»å‹çš„å˜é‡piã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">pi</span> = (<span style="color:#a6e22e">PINT</span>)(<span style="color:#a6e22e">p</span>) <span style="color:#75715e">//æ˜¾ç¤ºè½¬æ¢;piçš„ç±»å‹æ¼”å˜æ˜¯PINT--*int; pçš„ç±»å‹æ˜¯*intã€‚*intåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*intç±»å‹çš„å˜é‡pä¹Ÿå¯ä»¥æ˜¾ç¤ºè½¬æ¢èµ‹ç»™PINTç±»å‹çš„å˜é‡piã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34; p to  pi:&#34;</span>, <span style="color:#a6e22e">pi</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pdi</span> <span style="color:#a6e22e">PDINT</span>
<span style="color:#75715e">//pdi = p //cannot use p (type *int) as type PDINT in assignment
</span><span style="color:#75715e"></span><span style="color:#a6e22e">pdi</span> = (<span style="color:#f92672">*</span><span style="color:#a6e22e">DINT</span>)(<span style="color:#a6e22e">p</span>)          <span style="color:#75715e">//æ˜¾å¼+éšå¼è½¬æ¢;pdiçš„ç±»å‹æ¼”å˜æ˜¯PDINT--*DINT--*int; pçš„ç±»å‹æ˜¯*intã€‚*intåˆ°PDINTä¹‹é—´æœ‰ä¸€ä¸ª*DINTç±»å‹ï¼Œ*intç±»å‹çš„å˜é‡péœ€è¦å…ˆæ˜¾ç¤ºè½¬æ¢æˆ*DINTç±»å‹ï¼Œ*DINTåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*DINTç±»å‹çš„å˜é‡pé€šè¿‡éšå¼è½¬æ¢æˆPINTï¼Œå†èµ‹ç»™PINTç±»å‹çš„å˜é‡piã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">pdi</span> = (<span style="color:#a6e22e">PDINT</span>)((<span style="color:#f92672">*</span><span style="color:#a6e22e">DINT</span>)(<span style="color:#a6e22e">p</span>)) <span style="color:#75715e">//æ˜¾ç¤ºè½¬æ¢     ;pdiçš„ç±»å‹æ¼”å˜æ˜¯PDINT--*DINT--*int; pçš„ç±»å‹æ˜¯*intã€‚*intåˆ°PDINTä¹‹é—´æœ‰ä¸€ä¸ª*DINTç±»å‹ï¼Œ*intç±»å‹çš„å˜é‡péœ€è¦å…ˆæ˜¾ç¤ºè½¬æ¢æˆ*DINTç±»å‹ï¼Œ*DINTåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*DINTç±»å‹çš„å˜é‡pä¹Ÿå¯ä»¥æ˜¾ç¤ºè½¬æ¢æˆPINTï¼Œå†èµ‹ç»™PINTç±»å‹çš„å˜é‡piã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34; p to pdi:&#34;</span>, <span style="color:#a6e22e">pdi</span>)

<span style="color:#75715e">//pdi = pi //cannot use pi (type PINT) as type PDINT in assignment;piä¸èƒ½ç›´æ¥èµ‹ç»™pdiï¼Œå› ä¸ºpiå’Œpdiæ˜¯ä¸åŒçš„ç±»å‹
</span><span style="color:#75715e"></span><span style="color:#a6e22e">pdi</span> = (<span style="color:#f92672">*</span><span style="color:#a6e22e">DINT</span>)((<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>)(<span style="color:#a6e22e">pi</span>))          <span style="color:#75715e">//æ˜¾å¼+éšå¼è½¬æ¢;pdiçš„ç±»å‹æ¼”å˜æ˜¯PDINT--*DINT--*int; piçš„ç±»å‹æ¼”å˜æ˜¯PINT--*intã€‚PINTç±»å‹çš„å˜é‡piéœ€è¦å…ˆæ˜¾ç¤ºè½¬æ¢å›*intç±»å‹ï¼Œç„¶åå†æ˜¾ç¤ºè½¬æ¢æˆ*DINTç±»å‹ï¼Œ*DINTåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*DINTç±»å‹çš„å˜é‡pié€šè¿‡éšå¼è½¬æ¢æˆPDINTï¼Œå†èµ‹ç»™PDINTç±»å‹çš„å˜é‡pdiã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">pdi</span> = (<span style="color:#a6e22e">PDINT</span>)((<span style="color:#f92672">*</span><span style="color:#a6e22e">DINT</span>)((<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>)(<span style="color:#a6e22e">pi</span>))) <span style="color:#75715e">//æ˜¾ç¤ºè½¬æ¢     ;pdiçš„ç±»å‹æ¼”å˜æ˜¯PDINT--*DINT--*int; piçš„ç±»å‹æ¼”å˜æ˜¯PINT--*intã€‚PINTç±»å‹çš„å˜é‡piéœ€è¦å…ˆæ˜¾ç¤ºè½¬æ¢å›*intç±»å‹ï¼Œç„¶åå†æ˜¾ç¤ºè½¬æ¢æˆ*DINTç±»å‹ï¼Œ*DINTåˆ°PINTä¹‹é—´æ²¡æœ‰å…¶ä»–ç±»å‹ï¼Œ*DINTç±»å‹çš„å˜é‡piä¹Ÿå¯ä»¥æ˜¾ç¤ºè½¬æ¢æˆPDINTï¼Œå†èµ‹ç»™PDINTç±»å‹çš„å˜é‡pdiã€‚
</span><span style="color:#75715e"></span>println(<span style="color:#e6db74">&#34;pi to pdi:&#34;</span>, <span style="color:#a6e22e">pdi</span>)
</code></pre></div><p><code>i: 200</code><!-- raw HTML omitted -->
<code>p: 0x41c7a4</code><!-- raw HTML omitted -->
<code> i to  di: 200</code><!-- raw HTML omitted -->
<code> p to  pi: 0x41c7a4</code><!-- raw HTML omitted -->
<code> p to pdi: 0x41c7a4</code><!-- raw HTML omitted -->
<code>pi to pdi: 0x41c7a4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/iMAxkg2sryh"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a><!-- raw HTML omitted --></p>
<p><strong>goæŒ‡é’ˆä¸cæŒ‡é’ˆçš„ä¸åŒä¹‹å¤„</strong><!-- raw HTML omitted -->
<code>*p++</code>ä¸<code>*p--</code>åœ¨cè¯­è¨€ä¸­åˆ†åˆ«æ˜¯å°†æŒ‡é’ˆçš„å€¼è‡ªåŠ æˆ–è‡ªå‡ï¼Œè€Œåœ¨goè¯­è¨€ä¸­åˆ™æŒ‡çš„æ˜¯å°†pæŒ‡é’ˆæŒ‡å‘çš„å€¼è‡ªåŠ æˆ–è‡ªå‡<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> = new(<span style="color:#66d9ef">int</span>)
println(<span style="color:#e6db74">&#34;p addr:&#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#e6db74">&#34;p value:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">p</span>)
<span style="color:#f92672">*</span><span style="color:#a6e22e">p</span> = <span style="color:#ae81ff">100</span>
println(<span style="color:#e6db74">&#34;p addr:&#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#e6db74">&#34;p value:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">p</span>)
<span style="color:#f92672">*</span><span style="color:#a6e22e">p</span><span style="color:#f92672">++</span>
println(<span style="color:#e6db74">&#34;p addr:&#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#e6db74">&#34;p value:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">p</span>)
<span style="color:#f92672">*</span><span style="color:#a6e22e">p</span><span style="color:#f92672">--</span>
println(<span style="color:#e6db74">&#34;p addr:&#34;</span>, <span style="color:#a6e22e">p</span>, <span style="color:#e6db74">&#34;p value:&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">p</span>)
</code></pre></div><p><code>p addr: 0x41c7ac p value: 0</code><!-- raw HTML omitted -->
<code>p addr: 0x41c7ac p value: 100</code><!-- raw HTML omitted -->
<code>p addr: 0x41c7ac p value: 101</code><!-- raw HTML omitted -->
<code>p addr: 0x41c7ac p value: 100</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/UnSoFHk_z-E"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a><!-- raw HTML omitted --></p>
<p>cè¯­è¨€ä¸­è¢«è°ƒå‡½æ•°é‡Œå£°æ˜å¹¶å®šä¹‰çš„æŒ‡é’ˆåœ¨è¢«è°ƒå‡½æ•°è¿”å›æ—¶è¢«é‡Šæ”¾ï¼Œä½†goä¸­æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè¢«è°ƒå‡½æ•°ä¸­å£°æ˜å®šä¹‰çš„æŒ‡é’ˆå¯ä»¥è¿”å›åˆ°è°ƒç”¨å‡½æ•°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">pointerTest</span>() <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> {
       	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ptr</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> = new(<span style="color:#66d9ef">int</span>)
       	<span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span> = <span style="color:#ae81ff">123456789</span>
       	println(<span style="color:#e6db74">&#34;ptr:&#34;</span>, <span style="color:#a6e22e">ptr</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span>)
       	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ptr</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
       	<span style="color:#a6e22e">ret</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">pointerTest</span>()
       	println(<span style="color:#e6db74">&#34;ret:&#34;</span>, <span style="color:#a6e22e">ret</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">ret</span>)
}
</code></pre></div><p><code>ptr: 0x41c7a4 123456789</code><!-- raw HTML omitted -->
<code>ret: 0x41c7a4 123456789</code></p>
<p><a href="https://play.golang.org/p/GSYweaHYZeG"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a><!-- raw HTML omitted --></p>
<h2 id="14-rune">1.4 rune</h2>
<p>runeç±»å‹: runeç±»å‹çš„å˜é‡ç”¨äºå­˜å‚¨Unicodeå­—ç¬¦çš„ç¼–ç  //adm</p>
<p>runeå’Œint32æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨<a href="https://zh.wikipedia.org/wiki/Unicode%E5%AD%97%E7%AC%A6%E5%88%97%E8%A1%A8"><strong>Unicodeå­—ç¬¦</strong></a>çš„ç¼–ç <!-- raw HTML omitted -->
rune çš„å­—é¢é‡éœ€è¦ç”¨å•å¼•å·<code>''</code>å¼•èµ·æ¥, å•å¼•å·<code>''</code>ä¸­çš„å†…å®¹å¯ä»¥æ˜¯ä»¥ä¸‹6ç§ä¸­çš„ä¸€ç§ï¼š<!-- raw HTML omitted -->
<code>1. é™¤æ¢è¡Œç¬¦U+000Aå’Œæœªè½¬æ„çš„å•å¼•å·'ä¹‹å¤–çš„ä»»æ„Unicodeå­—ç¬¦</code><!-- raw HTML omitted -->
<code>2. \åé¢è·Ÿ3ä½8è¿›åˆ¶æ•°</code><!-- raw HTML omitted -->
<code>3. \xåé¢è·Ÿ2ä½16è¿›åˆ¶æ•°</code><!-- raw HTML omitted -->
<code>4. \uåé¢è·Ÿ4ä½16è¿›åˆ¶æ•°</code><!-- raw HTML omitted -->
<code>5. \Uåé¢è·Ÿ8ä½16è¿›åˆ¶æ•°</code><!-- raw HTML omitted -->
<code>6. ä»¥ä¸‹ä»»æ„ä¸€ä¸ªè½¬æ„å­—ç¬¦:</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\a   U+0007 alert or bell</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\b   U+0008 backspace</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\f   U+000C form feed</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\n   U+000A line feed or newline</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\r   U+000D carriage return</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\t   U+0009 horizontal tab</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\v   U+000b vertical tab</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\\   U+005c backslash</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\'   U+0027 single quote  (valid escape only within rune literals)</code><!-- raw HTML omitted -->
Â Â Â Â Â <code>\&quot;   U+0022 double quote  (valid escape only within string literals)</code><!-- raw HTML omitted --><!-- raw HTML omitted -->
ä»¥Unicodeç¼–ç U+0061ä¸ºä¾‹ï¼Œå®ƒå¯¹åº”çš„åè¿›åˆ¶æ•°æ˜¯97ï¼Œå¯¹åº”çš„å­—ç¬¦æ˜¯å­—æ¯aã€‚<!-- raw HTML omitted -->
ä»¥ä¸Š1-5 runeå­—é¢é‡çš„çš„è¡¨ç¤ºæ–¹å¼å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°5ç§èµ‹å€¼çš„æ–¹æ³•ï¼Œæœ€ç»ˆæ‰“å°å‡ºæ¥çš„ç»“æœå‡æ˜¯97<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r</span> <span style="color:#66d9ef">rune</span>

<span style="color:#a6e22e">r</span> = <span style="color:#e6db74">&#39;a&#39;</span> <span style="color:#75715e">//å­—é¢é‡&#39;a&#39;
</span><span style="color:#75715e"></span>println(<span style="color:#a6e22e">r</span>)

<span style="color:#a6e22e">r</span> = <span style="color:#e6db74">&#39;\141&#39;</span> <span style="color:#75715e">//3ä½8 è¿›åˆ¶çš„å­—é¢é‡è¡¨ç¤ºä¸º\141
</span><span style="color:#75715e"></span>println(<span style="color:#a6e22e">r</span>)

<span style="color:#a6e22e">r</span> = <span style="color:#e6db74">&#39;\x61&#39;</span> <span style="color:#75715e">//2ä½16è¿›åˆ¶çš„å­—é¢é‡è¡¨ç¤ºä¸º\x61
</span><span style="color:#75715e"></span>println(<span style="color:#a6e22e">r</span>)

<span style="color:#a6e22e">r</span> = <span style="color:#e6db74">&#39;\u0061&#39;</span> <span style="color:#75715e">//4ä½16è¿›åˆ¶çš„å­—é¢é‡è¡¨ç¤ºä¸º\u0061
</span><span style="color:#75715e"></span>println(<span style="color:#a6e22e">r</span>)

<span style="color:#a6e22e">r</span> = <span style="color:#e6db74">&#39;\U00000061&#39;</span> <span style="color:#75715e">//8ä½16è¿›åˆ¶çš„å­—é¢é‡è¡¨ç¤ºä¸º\U00000061
</span><span style="color:#75715e"></span>println(<span style="color:#a6e22e">r</span>)
</code></pre></div><p><code>97</code><!-- raw HTML omitted -->
<code>97</code><!-- raw HTML omitted -->
<code>97</code><!-- raw HTML omitted -->
<code>97</code><!-- raw HTML omitted -->
<code>97</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/IMeSrjLnGAz"><strong>ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ P L A Y A R O U N D ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“ ğŸ‹ ğŸ¥ ğŸ“</strong></a></p>
<h2 id="15-bool">1.5 bool</h2>
<p>boolç±»å‹: //adm</p>
<h2 id="16-byte">1.6 byte</h2>
<p>byteç±»å‹: byteæ˜¯uint8çš„åˆ«åï¼Œå¯ä»¥å°†byteå’Œuint8çœ‹ä½œåŒä¸€ç§æ•°æ®ç±»å‹ //adm</p>
<h2 id="17-uintptr">1.7 uintptr</h2>
<p>uintptrç±»å‹:  //adm</p>
<h2 id="18-string">1.8 string</h2>
<p>stringç±»å‹:  //adm</p>
<h2 id="19-float">1.9 float</h2>
<p>float32ä¸float64ç±»å‹:  //adm</p>
<p>æµ®ç‚¹å‹çš„å­—é¢é‡ç”±ä¸€ä¸ªæ•´æ•°éƒ¨åˆ†ï¼Œä¸€ä¸ªå°æ•°ç‚¹éƒ¨åˆ†ï¼Œä¸€ä¸ªå°æ•°éƒ¨åˆ†å’Œä¸€ä¸ªexponentéƒ¨åˆ†ï¼ŒæŸäº›éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">1.23</span>
<span style="color:#ae81ff">01.23</span> <span style="color:#75715e">// == 1.23
</span><span style="color:#75715e"></span><span style="color:#ae81ff">.23</span>
<span style="color:#ae81ff">1.</span>
<span style="color:#75715e">// A &#34;e&#34; or &#34;E&#34; starts the exponent part.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">1.23e2</span>  <span style="color:#75715e">// == 123.0
</span><span style="color:#75715e"></span><span style="color:#ae81ff">123E2</span>   <span style="color:#75715e">// == 12300.0
</span><span style="color:#75715e"></span><span style="color:#ae81ff">123.</span><span style="color:#a6e22e">E</span><span style="color:#f92672">+</span><span style="color:#ae81ff">2</span> <span style="color:#75715e">// == 12300.0
</span><span style="color:#75715e"></span><span style="color:#ae81ff">1e-1</span>    <span style="color:#75715e">// == 0.1
</span><span style="color:#75715e"></span><span style="color:#ae81ff">.1e0</span>    <span style="color:#75715e">// == 0.1
</span><span style="color:#75715e"></span><span style="color:#ae81ff">0e+5</span>    <span style="color:#75715e">// == 0.0
</span></code></pre></div><h2 id="110-complex">1.10 complex</h2>
<p>complex64ä¸complex128ç±»å‹:  //adm</p>
<h1 id="2-">2. æ•°ç»„</h1>
<h2 id="21-">2.1 æ•°ç»„å£°æ˜ä¸åˆå§‹åŒ–</h2>
<p>å£°æ˜ä¸€ä¸ª5ä¸ªå…ƒç´ çš„æ•°ç»„, æ¯ä¸ªå…ƒç´ ä¸ºintå‹æ•´æ•°ï¼Œå¹¶ä¸ºè¿™5ä¸ªå…ƒç´ èµ‹å€¼ //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">10</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">20</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">30</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">40</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">50</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>len: 5 array: [10 20 30 40 50]</code></p>
<p><a href="https://play.golang.org/p/uG3hTbW6E_X"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>å£°æ˜ä¸€ä¸ª5ä¸ªå…ƒç´ çš„æ•°ç»„, æ¯ä¸ªå…ƒç´ ä¸ºintå‹æ•´æ•°ï¼Œå¹¶åˆå§‹åŒ– //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>len: 5 array: [10 20 30 40 50]</code></p>
<p><a href="https://play.golang.org/p/GNFqU0yYVy8"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>[&hellip;] æ ¹æ®åˆå§‹åŒ–å…ƒç´ çš„æ•°é‡æ¥ç¡®å®šæ•°ç»„çš„é•¿åº¦ //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">70</span>, <span style="color:#ae81ff">80</span>}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>len: 8 array: [10 20 30 40 50 60 70 80]</code></p>
<p><a href="https://play.golang.org/p/tQZZJC4iBsD"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å°†ç¬¬0ä¸ªå’Œç¬¬10ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º50 //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">0</span>: <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">10</span>: <span style="color:#ae81ff">50</span>}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>len: 11 array: [50 0 0 0 0 0 0 0 0 0 50]</code></p>
<p><a href="https://play.golang.org/p/g5ThOlHRmus"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<h2 id="22-">2.2 æ•°ç»„å…ƒç´ ä¸ºæŒ‡é’ˆ</h2>
<p>å£°æ˜ä¸€ä¸ª5ä¸ªå…ƒç´ çš„æ•°ç»„, æ¯ä¸ªå…ƒç´ ä¸º*intæ•´å‹æŒ‡é’ˆï¼Œå¹¶ç”¨new(int)ä¸ºè¿™5ä¸ªå…ƒç´ åˆ†é…æ•´å‹æŒ‡é’ˆåœ°å€ //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array</span> [<span style="color:#ae81ff">5</span>]<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;declared array:&#34;</span>, <span style="color:#a6e22e">array</span>)
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>] = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>] = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>] = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>] = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>] = new(<span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;assigned array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>declared array: [&lt;nil&gt; &lt;nil&gt; &lt;nil&gt; &lt;nil&gt; &lt;nil&gt;]</code><!-- raw HTML omitted -->
<code>assigned array: [0x416030 0x416034 0x416038 0x41603c 0x416040]</code></p>
<p><a href="https://play.golang.org/p/_rM2W2QkOsY"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>å£°æ˜ä¸€ä¸ª5ä¸ªå…ƒç´ çš„æ•°ç»„, æ¯ä¸ªå…ƒç´ ä¸º*intæ•´å‹æŒ‡é’ˆï¼Œå¹¶åˆå§‹åŒ– //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>{new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>)}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;initial array:&#34;</span>, <span style="color:#a6e22e">array</span>)
</code></pre></div><p><code>initial array: [0x416020 0x416024 0x416028 0x41602c 0x416030]</code></p>
<p><a href="https://play.golang.org/p/_b5U8Ps2t6M"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>&amp;array[0]ï¼Œarray[0] ä¸ *array[0] //adm</p>
<p>&amp;array[0]è¡¨ç¤ºæ•°ç»„å…ƒç´ array[0]çš„åœ°å€<!-- raw HTML omitted -->
array[0]å­˜å‚¨çš„æ˜¯æŒ‡é’ˆçš„åœ°å€<!-- raw HTML omitted -->
*array[0]è¡¨ç¤ºarray[0]æŒ‡é’ˆåœ°å€æŒ‡å‘çš„æ•°æ®<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">10</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&amp;array[0] =&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>], <span style="color:#e6db74">&#34;array[0] =&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>], <span style="color:#e6db74">&#34;*array[0] =&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>])

<span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">20</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&amp;array[1] =&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>], <span style="color:#e6db74">&#34;array[1] =&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>], <span style="color:#e6db74">&#34;*array[1] =&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>])

<span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">30</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&amp;array[2] =&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>], <span style="color:#e6db74">&#34;array[2] =&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>], <span style="color:#e6db74">&#34;*array[2] =&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">2</span>])

<span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">40</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&amp;array[3] =&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>], <span style="color:#e6db74">&#34;array[3] =&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>], <span style="color:#e6db74">&#34;*array[3] =&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">3</span>])

<span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">50</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&amp;array[4] =&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>], <span style="color:#e6db74">&#34;array[4] =&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>], <span style="color:#e6db74">&#34;*array[4] =&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">4</span>])
</code></pre></div><p><code>&amp;array[0] = 0x442260 array[0] = 0x416020 *array[0] = 10</code><!-- raw HTML omitted -->
<code>&amp;array[1] = 0x442264 array[1] = 0x416024 *array[1] = 20</code><!-- raw HTML omitted -->
<code>&amp;array[2] = 0x442268 array[2] = 0x416028 *array[2] = 30</code><!-- raw HTML omitted -->
<code>&amp;array[3] = 0x44226c array[3] = 0x41602c *array[3] = 40</code><!-- raw HTML omitted -->
<code>&amp;array[4] = 0x442270 array[4] = 0x416030 *array[4] = 50</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/L9qH_77gX6G"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<h2 id="23-">2.3 æ•°ç»„äº’ç›¸èµ‹å€¼</h2>
<p>goè¯­è¨€æ”¯æŒå°†ä¸€ä¸ªæ•°ç»„æ‰€æœ‰å…ƒç´ çš„å€¼èµ‹ç»™å¦ä¸€ä¸ªæ•°ç»„ï¼Œå‰ææ˜¯è¿™2ä¸ªæ•°ç»„è¦å…·æœ‰ç›¸åŒçš„<strong>ç±»å‹</strong>å’Œ<strong>é•¿åº¦</strong></p>
<p>æ•°ç»„å…ƒç´ ä¸ºæ•´å‹ç±»å‹æ—¶ï¼Œå°†array2ä¸­5ä¸ªå…ƒç´ çš„å€¼æ‹·è´åˆ°array1 //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array1</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;declared array1:&#34;</span>, <span style="color:#a6e22e">array1</span>)

<span style="color:#a6e22e">array2</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>}
<span style="color:#a6e22e">array1</span> = <span style="color:#a6e22e">array2</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;assigned array1:&#34;</span>, <span style="color:#a6e22e">array1</span>)

</code></pre></div><p><code>declared array1: [0 0 0 0 0]</code><!-- raw HTML omitted -->
<code>assigned array1: [10 20 30 40 50]</code></p>
<p><a href="https://play.golang.org/p/YbSZmdgt_Ob"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>æ•°ç»„å…ƒç´ ä¸ºå­—ç¬¦ä¸²ç±»å‹æ—¶ï¼Œå°†array2ä¸­5ä¸ªå…ƒç´ çš„å€¼æ‹·è´åˆ°array1 //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array1</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">string</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array2</span> = [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;desk&#34;</span>, <span style="color:#e6db74">&#34;pencil&#34;</span>, <span style="color:#e6db74">&#34;ruler&#34;</span>, <span style="color:#e6db74">&#34;ink&#34;</span>, <span style="color:#e6db74">&#34;book&#34;</span>}

<span style="color:#a6e22e">array1</span> = <span style="color:#a6e22e">array2</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array1):&#34;</span>, len(<span style="color:#a6e22e">array1</span>), <span style="color:#e6db74">&#34; array1   :&#34;</span>, <span style="color:#a6e22e">array1</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array2):&#34;</span>, len(<span style="color:#a6e22e">array2</span>), <span style="color:#e6db74">&#34; array2   :&#34;</span>, <span style="color:#a6e22e">array2</span>)

</code></pre></div><p><code>len(array1): 5  array1   : [desk pencil ruler ink book]</code><!-- raw HTML omitted -->
<code>len(array2): 5  array2   : [desk pencil ruler ink book]</code></p>
<p><a href="https://play.golang.org/p/HuHXZ-c0gv5"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>æ•°ç»„å…ƒç´ ä¸ºæŒ‡é’ˆç±»å‹æ—¶ï¼Œå°†array2ä¸­5ä¸ªå…ƒç´ çš„å€¼ï¼ˆæŒ‡é’ˆåœ°å€)æ‹·è´åˆ°array1  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array1</span> [<span style="color:#ae81ff">5</span>]<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;declared array1:&#34;</span>, <span style="color:#a6e22e">array1</span>)

<span style="color:#a6e22e">array2</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>{new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>), new(<span style="color:#66d9ef">int</span>)}
<span style="color:#a6e22e">array1</span> = <span style="color:#a6e22e">array2</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;assigned array1:&#34;</span>, <span style="color:#a6e22e">array1</span>)
</code></pre></div><p><code>declared array1: [&lt;nil&gt; &lt;nil&gt; &lt;nil&gt; &lt;nil&gt; &lt;nil&gt;]</code><!-- raw HTML omitted -->
<code>assigned array1: [0x416030 0x416034 0x416038 0x41603c 0x416040]</code></p>
<p><a href="https://play.golang.org/p/rG8UHTVYYNP"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<h2 id="24-">2.4 äºŒç»´æ•°ç»„</h2>
<p>ä¸€ç»´æ•°ç»„, Â æŒ‡çš„æ˜¯ä¸€è¡Œå¤šåˆ—çš„æ•°ç»„ã€‚æ¯”å¦‚var array [5]int, Â Â Â Â Â Â æ˜¯1è¡Œ5åˆ—çš„ä¸€ç»´æ•°ç»„ã€‚<!-- raw HTML omitted -->
äºŒç»´æ•°ç»„ï¼ŒæŒ‡çš„æ˜¯å¤šè¡Œå¤šåˆ—çš„æ•°ç»„ã€‚æ¯”å¦‚var array [2][5]intï¼Œæ˜¯2è¡Œ5åˆ—çš„äºŒç»´æ•°ç»„ã€‚</p>
<p>å£°æ˜ä¸€ä¸ª2è¡Œ5åˆ—çš„äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºintå‹æ•´æ•°ï¼Œå¹¶åˆå§‹åŒ–æ¯ä¸ªå…ƒç´   //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span> {{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>},{<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">24</span>}}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array):&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[0]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>]), <span style="color:#e6db74">&#34;array[0]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>])
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[1]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>]), <span style="color:#e6db74">&#34;array[1]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>])
</code></pre></div><p><code>len(array): 2 array: [[10 11 12 13 14] [20 21 22 23 24]]</code><!-- raw HTML omitted -->
<code>len(array[0]): 5 array[0]: [10 11 12 13 14]</code><!-- raw HTML omitted -->
<code>len(array[1]): 5 array[1]: [20 21 22 23 24]</code></p>
<p><a href="https://play.golang.org/p/bJqnRfeWlvK"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a><!-- raw HTML omitted --></p>
<p>å£°æ˜ä¸€ä¸ª2è¡Œ5åˆ—çš„äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºintå‹æ•´æ•°ï¼Œå¹¶åˆå§‹åŒ–ç¬¬2è¡Œç¬¬3ä¸ªå…ƒç´   //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>: {<span style="color:#ae81ff">2</span>: <span style="color:#ae81ff">22</span>}}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array):&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[0]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>]), <span style="color:#e6db74">&#34;array[0]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>])
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[1]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>]), <span style="color:#e6db74">&#34;array[1]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>])
</code></pre></div><p><code>len(array): 2 array: [[0 0 0 0 0] [0 0 22 0 0]]</code><!-- raw HTML omitted -->
<code>len(array[0]): 5 array[0]: [0 0 0 0 0]</code><!-- raw HTML omitted -->
<code>len(array[1]): 5 array[1]: [0 0 22 0 0]</code></p>
<p><a href="https://play.golang.org/p/ue7to0hPJVP"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a><!-- raw HTML omitted --></p>
<p>å£°æ˜ä¸€ä¸ª2è¡Œ5åˆ—çš„äºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºintå‹æ•´æ•°ï¼Œå¹¶ä¾æ¬¡ä¸ºæ¯ä¸ªå…ƒç´ èµ‹å€¼  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">10</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">11</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">12</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">13</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">14</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">20</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">21</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">22</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">23</span>
<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">24</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array):&#34;</span>, len(<span style="color:#a6e22e">array</span>), <span style="color:#e6db74">&#34;array:&#34;</span>, <span style="color:#a6e22e">array</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[0]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>]), <span style="color:#e6db74">&#34;array[0]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">0</span>])
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array[1]):&#34;</span>, len(<span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>]), <span style="color:#e6db74">&#34;array[1]:&#34;</span>, <span style="color:#a6e22e">array</span>[<span style="color:#ae81ff">1</span>])
</code></pre></div><p><code>len(array): 2 array: [[10 11 12 13 14] [20 21 22 23 24]]</code><!-- raw HTML omitted -->
<code>len(array[0]): 5 array[0]: [10 11 12 13 14]</code><!-- raw HTML omitted -->
<code>len(array[1]): 5 array[1]: [20 21 22 23 24]</code></p>
<p><a href="https://play.golang.org/p/F-nSACHOGJn"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<p>äºŒç»´æ•°ç»„äº’ç›¸èµ‹å€¼  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array1</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">array2</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>

<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">10</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">11</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">12</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">13</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">14</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">20</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">21</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">22</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">23</span>
<span style="color:#a6e22e">array2</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">24</span>

<span style="color:#a6e22e">array1</span> = <span style="color:#a6e22e">array2</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array1):&#34;</span>, len(<span style="color:#a6e22e">array1</span>), <span style="color:#e6db74">&#34;array1:&#34;</span>, <span style="color:#a6e22e">array1</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len(array2):&#34;</span>, len(<span style="color:#a6e22e">array2</span>), <span style="color:#e6db74">&#34;array2:&#34;</span>, <span style="color:#a6e22e">array2</span>)
</code></pre></div><p><code>len(array1): 2 array1: [[10 11 12 13 14] [20 21 22 23 24]]</code><!-- raw HTML omitted -->
<code>len(array2): 2 array2: [[10 11 12 13 14] [20 21 22 23 24]]</code></p>
<p><a href="https://play.golang.org/p/z82JDO2xVD4"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">array</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>}, {<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">24</span>}}
	<span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">array</span>)
	<span style="color:#a6e22e">test2</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">array</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>) { <span style="color:#75715e">//test1å‚æ•°ä¼ é€’çš„æ˜¯æ•´ä¸ªäºŒç»´æ•°ç»„
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;test1 a :&#34;</span>, <span style="color:#a6e22e">a</span>, <span style="color:#e6db74">&#34;len(a):&#34;</span>, len(<span style="color:#a6e22e">a</span>), <span style="color:#e6db74">&#34;sizeof(a):&#34;</span>, <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Sizeof</span>(<span style="color:#a6e22e">a</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test2</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span>[<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>) { <span style="color:#75715e">//test2å‚æ•°ä¼ é€’çš„æ˜¯äºŒç»´æ•°ç»„çš„æŒ‡é’ˆ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;test2 a:&#34;</span>, <span style="color:#a6e22e">a</span>, <span style="color:#e6db74">&#34;len(a):&#34;</span>, len(<span style="color:#a6e22e">a</span>), <span style="color:#e6db74">&#34;sizeof(a):&#34;</span>, <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Sizeof</span>(<span style="color:#a6e22e">a</span>))
}
</code></pre></div><p><code>test1 a : [[10 11 12 13 14] [20 21 22 23 24]] len(a): 2 sizeof(a): 40</code><!-- raw HTML omitted -->
<code>test2 a: &amp;[[10 11 12 13 14] [20 21 22 23 24]] len(a): 2 sizeof(a): 4</code><!-- raw HTML omitted --></p>
<p>å¯ä»¥çœ‹åˆ°test2çš„å‚æ•°aï¼ˆä¼ é€’çš„æ˜¯äºŒç»´æ•°ç»„çš„æŒ‡é’ˆï¼‰åªå 4ä¸ªå­—èŠ‚ï¼Œæ¯”test1çš„å‚æ•°aï¼ˆä¼ é€’çš„æ•´ä¸ªäºŒç»´æ•°ç»„ï¼‰çš„40ä¸ªå­—èŠ‚è¦èŠ‚çœå¾ˆå¤šå†…å­˜ç©ºé—´ã€‚<!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/QeFy6wxv7qW"><strong>ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ P L A Y A R O U N D ğŸ¥¤  ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ” ğŸŸ ğŸ¥¤ ğŸ”</strong></a></p>
<h1 id="3-">3. åˆ‡ç‰‡</h1>
<p>åˆ‡ç‰‡æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆelementsï¼Œåˆ‡ç‰‡å½“å‰å¯ç”¨æ•°ç»„å…ƒç´ çš„ä¸ªæ•°lengthï¼Œå’Œåˆ‡ç‰‡æœ€å¤šå¯ç”¨æ•°ç»„å…ƒç´ çš„ä¸ªæ•°capacity.<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">_slice</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">elements</span> <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span> <span style="color:#75715e">// referencing underlying elements
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">len</span>      <span style="color:#66d9ef">int</span>            <span style="color:#75715e">// length
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">cap</span>      <span style="color:#66d9ef">int</span>            <span style="color:#75715e">// capacity
</span><span style="color:#75715e"></span>}
</code></pre></div><p>åˆ‡ç‰‡ç›¸å¯¹äºæ•°ç»„çš„å¥½å¤„æ˜¯åˆ‡ç‰‡å¯ä»¥è‡ªåŠ¨å¢é•¿å’Œç¼©å°ç©ºé—´ã€‚<!-- raw HTML omitted --></p>
<h2 id="31-">3.1 åˆ‡ç‰‡å£°æ˜å’Œåˆå§‹åŒ–</h2>
<p>ã€Œnil sliceå£°æ˜æ–¹å¼ä¸€ã€ç”¨varå£°æ˜çš„åˆ‡ç‰‡å˜é‡æ˜¯nil sliceã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span> <span style="color:#75715e">//or var s []int = nil
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s is nil?&#34;</span>, <span style="color:#a6e22e">s</span><span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s is nil? true</code><!-- raw HTML omitted -->
<code>s []int(nil)</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x0 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p>ç”¨%#væ‰“å°sæ—¶è¡¨ç¤ºç”¨goçš„è¯­æ³•æ ¼å¼æ¥è¡¨ç¤ºå˜é‡sã€‚<!-- raw HTML omitted -->
ç”¨%pæ‰“å°&amp;sæ—¶è¡¨ç¤ºçš„æ˜¯åˆ‡ç‰‡å˜é‡sçš„é¦–åœ°å€ã€‚<!-- raw HTML omitted -->
ç”¨%pæ‰“å°sæ—¶è¡¨ç¤ºçš„æ˜¯åˆ‡ç‰‡ä¸­elementsçš„å€¼ï¼Œå³åˆ‡ç‰‡æ•°ç»„çš„é¦–åœ°å€ã€‚<!-- raw HTML omitted -->
å½“elementsä¸º0å€¼æ—¶(æŒ‡é’ˆelementsçš„0å€¼ç”¨nilè¡¨ç¤º)ï¼Œè¿™ç§åˆ‡ç‰‡ç§°ä½œnil sliceã€‚<!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/WxZXt2BMEFP"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ã€Œnil sliceå£°æ˜æ–¹å¼äºŒã€ç”¨ := ç®€çŸ­å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡å¹¶ç”¨(nil)åˆå§‹åŒ–çš„å˜é‡æ˜¯nil sliceã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []int(<span style="color:#66d9ef">nil</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s is nil?&#34;</span>, <span style="color:#a6e22e">s</span><span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s is nil? true</code><!-- raw HTML omitted -->
<code>s []int(nil)</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x0 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p>s := []int(nil) å’Œ var s []int å£°æ˜çš„åˆ‡ç‰‡æ‰“å°ç»“æœä¸€æ ·ï¼Œè¿™ä¸¤ç§æ–¹å¼å‡æ˜¯å£°æ˜ä¸€ä¸ªnil sliceã€‚</p>
<p><a href="https://play.golang.org/p/te0FGkHZJGN"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ã€Œblank sliceå£°æ˜æ–¹å¼ä¸€ã€ ç”¨ := ç®€çŸ­å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡å¹¶ç”¨{ }åˆå§‹åŒ–çš„å˜é‡æ˜¯blank sliceã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{}

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s is nil?&#34;</span>, <span style="color:#a6e22e">s</span><span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s is nil? false</code><!-- raw HTML omitted -->
<code>s []int{}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x1c4c64 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p>ç”¨{}åˆå§‹åŒ–åˆ‡ç‰‡å˜é‡sæ—¶ï¼Œelementsä¸æ˜¯0å€¼(ä¸nil sliceçš„å·®å¼‚)ï¼Œå®ƒå«æœ‰å†…å­˜çš„åœ°å€å€¼ï¼Œä½†åœ°å€ä¸Šçš„å€¼ä¸ºç©º(0å€¼)ï¼Œæ‰€ä»¥è¿™ç§åˆ‡ç‰‡ç§°ä½œblank sliceç©ºåˆ‡ç‰‡ã€‚</p>
<p><a href="https://play.golang.org/p/YMt8Pdj5a7H"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ã€Œblank sliceå£°æ˜æ–¹å¼äºŒã€ ç”¨ make åˆ›å»ºlenå’Œcapå‡ä¸º0çš„åˆ‡ç‰‡å˜é‡æ˜¯blank silceã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s is nil?&#34;</span>, <span style="color:#a6e22e">s</span><span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s is nil? false</code><!-- raw HTML omitted -->
<code>s []int{}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x1c4c64 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p>s := make([]int, 0) å’Œ s := []int{} å£°æ˜çš„åˆ‡ç‰‡æ‰“å°ç»“æœä¸€æ ·ï¼Œè¿™ä¸¤ç§æ–¹å¼å‡æ˜¯åˆ›å»ºä¸€ä¸ªblank sliceã€‚</p>
<p><a href="https://play.golang.org/p/z-PYfXziItX"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ç›´æ¥åˆå§‹åŒ–åˆ‡ç‰‡  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;pen&#34;</span>, <span style="color:#e6db74">&#34;ink&#34;</span>, <span style="color:#e6db74">&#34;paper&#34;</span>, <span style="color:#e6db74">&#34;eraser&#34;</span>, <span style="color:#e6db74">&#34;bag&#34;</span>}

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s []string{&quot;pen&quot;, &quot;ink&quot;, &quot;paper&quot;, &quot;eraser&quot;, &quot;bag&quot;}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x430150 len: 5 cap: 5</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/K8hjqAlFr6c"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>åˆå§‹åŒ–åˆ‡ç‰‡çš„ç¬¬4ä¸ªå…ƒç´   //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#ae81ff">4</span>: <span style="color:#e6db74">&#34;bag&#34;</span>}

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s []string{&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bag&quot;}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x430150 len: 5 cap: 5</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/hzXI06zpVYd"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="32-make">3.2 ç”¨makeåˆ›å»ºåˆ‡ç‰‡</h2>
<p>åœ¨ã€Œblank sliceå£°æ˜æ–¹å¼äºŒã€æ—¶æˆ‘ä»¬ç”¨s := make([]int, 0)åˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡æ•°ç»„é•¿åº¦ä¸º0çš„åˆ‡ç‰‡sï¼Œç§°ä½œblank sliceç©ºåˆ‡ç‰‡ã€‚<!-- raw HTML omitted -->
makeæ˜¯goè¯­è¨€çš„å†…ç½®å‡½æ•°ï¼Œå¯ä»¥ä¸ºsliceï¼Œmapå’Œchannelåˆ†é…ç©ºé—´ï¼Œè¿™é‡Œæˆ‘ä»¬é¦–å…ˆäº†è§£makeæ˜¯å¦‚ä½•åˆ›å»ºsliceçš„ã€‚</p>
<blockquote>
<p>func make(t Type, size &hellip;IntegerType) Type</p>
</blockquote>
<p>makeçš„ç¬¬1ä¸ªå‚æ•°tæ˜¯Typeç±»å‹çš„å˜é‡ï¼Œå®ƒçš„è¿”å›ç±»å‹æ˜¯å’Œtç±»å‹ä¸€æ ·çš„Typeç±»å‹ï¼Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚<!-- raw HTML omitted -->
å¯¹äºåˆ‡ç‰‡æ¥è¯´ï¼Œå¦‚æœåªå¡«ç¬¬1ä¸ªæ•´å‹å‚æ•°sizeï¼Œ åˆ™åˆ‡ç‰‡çš„lenå’Œcapçš„å¤§å°å‡ä¸ºsizeã€‚<!-- raw HTML omitted -->
å¦‚æœå†å¡«ç¬¬2ä¸ªæ•´å‹å‚æ•°(makeæ˜¯å¯å˜å‚çš„å‡½æ•°)ï¼Œåˆ™ç¬¬ä¸€ä¸ªæ•´å‹å‚æ•°è¡¨ç¤ºåˆ‡ç‰‡çš„lenå¤§å°ï¼Œç¬¬äºŒä¸ªæ•´å‹å‚æ•°è¡¨ç¤ºåˆ‡ç‰‡çš„capå¤§å°ã€‚</p>
<p>ç”¨makeç»™nil sliceåˆ†é…æ•°ç»„ç©ºé—´, len == cap  //adm</p>
<p>nil sliceæ˜¯ä¸èƒ½ç›´æ¥è¿›è¡Œè¿›è¡Œèµ‹å€¼çš„ï¼Œå› ä¸ºç³»ç»Ÿæ²¡æœ‰ä¸ºnil sliceåˆ†é…å¯¹åº”çš„æ•°ç»„ï¼ˆelementsä¸ºnilï¼‰ã€‚<!-- raw HTML omitted -->
è¦ä¸ºnil sliceèµ‹å€¼çš„è¯éœ€è¦ä½¿ç”¨makeä¸ºsliceåˆ†é…æ•°ç»„ç©ºé—´ï¼Œç„¶åå†èµ‹å€¼ã€‚
å¦‚ä¸‹ä¾‹å­æ¼”ç¤ºäº†sliceçš„lenä¸capç›¸ç­‰æ—¶çš„æƒ…å†µï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span> <span style="color:#75715e">//or var s []int = nil
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span> = make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">5</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">2</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">3</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">4</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">5</span>

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
</code></pre></div><p><code>s []int(nil)</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x0 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p><code>s []int{0, 0, 0, 0, 0}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x450020 len: 5 cap: 5</code><!-- raw HTML omitted --></p>
<p><code>s []int{1, 2, 3, 4, 5}</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/wgDX8PLINU-"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ç”¨makeç»™nil sliceåˆ†é…æ•°ç»„ç©ºé—´, len != cap  //adm</p>
<p>å¦‚ä¸‹ä¾‹å­æ¼”ç¤ºäº†sliceçš„lenä¸capä¸ç›¸ç­‰æ—¶çš„æƒ…å†µï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span><span style="color:#f92672">:=</span> []int(<span style="color:#66d9ef">nil</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span> = make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">2</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">3</span>
<span style="color:#75715e">//s[3]ä¸äºˆèµ‹å€¼ï¼Œå› ä¸ºåˆ‡ç‰‡sä¸€å…±æœ‰4ä¸ªæ•°ç»„å…ƒç´ å¯ä»¥è®¿é—®ï¼Œs[3]é»˜è®¤ä¸º0
</span><span style="color:#75715e"></span><span style="color:#75715e">//s[4]ä¸èƒ½èµ‹å€¼ï¼Œå› ä¸ºåˆ‡ç‰‡sä¸€å…±æœ‰4ä¸ªæ•°ç»„å…ƒç´ å¯ä»¥è®¿é—®ï¼Œç»™s[4]èµ‹å€¼ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
</code></pre></div><p><code>s []int(nil)</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x0 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p><code>s []int{0, 0, 0, 0}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x450020 len: 4 cap: 5</code><!-- raw HTML omitted --></p>
<p><code>s []int{1, 2, 3, 0}</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/x_eSDliV6Mx"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>ç”¨makeåˆ›å»ºåˆ‡ç‰‡  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)

<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">2</span>
<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#ae81ff">3</span>

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
</code></pre></div><p><code>s []int{1, 2, 3, 0}</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/ORU4Uo2gOp7"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="33-append">3.3 ç”¨appendé™„åŠ åˆ‡ç‰‡</h2>
<blockquote>
<p>func append(slice []Type, elems &hellip;Type) []Type</p>
</blockquote>
<p>appendå‡½æ•°ç”¨äºå°†æ–°çš„å…ƒç´ æˆ–åˆ‡ç‰‡é™„åŠ åˆ°åˆ‡ç‰‡çš„æœ«å°¾ã€‚<!-- raw HTML omitted -->
å¦‚æœåˆ‡ç‰‡çš„å®¹é‡è¶³å¤Ÿå®¹çº³æ–°çš„æ•°æ®ï¼Œåˆ™æ–°å…ƒç´ æˆ–åˆ‡ç‰‡å°†ä¼šè¢«é™„åŠ åˆ°åˆ‡ç‰‡çš„æœ«å°¾;<!-- raw HTML omitted -->
å¦‚æœåˆ‡ç‰‡çš„å®¹é‡ä¸è¶³ä»¥å®¹çº³æ–°çš„å…ƒç´ æˆ–åˆ‡ç‰‡ï¼Œappendå‡½æ•°å°†ä¼šé‡æ–°åˆ†é…ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ç”¨äºå­˜å‚¨åŸæ•°æ®å’Œæ–°é™„åŠ çš„æ•°æ®æˆ–åˆ‡ç‰‡ï¼š<!-- raw HTML omitted -->
å¦‚æœåŸæ¥åˆ‡ç‰‡çš„å®¹é‡å°äº1000ï¼Œæ–°çš„åˆ‡ç‰‡å®¹é‡å°†ä¼šå¢é•¿åˆ°åŸæ¥çš„2å€ï¼Œ<!-- raw HTML omitted -->
å¦‚æœåŸæ¥åˆ‡ç‰‡çš„å®¹é‡å¤§äº1000ï¼Œæ–°çš„åˆ‡ç‰‡å®¹é‡å°†ä¼šå¢é•¿åˆ°åŸæ¥çš„1.25å€ã€‚<!-- raw HTML omitted --></p>
<p>ç»™blank silceé™„åŠ å…ƒç´ å’Œåˆ‡ç‰‡  //adm</p>
<blockquote>
<p>ä½¿ç”¨appendç»™åˆ‡ç‰‡é™„åŠ å…ƒç´ å’Œåˆ‡ç‰‡çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š<!-- raw HTML omitted -->
slice = append(slice, elem1, elem2)<!-- raw HTML omitted -->
slice = append(slice, anotherSlice&hellip;)</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{} <span style="color:#75715e">//or s := make([]int, 0)
</span><span style="color:#75715e"></span><span style="color:#a6e22e">s1</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">9</span>}

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))

<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s1</span><span style="color:#f92672">...</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s array header address(elements): %p len: %d cap: %d\n\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
</code></pre></div><p><code>s []int{}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x1c4c64 len: 0 cap: 0</code><!-- raw HTML omitted --></p>
<p><code>s []int{1, 2, 3}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x414040 len: 3 cap: 4</code><!-- raw HTML omitted --></p>
<p><code>s []int{1, 2, 3, 7, 8, 9}</code><!-- raw HTML omitted -->
<code>s header address: 0x40a0e0</code><!-- raw HTML omitted -->
<code>s array header address(elements): 0x450020 len: 6 cap: 8</code><!-- raw HTML omitted --></p>
<p>ç¬¬ä¸€æ®µæ‰“å°ç»“æœï¼šæ­¤æ—¶å£°æ˜çš„åˆ‡ç‰‡å˜é‡sä¸ºblank sliceç©ºåˆ‡ç‰‡, elementsä¸º0x1c4c64, lenå’Œcapä¸º0ã€‚<!-- raw HTML omitted -->
ç¬¬äºŒæ®µæ‰“å°ç»“æœï¼šå‘åˆ‡ç‰‡s appendæ•°å­—1, 2, 3æ—¶ï¼Œappendå‡½æ•°ä¸ºåˆ‡ç‰‡åˆ†é…æ–°çš„æ•°ç»„ç©ºé—´ï¼Œ<!-- raw HTML omitted -->
Â  Â  Â  Â  Â   Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
åˆ‡ç‰‡æ•°ç»„é¦–åœ°å€å˜ä¸º0x414040, å®¹é‡ä»0å¢åŠ åˆ°4ï¼ˆä»¥2çš„å¹‚ä¸ºåŸºæ•°ï¼‰ï¼Œå› ä¸ºæ·»åŠ <!-- raw HTML omitted -->
Â  Â  Â  Â  Â   Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
äº†3ä¸ªæ•°æ®ï¼Œæ‰€ä»¥lengthä¸º3ã€‚<!-- raw HTML omitted -->
ç¬¬ä¸‰æ®µæ‰“å°ç»“æœï¼šç»§ç»­å‘åˆ‡ç‰‡s appendæ–°çš„åˆ‡ç‰‡s1æ—¶(æ³¨æ„s1åé¢çš„&hellip;ä¸èƒ½çœ)ï¼ŒåŸæ¥çš„åˆ‡ç‰‡æ•°ç»„<!-- raw HTML omitted -->
Â  Â  Â  Â  Â   Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
(0x414040)å®¹é‡ä¸º2ï¼Œå·²ä¸è¶³ä»¥å®¹çº³æ–°çš„åˆ‡ç‰‡s1çš„3ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥appendå‡½æ•°ä¸º<!-- raw HTML omitted -->
Â  Â  Â  Â  Â   Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
åˆ‡ç‰‡sé‡æ–°åˆ†é…äº†æ•°ç»„(0x450020)ï¼Œå®¹é‡ä»4å¢é•¿åˆ°8å¹¶å°†åŸæ¥æ•°ç»„(0x414040)çš„<!-- raw HTML omitted -->
Â  Â  Â  Â  Â   Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
æ•°æ®æ‹·è´åˆ°æ–°çš„æ•°ç»„(0x450020)é‡Œï¼Œç„¶åå°†s1çš„å…ƒç´ é™„åŠ sçš„æœ«å°¾ï¼Œsçš„lenå˜ä¸º6ã€‚<!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/Ut4ZUVlIgFj"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>appendå‡½æ•°è¿˜æ”¯æŒå°†å­—ç¬¦ä¸²é™„åŠ åˆ°byteç±»å‹çš„åˆ‡ç‰‡ä¸Š  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> append([]byte(<span style="color:#e6db74">&#34;hello &#34;</span>), <span style="color:#e6db74">&#34;world&#34;</span><span style="color:#f92672">...</span>)

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;elements:%06p, capacity:%d, length:%d, slice: %s\n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#a6e22e">slice</span>)
</code></pre></div><p><code>elements:0x414030, capacity:11, length:16, slice: hello world</code></p>
<p><a href="https://play.golang.org/p/PGxm3M5r7bV"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="34-copy">3.4 ç”¨copyæ‹·è´åˆ‡ç‰‡</h2>
<p>copyå‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼Œå®ƒæ”¯æŒå°†srcåˆ‡ç‰‡æ‹·è´åˆ°dståˆ‡ç‰‡ï¼ŒåŒæ ·æ”¯æŒå°†å­—ç¬¦ä¸²çš„å­—èŠ‚æ‹·è´åˆ°byteçš„åˆ‡ç‰‡ä¸­ï¼Œsrcå’Œdstå¯ä»¥é‡å ã€‚<!-- raw HTML omitted -->
copyå‡½æ•°è¿”å›æ‹·è´å…ƒç´ çš„æ•°é‡ï¼Œæ‹·è´å…ƒç´ çš„æ•°é‡æ˜¯srcæˆ–dståˆ‡ç‰‡lençš„æœ€å°å€¼ã€‚</p>
<blockquote>
<p>func copy(dst, src []Type) int</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s1</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">5</span>)
<span style="color:#a6e22e">s2</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">15</span>)
<span style="color:#a6e22e">s3</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>}
<span style="color:#a6e22e">s4</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">byte</span>, <span style="color:#ae81ff">5</span>)

<span style="color:#a6e22e">n1</span> <span style="color:#f92672">:=</span> copy(<span style="color:#a6e22e">s1</span>, <span style="color:#a6e22e">s3</span>[:])        <span style="color:#75715e">//s1 len å°äº s3 len
</span><span style="color:#75715e"></span><span style="color:#a6e22e">n2</span> <span style="color:#f92672">:=</span> copy(<span style="color:#a6e22e">s2</span>, <span style="color:#a6e22e">s3</span>[:])        <span style="color:#75715e">//s2 len å¤§äº s3 len
</span><span style="color:#75715e"></span><span style="color:#a6e22e">n3</span> <span style="color:#f92672">:=</span> copy(<span style="color:#a6e22e">s3</span>[<span style="color:#ae81ff">0</span>:], <span style="color:#a6e22e">s3</span>[<span style="color:#ae81ff">5</span>:<span style="color:#ae81ff">9</span>])  <span style="color:#75715e">//s3 é‡å æ‹·è´
</span><span style="color:#75715e"></span><span style="color:#a6e22e">n4</span> <span style="color:#f92672">:=</span> copy(<span style="color:#a6e22e">s4</span>, <span style="color:#e6db74">&#34;blackwhite&#34;</span>) <span style="color:#75715e">//å°†å­—ç¬¦ä¸²æ‹·è´åˆ°byteåˆ‡ç‰‡
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;n1:&#34;</span>, <span style="color:#a6e22e">n1</span>, <span style="color:#e6db74">&#34;s1:&#34;</span>, <span style="color:#a6e22e">s1</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;n2:&#34;</span>, <span style="color:#a6e22e">n2</span>, <span style="color:#e6db74">&#34;s2:&#34;</span>, <span style="color:#a6e22e">s2</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;n3:&#34;</span>, <span style="color:#a6e22e">n3</span>, <span style="color:#e6db74">&#34;s3:&#34;</span>, <span style="color:#a6e22e">s3</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;n4: %d s4: %s\n&#34;</span>, <span style="color:#a6e22e">n4</span>, <span style="color:#a6e22e">s4</span>)
</code></pre></div><p><code>n1: 5 s1: [1 2 3 4 5]</code><!-- raw HTML omitted -->
<code>n2: 9 s2: [1 2 3 4 5 6 7 8 9 0 0 0 0 0 0]</code><!-- raw HTML omitted -->
<code>n3: 4 s3: [6 7 8 9 5 6 7 8 9]</code><!-- raw HTML omitted -->
<code>n4: 5 s4: black</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/tnTRpLAxv2K"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="35-">3.5 éå†åˆ‡ç‰‡</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;zero&#34;</span>, <span style="color:#e6db74">&#34;one&#34;</span>, <span style="color:#e6db74">&#34;two&#34;</span>, <span style="color:#e6db74">&#34;three&#34;</span>, <span style="color:#e6db74">&#34;four&#34;</span>, <span style="color:#e6db74">&#34;five&#34;</span>, <span style="color:#e6db74">&#34;six&#34;</span>, <span style="color:#e6db74">&#34;seven&#34;</span>, <span style="color:#e6db74">&#34;eight&#34;</span>}

<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
}
</code></pre></div><p><code>0 zero</code><!-- raw HTML omitted -->
<code>1 one</code><!-- raw HTML omitted -->
<code>2 two</code><!-- raw HTML omitted -->
<code>3 three</code><!-- raw HTML omitted -->
<code>4 four</code><!-- raw HTML omitted -->
<code>5 five</code><!-- raw HTML omitted -->
<code>6 six</code><!-- raw HTML omitted -->
<code>7 seven</code><!-- raw HTML omitted -->
<code>8 eight</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/NcqJAx8keKk"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="36-">3.6 åˆ’åˆ†åˆ‡ç‰‡</h2>
<p>åœ¨åˆ‡ç‰‡åŸºç¡€ä¸Šåˆ›å»ºåˆ‡ç‰‡  //adm</p>
<blockquote>
<ol>
<li>å¯¹äºåº•å±‚æ•°ç»„å®¹é‡ä¸º c çš„slice[i:j]åˆ‡ç‰‡æ¥è¯´:<!-- raw HTML omitted -->
sliceçš„åˆ‡ç‰‡é•¿åº¦æ˜¯j - i<!-- raw HTML omitted -->
sliceçš„åˆ‡ç‰‡å®¹é‡æ˜¯c - i<!-- raw HTML omitted --></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>å¯¹äºåº•å±‚æ•°ç»„å®¹é‡ä¸º k çš„slice[i:j:k]åˆ‡ç‰‡æ¥è¯´:<!-- raw HTML omitted -->
sliceçš„åˆ‡ç‰‡é•¿åº¦æ˜¯j - i<!-- raw HTML omitted -->
sliceçš„åˆ‡ç‰‡å®¹é‡æ˜¯k - i<!-- raw HTML omitted --></li>
</ol>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">slice1</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;pen&#34;</span>, <span style="color:#e6db74">&#34;ink&#34;</span>, <span style="color:#e6db74">&#34;paper&#34;</span>, <span style="color:#e6db74">&#34;eraser&#34;</span>, <span style="color:#e6db74">&#34;bag&#34;</span>}
<span style="color:#a6e22e">slice2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">slice1</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
<span style="color:#a6e22e">slice3</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">slice1</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">4</span>]
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice1</span>, len(<span style="color:#a6e22e">slice1</span>), cap(<span style="color:#a6e22e">slice1</span>))
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice2</span>, len(<span style="color:#a6e22e">slice2</span>), cap(<span style="color:#a6e22e">slice2</span>))
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice3</span>, len(<span style="color:#a6e22e">slice3</span>), cap(<span style="color:#a6e22e">slice3</span>))
</code></pre></div><p><code>[pen ink paper eraser bag] 5 5</code><!-- raw HTML omitted -->
<code>[ink paper] 2 4</code><!-- raw HTML omitted -->
<code>[ink paper] 2 3</code><!-- raw HTML omitted --></p>
<p>é€šè¿‡å…¬å¼å¯ä»¥å¾—å‡ºslice1çš„æ•°ç»„å®¹é‡æ˜¯5ã€‚
slice2çš„åˆ‡ç‰‡é•¿åº¦æ˜¯ 3 - 1 = 2ï¼Œ slice2çš„åˆ‡ç‰‡å®¹é‡æ˜¯ 5 - 1 = 4.<!-- raw HTML omitted -->
slice3çš„åˆ‡ç‰‡é•¿åº¦æ˜¯ 3 - 1 = 2ï¼Œ slice2çš„åˆ‡ç‰‡å®¹é‡æ˜¯ 4 - 1 = 3.<!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/YcLWUUnMm55"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>åŒä¸€æ•°ç»„è¢«å¤šä¸ªåˆ‡ç‰‡å¼•ç”¨æ—¶ï¼Œä¿®æ”¹æŸä¸€åˆ‡ç‰‡å…ƒç´ çš„å†…å®¹ä¹Ÿä¼šæ”¹å˜å…¶ä»–åˆ‡ç‰‡å…ƒç´ çš„å†…å®¹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">slice1</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;pen&#34;</span>, <span style="color:#e6db74">&#34;ink&#34;</span>, <span style="color:#e6db74">&#34;paper&#34;</span>, <span style="color:#e6db74">&#34;eraser&#34;</span>, <span style="color:#e6db74">&#34;bag&#34;</span>}
<span style="color:#a6e22e">slice2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">slice1</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
<span style="color:#a6e22e">slice2</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#e6db74">&#34;elephant&#34;</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice1</span>, len(<span style="color:#a6e22e">slice1</span>), cap(<span style="color:#a6e22e">slice1</span>))
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice2</span>, len(<span style="color:#a6e22e">slice2</span>), cap(<span style="color:#a6e22e">slice2</span>))
</code></pre></div><p><code>[pen ink elephant eraser bag] 5 5</code><!-- raw HTML omitted -->
<code>[ink elephant] 2 4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/w25gBzX7qt5"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h2 id="37-">3.7 äºŒç»´åˆ‡ç‰‡</h2>
<p>äºŒç»´åˆ‡ç‰‡çš„åŸç†æ˜¯åˆ‡ç‰‡æˆå‘˜å˜é‡lenå’Œcapå‡ä¸º2ï¼ŒelementsæŒ‡å‘çš„æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º2ï¼Œç±»å‹ä¸º_sliceçš„æ•°ç»„  //adm</p>
<p>æ„Ÿå—ä¸‹é¢äºŒç»´åˆ‡ç‰‡çš„åœ°å€è¡¨ç¤ºæ–¹æ³•</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> [][]<span style="color:#66d9ef">int</span>{{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>}, {<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>}}

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice variable address: %p\n\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>) <span style="color:#75715e">//0x40a0e0ï¼šsliceå˜é‡çš„é¦–åœ°å€
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[0] header address: %p\n\n&#34;</span>, <span style="color:#a6e22e">slice</span>) <span style="color:#75715e">//0x43e260ï¼šäºŒç»´åˆ‡ç‰‡é‡Œç¬¬0ä¸ªåˆ‡ç‰‡æˆå‘˜slice[0]çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[0] header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>])           <span style="color:#75715e">//0x43e260ï¼šäºŒç»´åˆ‡ç‰‡é‡Œç¬¬0ä¸ªåˆ‡ç‰‡æˆå‘˜slice[0]çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[0] array header address:  %p\n&#34;</span>, <span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>])     <span style="color:#75715e">//0x414020ï¼šslice[0]åˆ‡ç‰‡åº•å±‚æ•°ç»„çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[0] array header address:  %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]) <span style="color:#75715e">//0x414020ï¼šslice[0]åˆ‡ç‰‡åº•å±‚æ•°ç»„çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[0] array&#39;s addresses:     %p %p %p\n\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>], <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>], <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">2</span>])

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[1] header address: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>])           <span style="color:#75715e">//0x43e26cï¼šäºŒç»´åˆ‡ç‰‡é‡Œç¬¬1ä¸ªåˆ‡ç‰‡æˆå‘˜slice[1]çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[1] array header address:  %p\n&#34;</span>, <span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>])     <span style="color:#75715e">//0x414030ï¼šslice[1]åˆ‡ç‰‡åº•å±‚æ•°ç»„çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[1] array header address:  %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]) <span style="color:#75715e">//0x414030ï¼šslice[1]åˆ‡ç‰‡åº•å±‚æ•°ç»„çš„é¦–åœ°å€ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;slice[1] array&#39;s addresses:     %p %p %p\n\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>], <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>], <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>])
</code></pre></div><p><code>slice variable address: 0x40a0e0</code><!-- raw HTML omitted --></p>
<p><code>slice[0] header address: 0x43e260</code><!-- raw HTML omitted --></p>
<p><code>slice[0] header address: 0x43e260</code><!-- raw HTML omitted -->
<code>slice[0] array header address:  0x414020</code><!-- raw HTML omitted -->
<code>slice[0] array header address:  0x414020</code><!-- raw HTML omitted -->
<code>slice[0] array's addresses:     0x414020 0x414024 0x414028</code><!-- raw HTML omitted --></p>
<p><code>slice[1] header address: 0x43e26c</code><!-- raw HTML omitted -->
<code>slice[1] array header address:  0x414030</code><!-- raw HTML omitted -->
<code>slice[1] array header address:  0x414030</code><!-- raw HTML omitted -->
<code>slice[1] array's addresses:     0x414030 0x414034 0x414038</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/q8S9emkRT0_B"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<p>åœ¨å‡½æ•°é—´ä¼ é€’åˆ‡ç‰‡  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> [][]<span style="color:#66d9ef">int</span>{{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>}, {<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">24</span>}}
	<span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">test2</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">a</span> [][]<span style="color:#66d9ef">int</span>) { <span style="color:#75715e">//test1å‚æ•°ä¼ é€’çš„æ˜¯æ•´ä¸ªäºŒç»´åˆ‡ç‰‡
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(&#34;test1 a :&#34;, a, &#34;len(a):&#34;, len(a), &#34;sizeof(a):&#34;, unsafe.Sizeof(a))
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;test2 a:&#34;</span>, <span style="color:#a6e22e">a</span>, <span style="color:#e6db74">&#34;sizeof(a):&#34;</span>, <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Sizeof</span>(<span style="color:#a6e22e">a</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test2</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span>[][]<span style="color:#66d9ef">int</span>) { <span style="color:#75715e">//test2å‚æ•°ä¼ é€’çš„æ˜¯äºŒç»´åˆ‡ç‰‡çš„æŒ‡é’ˆ
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(&#34;test2 a:&#34;, a, &#34;len(a):&#34;, len(a), &#34;sizeof(a):&#34;, unsafe.Sizeof(a))
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;test2 a:&#34;</span>, <span style="color:#a6e22e">a</span>, <span style="color:#e6db74">&#34;sizeof(a):&#34;</span>, <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Sizeof</span>(<span style="color:#a6e22e">a</span>))
}
</code></pre></div><p><code>test2 a: [[10 11 12 13 14] [20 21 22 23 24]] sizeof(a): 12</code><!-- raw HTML omitted -->
<code>test2 a: &amp;[[10 11 12 13 14] [20 21 22 23 24]] sizeof(a): 4</code><!-- raw HTML omitted --></p>
<p>å¯ä»¥çœ‹åˆ°test2çš„å‚æ•°aï¼ˆä¼ é€’çš„æ˜¯äºŒç»´åˆ‡ç‰‡çš„æŒ‡é’ˆï¼‰åªå 4ä¸ªå­—èŠ‚ï¼Œæ¯”test1çš„å‚æ•°aï¼ˆä¼ é€’çš„æ•´ä¸ªäºŒç»´åˆ‡ç‰‡ï¼‰çš„12ä¸ªå­—èŠ‚è¦èŠ‚çœå¾ˆå¤šå†…å­˜ç©ºé—´ã€‚<!-- raw HTML omitted -->
test1çš„å‚æ•°aå 12ä¸ªå­—èŠ‚æ˜¯å› ä¸ºåˆ‡ç‰‡çš„3ä¸ªæˆå‘˜ï¼ˆelementsï¼Œlengthå’Œcapacityï¼‰å„å 4å„å­—èŠ‚ã€‚ å³ä½¿sliceä¸ºäºŒç»´åˆ‡ç‰‡ï¼Œelementså­˜å‚¨çš„æ˜¯æŒ‡å‘
ä¸€ç»´åˆ‡ç‰‡slice[0]çš„é¦–åœ°å€ï¼Œelementsä½œä¸ºæŒ‡é’ˆï¼Œåœ¨32ä½å¹³å°ä¸Šåªå 4ä¸ªå­—èŠ‚ã€‚</p>
<p>è¿™æ®µç›¸ä¼¼åŠŸèƒ½çš„ä»£ç ä¹ŸåŒæ ·åœ¨<!-- raw HTML omitted --><code>åœ¨å‡½æ•°é—´ä¼ é€’æ•°ç»„</code><!-- raw HTML omitted -->çš„ç« èŠ‚å®ç°è¿‡ï¼Œä½¿ç”¨æ•°ç»„çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š<!-- raw HTML omitted -->
<code>test1 a : [[10 11 12 13 14] [20 21 22 23 24]] len(a): 2 sizeof(a): 40</code><!-- raw HTML omitted -->
<code>test2 a: &amp;[[10 11 12 13 14] [20 21 22 23 24]] len(a): 2 sizeof(a): 4</code><!-- raw HTML omitted --></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“åœ¨å‡½æ•°é—´ä¼ é€’çš„æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œå‚æ•°ä¸ºæ•°ç»„å¯¼è‡´çš„å¼€é”€æœ€å¤§ï¼Œå‚æ•°ä¸ºåˆ‡ç‰‡æ—¶å¼€é”€å›ºå®šä¸º12å„å­—èŠ‚ï¼Œå½“ç„¶ä¼ é€’æŒ‡é’ˆå¼€é”€åªå 4ä¸ªå­—èŠ‚ï¼ŒæŒ‡é’ˆæ˜¯æœ€èŠ‚çœç©ºé—´çš„ã€‚<!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/L6D2RS2ve5V"><strong>ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ«  P L A Y A R O U N D ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥ ğŸ« ğŸ° ğŸ¥</strong></a></p>
<h1 id="4-">4. æ˜ å°„</h1>
<p>goè¯­è¨€çš„æ˜ å°„(maps)å®ç°äº†å“ˆå¸Œè¡¨(hash)ï¼Œæ˜ å°„å’ŒæŒ‡é’ˆã€åˆ‡ç‰‡ä¸€æ ·ï¼Œéƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¼•ç”¨ç±»å‹å£°æ˜çš„å˜é‡ä¸èƒ½ç›´æ¥èµ‹å€¼ï¼Œ
éœ€è¦ä½¿ç”¨mapå…ˆåˆ†é…å¹¶åˆå§‹åŒ–ä¸€ä¸ªå“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ï¼Œç„¶åè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ•°æ®ç»“æ„çš„å€¼
goè¯­è¨€ä¸­mapç±»å‹mapæ ·å¼ä¸ºï¼š[KeyType]ValueTypeï¼Œ KeyTypeå¯ä»¥æ˜¯ä»»ä½•<a href="https://golang.org/ref/spec#Comparison_operators">å¯æ¯”è¾ƒçš„ç±»å‹</a>ï¼Œ
ValueTypeå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚</p>
<h2 id="41-">4.1 æ˜ å°„å£°æ˜ä¸åˆå§‹åŒ–</h2>
<p>mapåˆ›å»ºçš„æ–¹å¼ä¸€ï¼š å…ˆå£°æ˜å˜é‡ï¼Œå†ç”¨makeåˆ†é…ç©ºé—´  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span> <span style="color:#75715e">//å£°æ˜ä¸€ä¸ªç±»å‹ä¸ºmap[string]intçš„å˜é‡m
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m header address: %06p, m hash header address %06p.\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)

<span style="color:#a6e22e">m</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>) <span style="color:#75715e">//ä½¿ç”¨makeä¸ºmåˆ†é…ç±»å‹ä¸ºmap[string]intçš„å“ˆå¸Œè¡¨
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m header address: %06p, m hash header address %06p.\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)

<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;aaa&#34;</span>] = <span style="color:#ae81ff">111</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;bbb&#34;</span>] = <span style="color:#ae81ff">222</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;ccc&#34;</span>] = <span style="color:#ae81ff">333</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)
</code></pre></div><p><code>m header address: 0x40c128, m hash header address 0x000000.</code><!-- raw HTML omitted -->
<code>m header address: 0x40c128, m hash header address 0x43e260.</code><!-- raw HTML omitted -->
<code>m:  map[aaa:111 bbb:222 ccc:333]</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/afhMcDGie9O"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<p>mapåˆ›å»ºçš„æ–¹å¼äºŒï¼š ç›´æ¥ç”¨makeåˆ›å»ºå¹¶åˆ†é…ç©ºé—´  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)

<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;aaa&#34;</span>] = <span style="color:#ae81ff">111</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;bbb&#34;</span>] = <span style="color:#ae81ff">222</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;ccc&#34;</span>] = <span style="color:#ae81ff">333</span>

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m header address: %06p, m hash header address %06p.\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)
</code></pre></div><p><code>m header address: 0x40c128, m hash header address 0x43e260.</code><!-- raw HTML omitted -->
<code>m:  map[aaa:111 bbb:222 ccc:333]</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/Yw9MbkgsaCR"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<p>mapåˆ›å»ºçš„æ–¹å¼ä¸‰ï¼š ç”¨ç©ºæ˜ å°„æ¥åˆå§‹åŒ–må˜é‡ï¼Œæ•ˆæœç­‰åŒäºæ–¹å¼äºŒ  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{}

<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;aaa&#34;</span>] = <span style="color:#ae81ff">111</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;bbb&#34;</span>] = <span style="color:#ae81ff">222</span>
<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;ccc&#34;</span>] = <span style="color:#ae81ff">333</span>

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m header address: %06p, m hash header address %06p.\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)
</code></pre></div><p><code>m header address: 0x40c128, m hash header address 0x43e260.</code><!-- raw HTML omitted -->
<code>m:  map[aaa:111 bbb:222 ccc:333]</code></p>
<p><a href="https://play.golang.org/p/aYYAHSajLCn"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<p>mapåˆ›å»ºçš„æ–¹å¼å››ï¼š ç”¨å­—é¢é‡åˆå§‹åŒ–må˜é‡  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;aaa&#34;</span>:<span style="color:#ae81ff">111</span>, <span style="color:#e6db74">&#34;bbb&#34;</span>:<span style="color:#ae81ff">222</span>, <span style="color:#e6db74">&#34;ccc&#34;</span>:<span style="color:#ae81ff">333</span> }

<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m header address: %06p, m hash header address %06p.\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)
</code></pre></div><p><code>m header address: 0x40c128, m hash header address 0x43e260.</code><!-- raw HTML omitted -->
<code>m:  map[aaa:111 bbb:222 ccc:333]</code></p>
<p><a href="https://play.golang.org/p/LFfogtZ5Zsa"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h2 id="42-">4.2 éå†æ˜ å°„</h2>
<p>ç”¨rangeéå†map  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;aaa&#34;</span>: <span style="color:#ae81ff">111</span>, <span style="color:#e6db74">&#34;bbb&#34;</span>: <span style="color:#ae81ff">222</span>, <span style="color:#e6db74">&#34;ccc&#34;</span>: <span style="color:#ae81ff">333</span>}

<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">m</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;key&#34;</span>, <span style="color:#a6e22e">k</span>, <span style="color:#e6db74">&#34;value&#34;</span>, <span style="color:#a6e22e">v</span>)
}
</code></pre></div><p><code>key ccc value 333</code><!-- raw HTML omitted -->
<code>key aaa value 111</code><!-- raw HTML omitted -->
<code>key bbb value 222</code><!-- raw HTML omitted --></p>
<p>æ²¡é”™ï¼Œmapå­˜å‚¨çš„é”®å€¼å¯¹æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥æ¯æ¬¡ä»mapä¸­å–å‡ºçš„é”®å€¼å¯¹é¡ºåºä¸å­˜å…¥çš„é¡ºåºå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p><a href="https://play.golang.org/p/KN82CWihtJN"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h2 id="43-">4.3 æœ‰åºæ‰“å°</h2>
<p>æœ‰åºæ‰“å°mapä¸­çš„é”®å€¼å¯¹  //adm</p>
<p>ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬çœ‹åˆ°mapä¸­é”®å€¼å¯¹çš„è¾“å‡ºæ˜¯æ— åºçš„ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æœ‰åºçš„è¾“å‡ºmapä¸­çš„é”®å€¼å¯¹ï¼Œè¿™é‡Œå¯ä»¥å¯¹mapä¸­çš„Keyè¿›è¡Œæ’åºï¼Œ ç„¶åå†å–Valueçš„å€¼ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">kod</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{}
<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;aaa&#34;</span>: <span style="color:#ae81ff">111</span>, <span style="color:#e6db74">&#34;bbb&#34;</span>: <span style="color:#ae81ff">222</span>, <span style="color:#e6db74">&#34;ccc&#34;</span>: <span style="color:#ae81ff">333</span>}

<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">m</span> {
	<span style="color:#a6e22e">kod</span> = append(<span style="color:#a6e22e">kod</span>, <span style="color:#a6e22e">k</span>)
}

<span style="color:#a6e22e">sort</span>.<span style="color:#a6e22e">Strings</span>(<span style="color:#a6e22e">kod</span>)

<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">kod</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Key&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;Value&#34;</span>, <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">s</span>])
}
</code></pre></div><p><code>Key aaa value 111</code><!-- raw HTML omitted -->
<code>Key bbb value 222</code><!-- raw HTML omitted -->
<code>Key ccc value 333</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/F0HrAVmsNET"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<p>æœ‰æ•ˆçš„åˆ¤æ–­mapä¸­æ˜¯å¦å«æœ‰ä½ è¦æ‰¾çš„Key  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">v</span> <span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">exist</span> <span style="color:#66d9ef">bool</span>

<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;aaa&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;bbb&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;ccc&#34;</span>: <span style="color:#ae81ff">3</span>}

<span style="color:#75715e">//bbbåœ¨mapä¸­ï¼Œvä¸º222ï¼Œexistä¸ºtrue.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span> = <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;bbb&#34;</span>]
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;bbb value&#34;</span>, <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span>)

<span style="color:#75715e">//xyzä¸åœ¨mapä¸­ï¼Œè™½ç„¶vèƒ½æ‰“å°å‡ºå€¼0ï¼ˆå®é™…ä¸Šæ˜¯intå‹å˜é‡çš„é»˜è®¤å€¼ï¼‰ï¼Œä½†existä¸ºfalseï¼Œè¿™ç§ä¸ºä¸å®‰å…¨çš„å–å€¼ã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span> = <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;xyz&#34;</span>]
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;xyz value&#34;</span>, <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span>)

<span style="color:#75715e">//æ‰€ä»¥éœ€è¦å…ˆåˆ¤æ–­existçš„å¸ƒå°”å€¼ï¼Œexistä¸ºtrueè¯´æ˜xyzå­˜åœ¨äºmapä¸­ï¼Œè¿™æ—¶å€™å¯¹åº”çš„Valueæ˜¯æœ‰æ•ˆçš„ï¼Œå¦åˆ™å°±æ˜¯xyzä¸å­˜åœ¨äºmapä¸­ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span> = <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;xyz&#34;</span>]; <span style="color:#a6e22e">exist</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;xyz value&#34;</span>, <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">exist</span>)

} <span style="color:#66d9ef">else</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Key xyz doesn&#39;t exist in map&#34;</span>)
}
</code></pre></div><p><code>bbb value 2 true</code><!-- raw HTML omitted -->
<code>xyz value 0 false</code><!-- raw HTML omitted -->
<code>Key xyz doesn't exist in map</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/HCrPO1n5mlc"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h2 id="44-">4.4 åˆ é™¤é”®å€¼</h2>
<p>åˆ é™¤mapä¸­çš„é”®å€¼å¯¹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;aaa&#34;</span>: <span style="color:#ae81ff">111</span>, <span style="color:#e6db74">&#34;bbb&#34;</span>: <span style="color:#ae81ff">222</span>, <span style="color:#e6db74">&#34;ccc&#34;</span>: <span style="color:#ae81ff">333</span>}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)

delete(<span style="color:#a6e22e">m</span>, <span style="color:#e6db74">&#34;aaa&#34;</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)

delete(<span style="color:#a6e22e">m</span>, <span style="color:#e6db74">&#34;opq&#34;</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;m: &#34;</span>, <span style="color:#a6e22e">m</span>)
</code></pre></div><p><code>m:  map[aaa:111 bbb:222 ccc:333]</code><!-- raw HTML omitted -->
<code>m:  map[bbb:222 ccc:333]</code><!-- raw HTML omitted -->
<code>m:  map[bbb:222 ccc:333]</code></p>
<p>deleteå‡½æ•°ç”¨äºåˆ é™¤mapä¸­çš„é”®å€¼å¯¹ï¼Œå®ƒæ²¡æœ‰è¿”å›å€¼ï¼Œå³ä½¿è¦åˆ é™¤çš„Keyä¸åœ¨mapä¸­ï¼Œdeleteä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚</p>
<p><a href="https://play.golang.org/p/_zbYO7zEAw5"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h1 id="5-">5. å‡½æ•°</h1>
<p>goè¯­è¨€ä¸­å‡½æ•°çš„å£°æ˜æ ¼å¼å¦‚ä¸‹:<!-- raw HTML omitted -->
åŒ…å«ä¸€ä¸ªå‡½æ•°ånameï¼Œä¸€ä¸ªå‚æ•°åˆ—è¡¨parameter-listå’Œä¸€ä¸ªè¿”å›ç»“æœåˆ—è¡¨result-listå’Œä¸€ä¸ªå‡½æ•°ä½“bodyã€‚</p>
<blockquote>
<p>func name(parameter-list) (result-list) {<!-- raw HTML omitted -->
Â Â Â Â body<!-- raw HTML omitted -->
}</p>
</blockquote>
<h2 id="51-">5.1 å‡½æ•°ç­¾å</h2>
<p>å¦‚æœ2ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹ç›¸åŒï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿç›¸åŒï¼Œåˆ™è¿™2ä¸ªå‡½æ•°å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œå‡½æ•°çš„ç±»å‹å°±æ˜¯å‡½æ•°çš„ç­¾åã€‚  //adm</p>
<p>å¦‚ä¸‹å£°æ˜äº†4ä¸ªå‡½æ•°ï¼Œå®ƒä»¬å‡æœ‰2ä¸ªintå‹å‚æ•°å’Œä¸€ä¸ªintå‹è¿”å›å€¼ï¼Œè¿™4ä¸ªå‡½æ•°çš„ç±»å‹ç›¸åŒï¼Œç­¾åä¹Ÿç›¸åŒã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sig1</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sig2</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sig3</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">_</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sig4</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sig1: %T\n&#34;</span>, <span style="color:#a6e22e">sig1</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sig2: %T\n&#34;</span>, <span style="color:#a6e22e">sig2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sig3: %T\n&#34;</span>, <span style="color:#a6e22e">sig3</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sig4: %T\n&#34;</span>, <span style="color:#a6e22e">sig4</span>)
}
</code></pre></div><p><code>sig1: func(int, int) int</code><!-- raw HTML omitted -->
<code>sig2: func(int, int) int</code><!-- raw HTML omitted -->
<code>sig3: func(int, int) int</code><!-- raw HTML omitted -->
<code>sig4: func(int, int) int</code><!-- raw HTML omitted --></p>
<p>å‡½æ•°å£°æ˜çš„å‚æ•°å«parameterï¼ˆå½¢å‚ï¼‰ï¼Œè°ƒç”¨è€…ç»™å‡½æ•°ä¼ é€’çš„å‚æ•°å«argumentï¼ˆå®å‚ï¼‰ã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>å¦‚æœåœ¨goè¯­è¨€ä¸­é‡åˆ°äº†ä¸€ä¸ªæ²¡æœ‰å‡½æ•°ä½“çš„å‡½æ•°å£°æ˜ï¼Œåªæœ‰å‡½æ•°çš„ç­¾åï¼Œè¯´æ˜è¿™ä¸ªå‡½æ•°ä¸æ˜¯ç”±goè¯­è¨€å®ç°çš„ã€‚  //adm</p>
<p>æ¯”å¦‚ï¼š<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">math</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Sin</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">float64</span>) <span style="color:#66d9ef">float64</span> <span style="color:#75715e">// implemented in assembly language.
</span></code></pre></div><h2 id="52-">5.2 é€’å½’è°ƒç”¨</h2>
<p>é€’å½’å‡½æ•°å¯ä»¥è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œä½†è¦è®¾ç½®è¿”å›æ¡ä»¶ï¼Œé¿å…é€’å½’æ— é™è°ƒç”¨ã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">recursion</span>(<span style="color:#a6e22e">slice</span> []<span style="color:#66d9ef">int</span>) []<span style="color:#66d9ef">int</span> {
	<span style="color:#a6e22e">slice</span> = append(<span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">slice</span>)
	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">slice</span>) &lt; <span style="color:#ae81ff">20</span> {
		<span style="color:#a6e22e">recursion</span>(<span style="color:#a6e22e">slice</span>)
	}

	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">slice</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">mainslice</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">recursion</span>(<span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;mainslice:&#34;</span>, <span style="color:#a6e22e">mainslice</span>, <span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">mainslice</span>), <span style="color:#e6db74">&#34;cap:&#34;</span>, cap(<span style="color:#a6e22e">mainslice</span>))
}
</code></pre></div><p><code>[1]</code><!-- raw HTML omitted -->
<code>[1 2]</code><!-- raw HTML omitted -->
<code>[1 2 3]</code><!-- raw HTML omitted -->
<code>[1 2 3 4]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19]</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20]</code><!-- raw HTML omitted -->
<code>mainslice: [1] len: 1 cap: 1</code><!-- raw HTML omitted --></p>
<p>ä»¥ä¸Šä¾‹å­ä¸­mainå‡½æ•°ç»™recursionå‡½æ•°ä¼ é€’äº†ä¸€ä¸ªnil sliceï¼Œä¹‹årecursionå‡½æ•°ç»™slice appendä¸€ä¸ªæ•°å€¼ï¼ˆå½“å‰sliceçš„é•¿åº¦åŠ 1ï¼‰ï¼Œç„¶åæ‰“å°å‡ºsliceçš„ç»“æœï¼Œæœ€ååœ¨slice lengthå°äº20çš„æƒ…å†µä¸‹è¿›è¡Œå›è°ƒã€‚<!-- raw HTML omitted -->
å¯ä»¥çœ‹åˆ°recursionå‡½æ•°æœ€åè¿”å›ç»™mainå‡½æ•°çš„åˆ‡ç‰‡mainsliceçš„å…ƒç´ æ˜¯1ï¼Œé•¿åº¦lenå’Œå®¹é‡capä¹Ÿæ˜¯1ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡å¯¹recursionå‡½æ•°è°ƒç”¨returnå›çš„ç»“æœã€‚<!-- raw HTML omitted -->
recursionå‡½æ•°å¯¹è‡ªå·±å†æ¬¡è°ƒç”¨æ—¶ï¼Œæ¯ä¸ªrecursionå‡½æ•°ä¸­çš„sliceå‚æ•°éƒ½ç›¸å½“äºè°ƒç”¨è€…sliceå‚æ•°çš„å‰¯æœ¬ï¼Œå‰¯æœ¬ç›¸å½“äºè¿™ä¸ªå‡½æ•°ä½“å†…çš„æœ¬åœ°å˜é‡ï¼Œå‡½æ•°ä¸­å¯¹æœ¬åœ°å˜é‡çš„æ›´æ”¹å¹¶ä¸å½±å“è°ƒç”¨è€…é‡Œçš„sliceçš„å¤§å°å’Œå†…å®¹ï¼Œå¦‚æœå°†sliceçš„åœ°å€ä¼ é€’ç»™è¢«è°ƒå‡½æ•°ï¼Œåˆ™è¢«è°ƒå‡½æ•°å¯¹sliceçš„æ›´æ”¹ä¼šå½±å“è°ƒç”¨è€…é‡Œsliceçš„å¤§å°å’Œå†…å®¹ã€‚<!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<h2 id="53-">5.3 å‡½æ•°ç±»å‹</h2>
<p>å‡½æ•°çš„ç­¾åä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢mainå‡½æ•°ä¸­çš„å‡½æ•°å˜é‡fï¼Œfçš„å‡½æ•°ç±»å‹å’Œaddã€subçš„ç­¾åä¸€è‡´ï¼Œæ‰€ä»¥addå’Œsubå‡½æ•°å‡å¯èµ‹ç»™å‡½æ•°å˜é‡fã€‚  //adm
éœ€è¦æ³¨æ„çš„æ˜¯å‡½æ•°å’Œsliceã€mapä¸€æ ·ï¼Œå‡å±äºä¸å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œå®ƒä»¬çš„å˜é‡åªèƒ½ä¸nilæ¯”è¾ƒï¼Œè¿™äº›ä¸å¯æ¯”è¾ƒçš„ç±»å‹å˜é‡ä¸èƒ½ç”¨ä½œmapçš„keyã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sub</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">y</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">f</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#75715e">//fmt.Println(f == f) //invalid operation: f == f (func can only be compared to nil)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">f</span> = <span style="color:#a6e22e">add</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;5 + 3: &#34;</span>, <span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">3</span>))
	<span style="color:#a6e22e">f</span> = <span style="color:#a6e22e">sub</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;5 - 3: &#34;</span>, <span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">3</span>))
}
</code></pre></div><p><code>true</code><!-- raw HTML omitted -->
<code>5 + 3:  8</code><!-- raw HTML omitted -->
<code>5 - 3:  2</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<!-- raw HTML omitted -->
<p>strings.Mapå¯¹å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦è°ƒç”¨add1 å‡½æ•°ï¼Œå¹¶å°†æ¯ä¸ªadd1å‡½æ•°çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿”å›ç»™è°ƒç”¨è€…ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add1</span>(<span style="color:#a6e22e">r</span> <span style="color:#66d9ef">rune</span>) <span style="color:#66d9ef">rune</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">r</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> }
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#a6e22e">add1</span>, <span style="color:#e6db74">&#34;HAL-9000&#34;</span>)) <span style="color:#75715e">// &#34;IBM.:111&#34;
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#a6e22e">add1</span>, <span style="color:#e6db74">&#34;VMS&#34;</span>))      <span style="color:#75715e">// &#34;WNT&#34;
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#a6e22e">add1</span>, <span style="color:#e6db74">&#34;Admix&#34;</span>))    <span style="color:#75715e">// &#34;Benjy&#34;
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>IBM.:111</code><!-- raw HTML omitted -->
<code>WNT</code><!-- raw HTML omitted -->
<code>Benjy</code><!-- raw HTML omitted --></p>
<p>string.Mapçš„ç­¾åå¦‚ä¸‹ï¼š<!-- raw HTML omitted -->
func Map(mapping func(rune) rune, s string) string</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>æ”¹è‡ªgopl 5.5çš„ä¾‹å­  //adm</p>
<p>fmt.Printfä¸­çš„%<em>sçš„</em>è¡¨ç¤ºè¦æ‰“å°çš„ç©ºæ ¼çš„ä¸ªæ•°ï¼Œç©ºæ ¼çš„æ•°é‡ä¸ºi*2ä¸ªï¼Œç„¶åå†æŒ‰%sæ‰“å°&rdquo;-&rdquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%*s\n&#34;</span>, <span style="color:#a6e22e">i</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;-&#34;</span>)
	}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">--</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%*s\n&#34;</span>, <span style="color:#a6e22e">i</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;-&#34;</span>)
	}
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">-</span>
 <span style="color:#f92672">-</span>
   <span style="color:#f92672">-</span>
     <span style="color:#f92672">-</span>
       <span style="color:#f92672">-</span>
         <span style="color:#f92672">-</span>
           <span style="color:#f92672">-</span>
             <span style="color:#f92672">-</span>
               <span style="color:#f92672">-</span>
                 <span style="color:#f92672">-</span>
                   <span style="color:#f92672">-</span>
                 <span style="color:#f92672">-</span>
               <span style="color:#f92672">-</span>
             <span style="color:#f92672">-</span>
           <span style="color:#f92672">-</span>
         <span style="color:#f92672">-</span>
       <span style="color:#f92672">-</span>
     <span style="color:#f92672">-</span>
   <span style="color:#f92672">-</span>
 <span style="color:#f92672">-</span>

</code></pre></div><p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<h2 id="54-">5.4 åŒ¿åå‡½æ•°</h2>
<p>åŒ¿åå‡½æ•°ï¼Œä¹Ÿå«å‡½æ•°å­—é¢é‡ï¼Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å‡½æ•°åçš„å‡½æ•°  //adm</p>
<p>å¯ä»¥å°†<!-- raw HTML omitted --><code>æ¥è‡ªgopl 5.5çš„ä¾‹å­</code><!-- raw HTML omitted -->ä¸­çš„add1æ”¹ä¸ºæˆåŒ¿åå‡½æ•°å¹¶ä¼ ç»™strings.Map<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">rune</span>) <span style="color:#66d9ef">rune</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> }, <span style="color:#e6db74">&#34;HAL-9000&#34;</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">rune</span>) <span style="color:#66d9ef">rune</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> }, <span style="color:#e6db74">&#34;VMS&#34;</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Map</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">rune</span>) <span style="color:#66d9ef">rune</span> { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> }, <span style="color:#e6db74">&#34;Admix&#34;</span>))
}
</code></pre></div><p><code>IBM.:111</code><!-- raw HTML omitted -->
<code>WNT</code><!-- raw HTML omitted -->
<code>Benjy</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>å¦‚æœåŒ¿åå‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…ï¼Œé‚£ä¹ˆåŒ¿åå‡½æ•°æ‹¥æœ‰å¦ä¸€ä¸ªå‡½æ•°çš„å®Œæ•´è¯æ³•ç¯å¢ƒï¼ŒåŒ¿åå‡½æ•°å¯ä»¥è®¿é—®å¦ä¸€ä¸ªå‡½æ•°é‡Œçš„å˜é‡  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>() <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
	<span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
		<span style="color:#a6e22e">i</span> = <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">i</span>
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">add</span> <span style="color:#75715e">// sæ˜¯ä¸€ä¸ªæŒ‡å‘addå‡½æ•°çš„æŒ‡é’ˆ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;add addr:&#34;</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> <span style="color:#75715e">// fæ˜¯ä¸€ä¸ªfunc() intå‡½æ•°ç±»å‹çš„å˜é‡
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">/* square()çš„è¿”å›å€¼æ˜¯å‡½æ•°ä½“å†…çš„åŒ¿åå‡½æ•°ï¼Œå°†åŒ¿åå‡½æ•°
</span><span style="color:#75715e">		func() int {
</span><span style="color:#75715e">			i = i + 1
</span><span style="color:#75715e">			return i
</span><span style="color:#75715e">		}
</span><span style="color:#75715e">	èµ‹ç»™f
</span><span style="color:#75715e">	*/</span>
	<span style="color:#a6e22e">f</span> = <span style="color:#a6e22e">s</span>() <span style="color:#75715e">//å°†add()å‡½æ•°çš„æ‰§è¡Œç»“æœè¿”å›ç»™fï¼Œfç°åœ¨æ˜¯åŒ¿åå‡½æ•°ï¼Œå®ƒèƒ½ç»§ç»­å¼•ç”¨addå‡½æ•°ä½“å†…çš„å˜é‡i
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//å¦‚ä¸‹é¢å¯¹få‡½æ•°çš„è°ƒç”¨f(), æ¯è°ƒç”¨ä¸€æ¬¡iéƒ½åŠ 1ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//å¯¹äºaddå‡½æ•°å†…çš„å˜é‡iæ¥è¯´ï¼Œè¿™ç§åŒ¿åå‡½æ•°å¯¹içš„è°ƒç”¨ä¸€å®šç¨‹åº¦ä¸Šç±»ä¼¼äºCè¯­è¨€å†…çš„static int i = 1ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;  f addr:&#34;</span>, <span style="color:#a6e22e">f</span>, <span style="color:#e6db74">&#34;f():&#34;</span>, <span style="color:#a6e22e">f</span>()) <span style="color:#75715e">//åŒ¿åå‡½æ•°è°ƒç”¨ç»“æœ 2
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;  f addr:&#34;</span>, <span style="color:#a6e22e">f</span>, <span style="color:#e6db74">&#34;f():&#34;</span>, <span style="color:#a6e22e">f</span>()) <span style="color:#75715e">//åŒ¿åå‡½æ•°è°ƒç”¨ç»“æœ 3
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;  f addr:&#34;</span>, <span style="color:#a6e22e">f</span>, <span style="color:#e6db74">&#34;f():&#34;</span>, <span style="color:#a6e22e">f</span>()) <span style="color:#75715e">//åŒ¿åå‡½æ•°è°ƒç”¨ç»“æœ 4
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;  f addr:&#34;</span>, <span style="color:#a6e22e">f</span>, <span style="color:#e6db74">&#34;f():&#34;</span>, <span style="color:#a6e22e">f</span>()) <span style="color:#75715e">//åŒ¿åå‡½æ•°è°ƒç”¨ç»“æœ 5
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>add addr: 0x10914e0</code><!-- raw HTML omitted -->
<code>  f addr: 0x1091990 f(): 2</code><!-- raw HTML omitted -->
<code>  f addr: 0x1091990 f(): 3</code><!-- raw HTML omitted -->
<code>  f addr: 0x1091990 f(): 4</code><!-- raw HTML omitted -->
<code>  f addr: 0x1091990 f(): 5</code><!-- raw HTML omitted --></p>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸ç”±å®ƒçš„ä½œç”¨åŸŸå†³å®š:addè¿”å›åï¼Œå˜é‡iä»ç„¶éšå¼çš„å­˜åœ¨äºfä¸­ã€‚
fä¸­å­˜åœ¨å˜é‡içš„å¼•ç”¨ã€‚è¿™å°±æ˜¯å‡½æ•°å€¼å±äºå¼•ç”¨ç±»å‹å’Œå‡½æ•°å€¼ä¸å¯æ¯”è¾ƒçš„åŸå› ã€‚
Goä½¿ç”¨é—­åŒ…(closures)æŠ€æœ¯å®ç°å‡½æ•°å€¼ï¼ŒGoç¨‹åºå‘˜ä¹ŸæŠŠå‡½æ•°å€¼å«åšé—­åŒ…ã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>åŒ¿åå‡½æ•°ä¸forå¾ªç¯è¿ç”¨çš„ä¾‹å­  //adm</p>
<p>forå¾ªç¯è¡Œ<code>for _, s := range slice</code>çš„sæ˜¯ä¸€ä¸ªå¾ªç¯ä½“å†…å¯è®¿é—®çš„å±€éƒ¨å˜é‡ï¼ŒåŒ¿åå‡½æ•°åœ¨forå¾ªç¯å†…ï¼Œæ‰€ä»¥åŒ¿åå‡½æ•°å¯ä»¥å¼•ç”¨å˜é‡sï¼Œ<!-- raw HTML omitted -->
è€ƒè™‘ä¸‹é¢ä»£ç æ‰“å°éƒ½æ˜¯10çš„åŸå› <!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fs</span> []<span style="color:#66d9ef">func</span>()
	<span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">slice</span> {
		<span style="color:#a6e22e">fs</span> = append(<span style="color:#a6e22e">fs</span>, <span style="color:#66d9ef">func</span>() { <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>) })
	}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">fs</span> {
		<span style="color:#a6e22e">f</span>()
	}
}
</code></pre></div><p><code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted -->
<code>0xc00006c008 10</code><!-- raw HTML omitted --></p>
<p>ç”±äºsçš„åœ°å€å§‹ç»ˆéƒ½æ˜¯0xc00006c008ï¼Œæ‰€ä»¥æœ€ååœ¨è°ƒç”¨fsåˆ‡ç‰‡çš„æ¯ä¸ªå‡½æ•°å…ƒç´ f()æ—¶ï¼Œf()å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªsï¼Œså­˜å‚¨çš„æ˜¯sliceåˆ‡ç‰‡æœ€åçš„ä¸€ä¸ªå€¼10ã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>é€šè¿‡è®©åŒ¿åå‡½æ•°å¼•ç”¨ä¸åŒçš„å˜é‡så³å¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨forå¾ªç¯é‡ŒåŠ ä¸€è¡Œ s := så³å¯åœ¨æ¯æ¬¡forå¾ªç¯æ—¶éƒ½ä¸ºä¸ºåŒ¿åå‡½æ•°æ–°å¢ä¸€ä¸ªså˜é‡çš„å‰¯æœ¬ï¼Œè¿™ä¸ªå‰¯æœ¬åœ¨æ¯æ¬¡forå¾ªç¯æ—¶éƒ½ä¼šå…·æœ‰æ–°çš„åœ°å€ï¼Œå¹¶ä¸å½±å“<code>for _, s := range slice</code>è¿™ä¸€è¡Œså˜é‡çš„åœ°å€ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fs</span> []<span style="color:#66d9ef">func</span>()
	<span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">slice</span> {
		<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>
		<span style="color:#a6e22e">fs</span> = append(<span style="color:#a6e22e">fs</span>, <span style="color:#66d9ef">func</span>() { <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>) })
	}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">fs</span> {
		<span style="color:#a6e22e">f</span>()
	}
}
</code></pre></div><p><code>0xc000016080 1</code><!-- raw HTML omitted -->
<code>0xc000016088 2</code><!-- raw HTML omitted -->
<code>0xc000016090 3</code><!-- raw HTML omitted -->
<code>0xc000016098 4</code><!-- raw HTML omitted -->
<code>0xc0000160a0 5</code><!-- raw HTML omitted -->
<code>0xc0000160a8 6</code><!-- raw HTML omitted -->
<code>0xc0000160b0 7</code><!-- raw HTML omitted -->
<code>0xc0000160b8 8</code><!-- raw HTML omitted -->
<code>0xc0000160c0 9</code><!-- raw HTML omitted -->
<code>0xc0000160c8 10</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<h2 id="55-">5.5 å˜å‚å‡½æ•°</h2>
<p>åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„æœ€åä¸€ä¸ªç±»å‹å‰åŠ ä¸Š&hellip;ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„ä¸ªæ•°é‡çš„è¯¥ç±»å‹çš„å‚æ•°ã€‚  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add1</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">i</span> {
		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">s</span>
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;add1: i type: %T, sum: %d\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">sum</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add2</span>(<span style="color:#a6e22e">i</span> []<span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">i</span> {
		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">s</span>
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;add2: i type: %T, sum: %d\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">sum</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;add1 type:%T\n&#34;</span>, <span style="color:#a6e22e">add1</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;add2 type:%T\n&#34;</span>, <span style="color:#a6e22e">add2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()

	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>}
	<span style="color:#a6e22e">add1</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>) <span style="color:#75715e">//1. mainå‡½æ•°éšå¼çš„æŠŠaddçš„å‚æ•°æ”¾åˆ°ä¸€ä¸ªåˆ‡ç‰‡é‡Œï¼Œç„¶åå†ä¼ ç»™addå‡½æ•°ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">add1</span>(<span style="color:#a6e22e">s</span><span style="color:#f92672">...</span>)                      <span style="color:#75715e">//2. mainå‡½æ•°å‘add1å˜å‚å‡½æ•°çœŸçš„ä¼ é€’ä¸€ä¸ªåˆ‡ç‰‡çš„æ—¶å€™ï¼Œéœ€è¦åœ¨åˆ‡ç‰‡å˜é‡åé¢åŠ å…¥...ï¼Œä»¥å‘ŠçŸ¥add1è¿™å›çœŸæ˜¯ä¸ªåˆ‡ç‰‡ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">add2</span>(<span style="color:#a6e22e">s</span>)                         <span style="color:#75715e">//3. mainå‡½æ•°å‘add2(å‚æ•°ä¸ºåˆ‡ç‰‡)ä¼ å‚çš„æ—¶å€™ï¼Œç›´æ¥å†™så³å¯ã€‚
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>add1 type:func(...int)</code><!-- raw HTML omitted -->
<code>add2 type:func([]int)</code><!-- raw HTML omitted --></p>
<p><code>add1: i type: []int, sum: 45</code><!-- raw HTML omitted -->
<code>add1: i type: []int, sum: 45</code><!-- raw HTML omitted -->
<code>add2: i type: []int, sum: 45</code><!-- raw HTML omitted --></p>
<p>add1å‡½æ•°çš„å‚æ•°ä¸ºå¯å˜å‚æ•°ï¼Œadd2å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå‰2è¡Œæ‰“å°çš„æ˜¯å‡½æ•°çš„ç±»å‹ï¼Œå¯ä»¥çœ‹åˆ°<code>func(...int)</code>å’Œ<code>func([]int)</code>æ˜¯2ä¸ªä¸åŒçš„ç±»å‹ã€‚<!-- raw HTML omitted --><!-- raw HTML omitted -->
æ¥ä¸‹æ¥çš„3è¡Œæ‰“å°å‡ç›¸åŒï¼Œå‡ä¸º<code>add1: i type: []int, sum: 45</code>:<!-- raw HTML omitted -->
ç¬¬1è¡Œå’Œç¬¬2è¡Œçš„æ‰“å°æ˜¯mainå‡½æ•°å‘add1åˆ†åˆ«ä¼ å…¥äº†ä¸€äº›å‚æ•°(1åˆ°9)å’Œä¸€ä¸ªåˆ‡ç‰‡(å†…å®¹ä¸º1åˆ°9)ï¼Œä½†åœ¨add1ä¸­æ‰“å°å‚æ•°içš„ç±»å‹æ—¶ï¼Œ2æ¬¡å‡æ˜¯[]intï¼Œè¿™å¯ä»¥è¯å®æˆ‘ä»¬ä»£ç æ³¨é‡Šé‡Œè¯´çš„&quot;1. mainå‡½æ•°éšå¼çš„æŠŠaddçš„å‚æ•°æ”¾åˆ°ä¸€ä¸ªåˆ‡ç‰‡é‡Œï¼Œç„¶åå†ä¼ ç»™addå‡½æ•°ã€‚&ldquo;<!-- raw HTML omitted -->
ç¬¬3è¡Œå‚æ•°æ˜¯mainå‡½æ•°ç›´æ¥è°ƒç”¨äº†ä¸€ä¸ªå‚æ•°ä¸ºåˆ‡ç‰‡çš„add2ï¼Œå¹¶å‘add2ä¼ é€’äº†ä¸€ä¸ªåˆ‡ç‰‡sï¼Œè¿™è¡Œçš„æ‰“å°å’Œä¸Š2è¡Œä¸€è‡´ï¼Œä½œä¸ºå¯¹æ¯”ç”¨ã€‚<!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>ä¸€ä¸ªç¥å¥‡çš„ç±»å‹: interface{}  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">anytype</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">anytype</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
	<span style="color:#a6e22e">anytype</span>(<span style="color:#e6db74">&#34;abc&#34;</span>, <span style="color:#e6db74">&#34;def&#34;</span>, <span style="color:#e6db74">&#34;ghi&#34;</span>, <span style="color:#e6db74">&#34;jkl&#34;</span>)
	<span style="color:#a6e22e">anytype</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;def&#34;</span>, <span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">3.14</span>)
}
</code></pre></div><p><code>[1 2 3 4]</code><!-- raw HTML omitted -->
<code>[abc def ghi jkl]</code><!-- raw HTML omitted -->
<code>[1 def true 3.14]</code><!-- raw HTML omitted --></p>
<p>interface{}è¡¨ç¤ºèƒ½æ¥æ”¶ä»»æ„ç±»å‹çš„å‚æ•°ï¼Œå¦‚æœç”¨å®ƒåšå¯å˜å‚æ•°çš„ç±»å‹ï¼Œé‚£å²‚ä¸æ˜¯&hellip; ğŸ˜„ ğŸ¤© ğŸ¤ª</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<h2 id="56-">5.6 å»¶è¿Ÿè°ƒç”¨</h2>
<p>å½“ä½ åœ¨ç¼–å†™ä¸€ä¸ªè¯»å†™æ–‡ä»¶çš„ç¨‹åºï¼Œä¸ºäº†ä¿è¯æ–‡ä»¶æ­£ç¡®è¯»å–ï¼Œå¯èƒ½è¦åˆ¤æ–­å¤šæ¬¡æ˜¯å¦å·²è¯»å–åˆ°æƒ³è¦çš„å¤§å°æˆ–æ˜¯å¦å·²åˆ°è¾¾EOFï¼Œ
ç„¶ååœ¨ä¸åŒçš„åˆ¤æ–­ä½ç½®åŠ å…¥closeæ–‡ä»¶çš„æ“ä½œå¹¶è¿”å›ï¼Œgoä¸­æœ‰ä¸ªdeferå…³é”®å­—ï¼Œdefer åé¢è·Ÿä¸€ä¸ªå‡½æ•°åï¼Œç”¨äºåœ¨å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ—¶ï¼Œ
å†æ‰§è¡Œdeferåé¢çš„å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€å†™ä¸€ä¸ªdefer close()å°±å¯ä»¥ä¿è¯æ–‡ä»¶ä¸€å®šä¼šå…³é—­ï¼Œä¸ç”¨åœ¨å¤šä¸ªåœ°æ–¹åŠ å…¥close()çš„æ“ä½œã€‚<!-- raw HTML omitted --></p>
<p>ä¸è®ºåŒ…å«deferè¯­å¥çš„å‡½æ•°æ˜¯returnè¿”å›è¿˜æ˜¯panicå¼‚å¸¸ç»“æŸï¼Œdeferåé¢çš„å‡½æ•°éƒ½ä¼šè¢«æœ€åæ‰§è¡Œ, å½“ç„¶ä½ è¦ä¿è¯åœ¨returnæˆ–è€…panic
ä¹‹å‰ç³»ç»Ÿå·²æ‰§è¡Œå®Œä½ çš„deferè¯­å¥ï¼Œé€šå¸¸åœ¨ç”³è¯·å®Œèµ„æºåå°±åŠ ä¸Šdeferé‡Šæ”¾èµ„æºçš„å‡½æ•°ï¼Œå¦‚æœä½ åœ¨returnåé¢åŠ deferé‡Šæ”¾èµ„æºçš„å‡½æ•°ï¼Œ
é‚£è¿™ä¸ªdeferè¯­å¥åœ¨returnä¹‹åå°±æ‰§è¡Œä¸åˆ°äº†ï¼Œdeferåé¢çš„å‡½æ•°ä¹Ÿè‡ªç„¶æ‰§è¡Œä¸åˆ°ã€‚<!-- raw HTML omitted -->
å¦‚æœä½ åœ¨å‡½æ•°ä¸­åŠ å…¥äº†å¤šæ¡deferè¯­å¥ï¼Œé‚£ä¹ˆè¿™äº›deferçš„å‡½æ•°ä¼šæŒ‰ç›¸åçš„å£°æ˜é¡ºåºæ‰§è¡Œã€‚<!-- raw HTML omitted --></p>
<p>deferé€‚ç”¨äºæ‰“å¼€ã€å…³é—­æ–‡ä»¶ï¼›è¿æ¥ã€æ–­å¼€è¿æ¥ï¼›åŠ é”ã€è§£é”ï¼›<!-- raw HTML omitted --></p>
<p>æ‘˜è‡ªgopl 5.8çš„ä¾‹å­  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">byte</span>, <span style="color:#66d9ef">error</span>) {
    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">filename</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
    }
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>()
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ReadAll</span>(<span style="color:#a6e22e">f</span>)
}
</code></pre></div><p>æ¥è‡ªgopl 5.8çš„ä¾‹å­  //adm</p>
<p>è°ƒè¯•å¤æ‚ç¨‹åºæ—¶ï¼Œdeferæœºåˆ¶ä¹Ÿå¸¸è¢«ç”¨äºè®°å½•ä½•æ—¶è¿›å…¥å’Œé€€å‡ºå‡½æ•°ã€‚ä¸‹ä¾‹ä¸­çš„ bigSlowOperationå‡½æ•°ï¼Œ
ç›´æ¥è°ƒç”¨traceè®°å½•å‡½æ•°çš„è¢«è°ƒæƒ…å†µã€‚bigSlowOperationè¢«è°ƒæ—¶ï¼Œ traceä¼šè¿”å›ä¸€ä¸ªå‡½æ•°å€¼ï¼Œ
è¯¥å‡½æ•°å€¼ä¼šåœ¨bigSlowOperationé€€å‡ºæ—¶è¢«è°ƒç”¨ã€‚
é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ æˆ‘ä»¬å¯ä»¥åªé€šè¿‡ä¸€æ¡è¯­å¥æ§åˆ¶å‡½æ•°çš„å…¥å£å’Œæ‰€æœ‰çš„å‡ºå£ï¼Œç”šè‡³å¯ä»¥è®°å½•å‡½æ•°çš„è¿è¡Œæ—¶é—´ï¼Œ
å¦‚ä¾‹å­ä¸­çš„startã€‚<!-- raw HTML omitted --><!-- raw HTML omitted -->
éœ€è¦æ³¨æ„ä¸€ç‚¹:ä¸è¦å¿˜è®°deferè¯­å¥åçš„åœ†æ‹¬å·:<!-- raw HTML omitted -->
defer trace(&ldquo;bigSlowOperation&rdquo;)è¡¨ç¤ºåœ¨bigSlowOperationå‡½æ•°ç»“æŸæ—¶è°ƒç”¨traceå‡½æ•°ç„¶åè¿”å›traceé‡Œçš„åŒ¿åå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œï¼›<!-- raw HTML omitted -->
defer trace(&ldquo;bigSlowOperation&rdquo;)()è¡¨ç¤ºè¦æ‰§è¡Œtraceå‡½æ•°é‡Œçš„åŒ¿åå‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œtraceå‡½æ•°é‡ŒåŒ¿åå‡½æ•°ä¹‹å‰çš„éƒ¨åˆ†ï¼Œå¾…bigSlowOperationå‡½æ•°ç»“æŸæ—¶å†æ‰§è¡Œtraceå‡½æ•°é‡Œçš„åŒ¿åå‡½æ•°ï¼›<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">bigSlowOperation</span>() {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">trace</span>(<span style="color:#e6db74">&#34;bigSlowOperation&#34;</span>)() <span style="color:#75715e">// don&#39;t forget the extra parentheses
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// ...lots of work...
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>) <span style="color:#75715e">// simulate slow operation by sleeping
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">trace</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">func</span>() {
	<span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;enter %s&#34;</span>, <span style="color:#a6e22e">msg</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;exit %s (%s)&#34;</span>, <span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Since</span>(<span style="color:#a6e22e">start</span>))
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">bigSlowOperation</span>()
}
</code></pre></div><p><code>2019/04/03 14:57:39 enter bigSlowOperation</code><!-- raw HTML omitted -->
<code>2019/04/03 14:57:49 exit bigSlowOperation (10.004776382s)</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>deferç”¨äºreturnçš„è¿”å›å€¼  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">int</span>

	<span style="color:#66d9ef">defer</span> <span style="color:#66d9ef">func</span>() { <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;sum: &#34;</span>, <span style="color:#a6e22e">sum</span>) }()

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">i</span> {
		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">s</span>
	}

	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>)
}
</code></pre></div><p><code>sum:  15</code>
<code>sum:  25</code></p>
<p>add å‡½æ•°ä¸­<code>defer func() { fmt.Println(&quot;sum: &quot;, sum) }()</code>çš„æ„ä¹‰æ˜¯:<!-- raw HTML omitted -->
åœ¨returnè¿”å›ä¹‹åï¼Œdeferå»¶è¿Ÿè°ƒç”¨çš„åŒ¿åå‡½æ•°éœ€è¦è®¿é—®å¤–éƒ¨å‡½æ•°çš„sumå˜é‡ï¼Œ<!-- raw HTML omitted -->
<code>func() { fmt.Println(&quot;sum: &quot;, sum) }</code>æ˜¯åŒ¿åå‡½æ•°çš„å£°æ˜ï¼ŒåŒ¿åå‡½æ•°æœ€ååŠ çš„<code>()</code>æ‹¬å·æ˜¯å¯¹åŒ¿åå‡½æ•°çš„è°ƒç”¨ã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>æ³¨æ„deferç”¨åœ¨forå¾ªç¯ä¸­çš„æƒ…å†µ  //adm</p>
<p>ç”±äºdeferåé¢çš„è¯­å¥åœ¨å‡½æ•°æ‰§è¡Œå®Œåæ‰ä¼šè¢«è°ƒç”¨ï¼Œåƒä¸‹é¢çš„ä»£ç å¦‚æœfilenamesè¿‡å¤šçš„è¯ï¼Œ
åœ¨// &hellip;process f&hellip;ä¹‹åå¹¶æ²¡æœ‰æ‰§è¡Œf.Close()ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªforå¾ªç¯ç»“æŸä¹‹åæ‰è°ƒç”¨deferçš„å‡½æ•°æ‰§è¡Œf.Close()ï¼Œ
è¿™æ ·ä¼šå¯¼è‡´ç³»ç»Ÿä¸æ–­åˆ†é…æ–‡ä»¶æè¿°ç¬¦ï¼Œç›´åˆ°æ–‡ä»¶æè¿°ç¬¦è€—å°½ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">filename</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">filenames</span> {
		<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">filename</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
		}
		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>() <span style="color:#75715e">// NOTE: risky; could run out of file descriptors
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// ...process f...
</span><span style="color:#75715e"></span>	}
}
</code></pre></div><p>ä¸€ä¸ªæ”¹è¿›çš„æ–¹æ³•æ˜¯å°†forå¾ªç¯ä½“é‡Œçš„å†…å®¹æ”¾åˆ°ä¸€ä¸ªå‡½æ•°å½“ä¸­ï¼Œè®©forå¾ªç¯è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ç»“æŸæ—¶è‡ªç„¶å°±ä¼šè°ƒç”¨defer
çš„å»¶è¿Ÿå‡½æ•°f.Close()è¿›è¡Œæ–‡ä»¶å…³é—­ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">processfile</span>(<span style="color:#a6e22e">file</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">filename</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
	}
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>() <span style="color:#75715e">// NOTE: risky; could run out of file descriptors
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// ...process f...
</span><span style="color:#75715e"></span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">filename</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">filenames</span> {
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">processfile</span>(<span style="color:#a6e22e">filename</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
		}
	}
}
</code></pre></div><h2 id="57-">5.7 é”™è¯¯å¤„ç†</h2>
<p>erroræ˜¯æ¥å£ç±»å‹ï¼Œerrorä¸ºnilæ„å‘³ç€å‡½æ•°è¿è¡ŒæˆåŠŸï¼Œnon-nilè¡¨ç¤ºå¤±è´¥ã€‚
å¯¹äºnon-nilçš„errorç±»å‹,æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨errorçš„Errorå‡½æ•°æˆ–è€…è¾“å‡ºå‡½æ•°è·å¾—å­—ç¬¦ä¸²ç±»å‹çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>é”™è¯¯å¤„ç†æ–¹å¼ä¸€: è°ƒç”¨å‡½æ•°æ‰“å°è¢«è°ƒå‡½æ•°è¿”å›çš„errorç±»å‹çš„å˜é‡err  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
<span style="color:#75715e">//or
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v&#34;</span>, <span style="color:#a6e22e">err</span>)
</code></pre></div><p>é”™è¯¯å¤„ç†æ–¹å¼äºŒ: è¢«è°ƒå‡½æ•°è¿”å›errorç±»å‹çš„å­—ç¬¦ä¸²  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;Failed to get data&#34;</span>)
<span style="color:#75715e">//or
</span><span style="color:#75715e"></span><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;Failed to get data, status: %s&#34;</span>, <span style="color:#a6e22e">status</span>)
</code></pre></div><p>é”™è¯¯å¤„ç†æ–¹å¼ä¸‰: å‡½æ•°ç›´æ¥æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œé‡åˆ°ä¸å¯æ¢å¤é”™è¯¯æ—¶ä½¿ç”¨os.Exit(1)é€€å‡ºï¼›æˆ–ä½¿ç”¨log.Fatalfè¾¾åˆ°ç›¸åŒæ•ˆæœ  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stderr</span>, <span style="color:#e6db74">&#34;Site is down: %v\n&#34;</span>, <span style="color:#a6e22e">err</span>)
<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">1</span>)
<span style="color:#75715e">//or
</span><span style="color:#75715e"></span> <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Site is down: %v\n&#34;</span>, <span style="color:#a6e22e">err</span>)
</code></pre></div><p>logåŒ…ä¸­çš„å‡½æ•°åœ¨æ‰“å°æ—¶éƒ½ä¼šè‡ªå¸¦æ—¶é—´å‰ç¼€ä¿¡æ¯ï¼Œä¹Ÿå¯ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ç”¨è‡ªå·±çš„æ ‡å¿—å­—ç¬¦ä¸²æ›¿æ¢æ—¶é—´ä¿¡æ¯ï¼š<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">SetPrefix</span>(<span style="color:#e6db74">&#34;wait: &#34;</span>)
<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">SetFlags</span>(<span style="color:#ae81ff">0</span>)
</code></pre></div><p>é”™è¯¯å¤„ç†æ–¹å¼ä¸‰: è¢«è°ƒå‡½æ•°ç›´æ¥æ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œé‡åˆ°ä¸å¯æ¢å¤é”™è¯¯æ—¶ä½¿ç”¨os.Exit(1)é€€å‡ºï¼›æˆ–ä½¿ç”¨log.Fatalfè¾¾åˆ°ç›¸åŒæ•ˆæœ  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stderr</span>, <span style="color:#e6db74">&#34;Site is down: %v\n&#34;</span>, <span style="color:#a6e22e">err</span>)
<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">1</span>)
<span style="color:#75715e">//or
</span><span style="color:#75715e"></span> <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Site is down: %v\n&#34;</span>, <span style="color:#a6e22e">err</span>)
</code></pre></div><h2 id="58-">5.8 å´©æºƒ</h2>
<p>Goç¨‹åºåœ¨è¿è¡Œå¯èƒ½ä¼šé‡åˆ°æ•°ç»„è®¿é—®è¶Šç•Œã€ç©ºæŒ‡é’ˆå¼•ç”¨ç­‰ï¼Œè¿™äº›è¿è¡Œé”™è¯¯ä¼šå¼•èµ·panicå¼‚å¸¸ã€‚
panicå¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå½“å‰goroutineä¼šä¸­æ–­æ‰§è¡Œï¼Œç„¶åè°ƒç”¨å½“å‰goroutineä¸­çš„deferå‡½æ•°ï¼Œæœ€åå†é‡Šæ”¾å½“å‰goroutineçš„å †æ ˆã€‚</p>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">3</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main is end&#34;</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;f(%d)\n&#34;</span>, <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span><span style="color:#a6e22e">x</span>) <span style="color:#75715e">// panics if x == 0
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
}
</code></pre></div><p><code>f(3)</code><!-- raw HTML omitted -->
<code>f(2)</code><!-- raw HTML omitted -->
<code>f(1)</code><!-- raw HTML omitted -->
<code>panic: runtime error: integer divide by zero</code><!-- raw HTML omitted --></p>
<p><code>goroutine 1 [running]:</code><!-- raw HTML omitted -->
<code>main.f(0x0)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67.go:15 +0xcd</code><!-- raw HTML omitted -->
<code>main.f(0x1)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67.go:16 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x2)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67.go:16 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x3)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67.go:16 +0xbe</code><!-- raw HTML omitted -->
<code>main.main()</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67.go:9 +0x2a</code><!-- raw HTML omitted -->
<code>exit status 2</code><!-- raw HTML omitted --></p>
<p>ä¸Šè¿°mainå‡½æ•°è°ƒç”¨äº†å‡½æ•°f(3)ï¼Œç„¶åf(3)æ¯æ¬¡å°†å‚æ•°3å‡1ï¼Œä¼ ç»™è‡ªå·±è¿›è¡Œå›è°ƒï¼Œå½“å‚æ•°xä¸º0æ—¶ï¼Œ0/xå°†ä¼šå¼•èµ·panicå¼‚å¸¸ï¼Œç³»ç»Ÿè¾“å‡ºå †æ ˆçš„å›æº¯ä¿¡æ¯ã€‚
&ldquo;main is end&quot;æ²¡æœ‰æ‰“å°å‡ºæ¥,å› ä¸ºåœ¨f(0)æ—¶å·²ç»å‘ç”Ÿpanicï¼Œpanicå¼‚å¸¸ä¸­æ–­äº†å½“å‰goroutineçš„ç»§ç»­è¿è¡Œã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>é™¤æ•°ä¸º0å¼•èµ·çš„panicï¼Œå¹¶åœ¨æ­¤ä¹‹å‰è°ƒç”¨deferå‡½æ•°  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">printStack</span>()
	<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">3</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printStack</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">buf</span> [<span style="color:#ae81ff">4096</span>]<span style="color:#66d9ef">byte</span>
	<span style="color:#a6e22e">n</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">Stack</span>(<span style="color:#a6e22e">buf</span>[:], <span style="color:#66d9ef">false</span>)
	<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">buf</span>[:<span style="color:#a6e22e">n</span>])
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;f(%d)\n&#34;</span>, <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span><span style="color:#a6e22e">x</span>) <span style="color:#75715e">// panics if x == 0
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
}
</code></pre></div><p><code>f(3)</code><!-- raw HTML omitted -->
<code>f(2)</code><!-- raw HTML omitted -->
<code>f(1)</code><!-- raw HTML omitted -->
<code>goroutine 1 [running]:</code><!-- raw HTML omitted -->
<code>main.printStack()</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:16 +0x5b</code><!-- raw HTML omitted -->
<code>panic(0x10ab4a0, 0x115f530)</code><!-- raw HTML omitted -->
<code>	/usr/local/go/src/runtime/panic.go:513 +0x1b9</code><!-- raw HTML omitted -->
<code>main.f(0x0)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:21 +0xcd</code><!-- raw HTML omitted -->
<code>main.f(0x1)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x2)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x3)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.main()</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:11 +0x46</code><!-- raw HTML omitted -->
<code>panic: runtime error: integer divide by zero</code><!-- raw HTML omitted --></p>
<p><code>goroutine 1 [running]:</code><!-- raw HTML omitted -->
<code>main.f(0x0)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:21 +0xcd</code><!-- raw HTML omitted -->
<code>main.f(0x1)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x2)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.f(0x3)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:22 +0xbe</code><!-- raw HTML omitted -->
<code>main.main()</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-1.go:11 +0x46</code><!-- raw HTML omitted -->
<code>exit status 2</code><!-- raw HTML omitted --></p>
<p>printStackå‡½æ•°ç”¨äºæ‰“å°è¿è¡Œæ—¶goroutineçš„å †æ ˆä¿¡æ¯ï¼Œä»æ‰“å°é¡ºåºå¯ä»¥çœ‹å‡ºï¼Œ
deferå‡½æ•°<code>main.printStack()</code><!-- raw HTML omitted -->åœ¨<code>panic: runtime error: integer divide by zero</code>å‰å…ˆè¾“å‡ºã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<p>ç›´æ¥è°ƒç”¨panicå‡½æ•°ä¹Ÿä¼šå¼•å‘å¼‚å¸¸ï¼Œä½†é¡»æ…ç”¨  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">3</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> {
		panic(<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;stop recursion when x is %d&#34;</span>, <span style="color:#a6e22e">x</span>))
	}

	<span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
}
</code></pre></div><p><code>panic: stop recursion when x is 1</code><!-- raw HTML omitted --></p>
<p><code>goroutine 1 [running]:</code><!-- raw HTML omitted -->
<code>main.f(0x1)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-2.go:13 +0xee</code><!-- raw HTML omitted -->
<code>main.f(0x2)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-2.go:16 +0x38</code><!-- raw HTML omitted -->
<code>main.f(0x3)</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-2.go:16 +0x38</code><!-- raw HTML omitted -->
<code>main.main()</code><!-- raw HTML omitted -->
<code>	/Users/zhuwenjun/work/golang/post_routine/67-2.go:8 +0x2a</code><!-- raw HTML omitted -->
<code>exit status 2</code><!-- raw HTML omitted --></p>
<p>æœ‰äº›panicå¼‚å¸¸ä¹Ÿå¯ä»¥ä½¿ç”¨erroræœºåˆ¶ä»£æ›¿ã€‚</p>
<p><a href="-"><strong>ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ P L A Y A R O U N D ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥— ğŸŒ½ ğŸ¥¬  ğŸ¥—</strong></a></p>
<h2 id="59-">5.9 æ¢å¤</h2>
<p>Goè¯­è¨€ä¸­panicå’Œrecoverçš„å‡½æ•°åŸå‹å¦‚ä¸‹ã€‚recoverå‡½æ•°ç”¨äºä»panicå¼‚å¸¸ä¸­è¿”å›ï¼Œrecoverå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯panicå‡½æ•°çš„å‚æ•°ã€‚</p>
<blockquote>
<p>func panic(v interface{})<!-- raw HTML omitted -->
func recover() interface{}</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">3</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main is end&#34;</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">defer</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> recover(); <span style="color:#a6e22e">p</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;internal error(x = %d). %v\n&#34;</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">p</span>)
		}
	}()

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;f(%d)\n&#34;</span>, <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#ae81ff">0</span><span style="color:#f92672">/</span><span style="color:#a6e22e">x</span>) <span style="color:#75715e">// panics if x == 0
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
}
</code></pre></div><p><code>f(3)</code><!-- raw HTML omitted -->
<code>f(2)</code><!-- raw HTML omitted -->
<code>f(1)</code><!-- raw HTML omitted -->
<code>internal error(x = 0). runtime error: integer divide by zero</code><!-- raw HTML omitted -->
<code>main is end</code><!-- raw HTML omitted --></p>
<p>recoverå‡½æ•°ç”¨äºä»panicå¼‚å¸¸ä¸­æ¢å¤ï¼Œå½“f(0)å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç³»ç»Ÿå…ˆæ˜¯è°ƒç”¨f(0)çš„deferå‡½æ•°ä½¿ç”¨recoverå‡½æ•°æŸ¥æ‰¾é”™è¯¯åŸå› ï¼Œç„¶åä»panicä¸­æ¢å¤ï¼Œå¯ä»¥çœ‹åˆ°f(0)å¼‚å¸¸å‘ç”Ÿæ—¶å¹¶æœªä¸­æ–­å½“å‰goroutineçš„ç»§ç»­è¿è¡Œï¼Œ
<code>main is end</code>ä»èƒ½ç»§ç»­æ‰“å°ã€‚å¯ä»¥ä¸5.8èŠ‚ä¸­çš„<!-- raw HTML omitted --><code>é™¤æ•°ä¸º0å¼•èµ·çš„panic</code><!-- raw HTML omitted -->è¿›è¡Œå¯¹æ¯”ã€‚</p>
<h1 id="6-">6. æ–¹æ³•</h1>
<p>Tæ˜¯å®šä¹‰çš„ç±»å‹(ä¹Ÿå«å‘½åç±»å‹)ï¼Œåœ¨å‡½æ•°å£°æ˜çš„å‡½æ•°åå‰é¢åŠ ä¸€ä¸ªç±»å‹Tï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±å«åšè¿™ä¸ªç±»å‹çš„æ–¹æ³•ï¼Œè¿™ä¸ªç±»å‹çš„å˜é‡éƒ½èƒ½è°ƒç”¨ï¼ˆæ¥æ”¶ï¼‰è¿™ä¸ªæ–¹æ³•ï¼ŒTä¸èƒ½ä¸ºæŒ‡é’ˆæˆ–è€…interfaceç±»å‹:<!-- raw HTML omitted --></p>
<blockquote>
<p>func (t T) name(parameter-list) (result-list) {<!-- raw HTML omitted -->
Â Â Â Â body<!-- raw HTML omitted -->
}</p>
</blockquote>
<h2 id="61-">6.1 æ–¹æ³•å£°æ˜</h2>
<p>æ–¹æ³•å£°æ˜çš„ä¸¾ä¾‹å¦‚ä¸‹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">geometry</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;math&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Point</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">Y</span> <span style="color:#66d9ef">float64</span> }

<span style="color:#75715e">// traditional function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">q</span> <span style="color:#a6e22e">Point</span>) <span style="color:#66d9ef">float64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Hypot</span>(<span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span>)
}

<span style="color:#75715e">// same thing, but as a method of the Point type
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Point</span>) <span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">q</span> <span style="color:#a6e22e">Point</span>) <span style="color:#66d9ef">float64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Hypot</span>(<span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span>)
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;geometry&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">p1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">geometry</span>.<span style="color:#a6e22e">Point</span>{<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">p2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">geometry</span>.<span style="color:#a6e22e">Point</span>{<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">100</span>}

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">p2</span>))           <span style="color:#75715e">//æ–¹æ³•è°ƒç”¨
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">geometry</span>.<span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">p1</span>, <span style="color:#a6e22e">p2</span>)) <span style="color:#75715e">//å‡½æ•°è°ƒç”¨
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>95</code><!-- raw HTML omitted -->
<code>95</code><!-- raw HTML omitted --></p>
<p><code>fmt.Println(p1.Distance(p2))</code>æ˜¯æ–¹æ³•è°ƒç”¨ï¼Œ<code>fmt.Println(geometry.Distance(p1, p2))</code> æ˜¯å‡½æ•°è°ƒç”¨ã€‚</p>
<p><a href="-"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<p>ä¸€æ¬¡æ±‚å¤šä¸ªç‚¹ä¹‹é—´çš„çº¿æ®µä¹‹å’Œ  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">geometry</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;math&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Point</span> <span style="color:#66d9ef">struct</span>{ <span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">Y</span> <span style="color:#66d9ef">float64</span> }

<span style="color:#75715e">// traditional function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">p</span>, <span style="color:#a6e22e">q</span> <span style="color:#a6e22e">Point</span>) <span style="color:#66d9ef">float64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Hypot</span>(<span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span>)
}

<span style="color:#75715e">// same thing, but as a method of the Point type
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">Point</span>) <span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">q</span> <span style="color:#a6e22e">Point</span>) <span style="color:#66d9ef">float64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Hypot</span>(<span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">X</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">X</span>, <span style="color:#a6e22e">q</span>.<span style="color:#a6e22e">Y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Y</span>)
}

<span style="color:#75715e">// A Path is a journey connecting the points with straight lines.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Path</span> []<span style="color:#a6e22e">Point</span>

<span style="color:#75715e">// Distance returns the distance traveled along the path.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">path</span> <span style="color:#a6e22e">Path</span>) <span style="color:#a6e22e">Distance</span>() <span style="color:#66d9ef">float64</span> {
	<span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0.0</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">path</span> {
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> &gt; <span style="color:#ae81ff">0</span> {
			<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">path</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">Distance</span>(<span style="color:#a6e22e">path</span>[<span style="color:#a6e22e">i</span>])
		}
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;geometry&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">geometry</span>.<span style="color:#a6e22e">Path</span>{{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>}, {<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">20</span>}, {<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">30</span>}, {<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">40</span>}}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">Distance</span>())
}
</code></pre></div><p><code>30.14962686336267</code><!-- raw HTML omitted --></p>
<p>è™½ç„¶Pathç±»å‹çš„Distanceæ–¹æ³•ä¼šè°ƒç”¨Pointç±»å‹çš„Distanceæ–¹æ³•ï¼Œä½†ä¸ªDistanceå‡½æ•°ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³è”ã€‚<!-- raw HTML omitted -->
æ¯ä¸ªç±»å‹çš„æ–¹æ³•ä¹‹é—´éœ€è¦æœ‰ä¸åŒçš„åå­—ï¼Œä½†ä¸åŒçš„ç±»å‹ä¹‹é—´çš„æ–¹æ³•åå¯ä»¥ç›¸åŒï¼Œå°±åƒPathå’ŒPointç±»å‹çš„Distanceå‡½æ•°åä¸€æ ·ï¼Œä¸åŒç±»å‹çš„æ–¹æ³•å¯ä»¥åŒåã€‚<!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<h2 id="62-">6.2 æ–¹æ³•æ¥æ”¶è€…ä¸ºæŒ‡é’ˆ</h2>
<p>æ–¹æ³•çš„æ¥æ”¶è€…åªæœ‰2ç§ç±»å‹ï¼ŒTå’Œ<em>Tï¼ŒTæˆ–</em>Tç±»å‹çš„å˜é‡å‡å¯è°ƒç”¨æ¥æ”¶è€…ä¸ºTå’Œ*Tçš„æ–¹æ³•  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">rbt</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">distance</span>, <span style="color:#a6e22e">step</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#a6e22e">rbt</span>) <span style="color:#a6e22e">m</span>(<span style="color:#a6e22e">num</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">distance</span> = <span style="color:#a6e22e">num</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">rbt</span>) <span style="color:#a6e22e">move</span>(<span style="color:#a6e22e">num</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">distance</span> = <span style="color:#a6e22e">num</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">r1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rbt</span>{<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>} <span style="color:#75715e">// r1æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼ˆè¿™é‡Œrbtç±»å‹çš„æ™®é€šå˜é‡ç”¨äºåŒºåˆ†*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œå¦‚åé¢çš„æŒ‡é’ˆå˜é‡r2è¿™é‡Œå«åšæŒ‡é’ˆå˜é‡ï¼‰
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;\nr1.m type: %T r1.move type: %T\n&#34;</span>, <span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">move</span>) <span style="color:#75715e">//r1.m type: func(int) r1.move type: func(int)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;r1 type: %T    &amp;r1 type: %T\n&#34;</span>, <span style="color:#a6e22e">r1</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">r1</span>)            <span style="color:#75715e">//r1 type: main.rbt    &amp;r1 type: *main.rbt
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">m</span>(<span style="color:#ae81ff">7</span>)                  <span style="color:#75715e">//r1æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œæ–¹æ³•mçš„æ¥æ”¶è€…æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œåˆ™r1å¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•m
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//0 æ™®é€šå˜é‡r1åœ¨è°ƒç”¨æ–¹æ³•mæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªr1çš„å‰¯æœ¬ï¼Œè¿™å’ŒCè¯­è¨€å‡½æ•°çš„å½¢å‚æ˜¯æ™®é€šå˜é‡ï¼Œå‡½æ•°è°ƒç”¨è€…ç»™å‡½æ•°ä¼ å®å‚åï¼Œ
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// å‡½æ•°å¾—åˆ°çš„æ˜¯å®å‚çš„å‰¯æœ¬ï¼Œå‡½æ•°å¯¹å®å‚å‰¯æœ¬çš„æ›´æ”¹å¹¶ä¸æ”¹å˜å‡½æ•°è°ƒç”¨è€…çš„å®å‚å€¼ï¼Œå› æ­¤è¿™é‡Œæ™®é€šå˜é‡r1çš„må‡½æ•°æ“ä½œçš„æ˜¯r1çš„å‰¯æœ¬ï¼Œ
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// å¹¶ä¸å½±å“çœŸæ­£çš„å®å‚r1çš„æˆå‘˜distanceçš„å€¼ï¼Œæ‰€ä»¥æ‰“å°r1.distanceæ—¶å€¼ä¸º0
</span><span style="color:#75715e"></span>
	(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">r1</span>).<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">7</span>)            <span style="color:#75715e">//r1æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œæ–¹æ³•moveçš„æ¥æ”¶è€…æ˜¯*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œå–åœ°å€ç¬¦å·&amp;å¯ä»¥å°†r1å˜æˆ*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼š&amp;r1ï¼Œå› æ­¤(&amp;r1)å¯ä»¥è°ƒç”¨æ¥æ”¶è€…æ˜¯*rbtç±»å‹çš„æ–¹æ³•move
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//35 æ–¹æ³•çš„æ¥æ”¶è€…æ˜¯æŒ‡é’ˆå˜é‡ï¼ŒåŒCè¯­è¨€å°†å®å‚ä¼ é€’ç»™æŒ‡é’ˆç±»å‹çš„å½¢å‚ä¸€æ ·ï¼Œè°ƒç”¨è€…å’Œè¢«è°ƒå‡½æ•°å…±äº«åŒä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œæ‰€ä»¥è¢«è°ƒå‡½æ•°æ”¹å˜å½¢å‚åï¼Œå®å‚ä¹Ÿè·Ÿç€æ”¹å˜ï¼Œr1.distanceä¸º35
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">7</span>)               <span style="color:#75715e">//r1æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œæ–¹æ³•moveçš„æ¥æ”¶è€…æ˜¯*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œr1ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•moveï¼Œç¼–è¯‘å™¨éšå¼çš„ä½¿ç”¨&amp;r1æ¥è°ƒç”¨move
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r1</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//35 æ–¹æ³•æ¥æ”¶è€…æ˜¯æŒ‡é’ˆå˜é‡ï¼Œæ–¹æ³•é‡Œå¯¹å˜é‡çš„æ›´æ”¹ä¼šå½±å“æŒ‡é’ˆå˜é‡çš„å€¼ï¼Œæ–¹æ³•é‡Œå°†r1.distanceæ”¹æˆäº†35ï¼Œå†æ‰“å°r1.distanceæ—¶ä¹Ÿæ˜¯35
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">r2</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">rbt</span>{<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>} <span style="color:#75715e">// r2æ˜¯*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼ˆè¿™é‡Œ*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ç”¨äºåŒºåˆ†rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œå¦‚ä¸Šé¢çš„æ™®é€šå˜é‡r1ï¼‰
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;\nr2.m type: %T  r2.move type: %T\n&#34;</span>, <span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">move</span>) <span style="color:#75715e">//r2.m type: func(int)  r2.move type: func(int)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;r2 type: %T    *r2 type: %T\n&#34;</span>, <span style="color:#a6e22e">r2</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">r2</span>)             <span style="color:#75715e">//r2 type: *main.rbt    *r2 type: main.rbt
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">m</span>(<span style="color:#ae81ff">7</span>)                  <span style="color:#75715e">//r2æ˜¯rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œæ–¹æ³•mçš„æ¥æ”¶è€…æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œr2ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•mï¼Œç¼–è¯‘å™¨éšå¼çš„ä½¿ç”¨*r2æ¥è°ƒç”¨m
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//0 æ–¹æ³•æ¥æ”¶è€…æ˜¯æ™®é€šå˜é‡ï¼Œæ–¹æ³•é‡Œæ›´æ”¹çš„æ˜¯å®å‚çš„å‰¯æœ¬ï¼Œå‡½æ•°å¯¹å‰¯æœ¬çš„æ›´æ”¹å¹¶ä¸å½±å“å®å‚çš„å€¼ï¼Œr2.distanceå€¼ä»ä¸º0
</span><span style="color:#75715e"></span>
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">r2</span>).<span style="color:#a6e22e">m</span>(<span style="color:#ae81ff">7</span>)               <span style="color:#75715e">//r2æ˜¯rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œæ–¹æ³•mçš„æ¥æ”¶è€…æ˜¯rbtç±»å‹çš„æ™®é€šå˜é‡ï¼Œå–æ•°æ®ç¬¦å·*å¯ä»¥å°†r2å˜æˆrbtç±»å‹çš„æ™®é€šå˜é‡:*r2ï¼Œå› æ­¤ç”¨(*r2)å¯ä»¥è°ƒç”¨æ¥æ”¶è€…æ˜¯rbtç±»å‹çš„æ–¹æ³•m
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//0 æ–¹æ³•æ¥æ”¶è€…æ˜¯æ™®é€šå˜é‡ï¼Œæ–¹æ³•é‡Œæ›´æ”¹çš„æ˜¯å®å‚çš„å‰¯æœ¬ï¼Œå‡½æ•°å¯¹å‰¯æœ¬çš„æ›´æ”¹å¹¶ä¸å½±å“å®å‚çš„å€¼ï¼Œr2.distanceå€¼ä»ä¸º0
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">7</span>)               <span style="color:#75715e">//r2æ˜¯rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œæ–¹æ³•moveçš„æ¥æ”¶è€…æ˜¯*rbtç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼Œåˆ™r2å¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•move
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">r2</span>.<span style="color:#a6e22e">distance</span>) <span style="color:#75715e">//35 æ–¹æ³•æ¥æ”¶è€…æ˜¯æŒ‡é’ˆå˜é‡ï¼Œæ–¹æ³•é‡Œå¯¹å˜é‡çš„æ›´æ”¹ä¼šå½±å“æŒ‡é’ˆå˜é‡çš„å€¼ï¼Œæ–¹æ³•é‡Œå°†r1.distanceæ”¹æˆäº†35ï¼Œå†æ‰“å°r1.distanceæ—¶ä¹Ÿæ˜¯35
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>r1.m type: func(int) r1.move type: func(int)</code><!-- raw HTML omitted -->
<code>r1 type: main.rbt    &amp;r1 type: *main.rbt</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>35</code><!-- raw HTML omitted -->
<code>35</code><!-- raw HTML omitted --></p>
<p><code>r2.m type: func(int)  r2.move type: func(int)</code><!-- raw HTML omitted -->
<code>r2 type: *main.rbt    *r2 type: main.rbt</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>35</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<p>å‡½æ•°æˆ–æ¥å£çš„å‚æ•°ä¸ºsliceæˆ–mapçš„æ™®é€šå˜é‡ï¼ˆéæŒ‡é’ˆå˜é‡ï¼‰æ—¶ï¼Œå‡½æ•°æˆ–æ¥å£ä»èƒ½æ­£å¸¸ä¿®æ”¹sliceæˆ–mapä¸­çš„å€¼  //adm</p>
<p>å½“æˆ‘ä»¬å‘è¢«è°ƒå‡½æ•°ä¼ é€’ä¸€ä¸ªsliceæˆ–mapç±»å‹çš„æŒ‡é’ˆå˜é‡æˆ–æ¥æ”¶è€…ä¹Ÿä¸ºæŒ‡é’ˆæ—¶æ—¶ï¼Œåœ¨è¢«è°ƒå‡½æ•°ä¸­å¯¹sliceæˆ–mapå€¼çš„ä¿®æ”¹èƒ½ç›´æ¥æ”¹å˜è°ƒç”¨å‡½æ•°ä¸­çš„sliceæˆ–mapå€¼ï¼Œå› ä¸ºè¢«è°ƒå‡½æ•°å’Œè°ƒç”¨å‡½æ•°å…±äº«åŒä¸€ä¸ªsliceæˆ–mapç±»å‹æŒ‡é’ˆå˜é‡çš„é¦–åœ°å€;<!-- raw HTML omitted -->
å½“æˆ‘ä»¬å‘è¢«è°ƒå‡½æ•°ä¼ é€’ä¸€ä¸ªsliceæˆ–mapç±»å‹çš„æ™®é€šå˜é‡æˆ–æ¥æ”¶è€…ä¹Ÿä¸ºæ™®é€šå˜é‡æ—¶ï¼Œåœ¨è¢«è°ƒå‡½æ•°ä¸­å¯¹sliceæˆ–mapå€¼çš„ä¿®æ”¹ä¹Ÿèƒ½æ”¹å˜è°ƒç”¨å‡½æ•°ä¸­çš„sliceæˆ–mapå€¼ï¼Œè™½ç„¶è¢«è°ƒå‡½æ•°å¾—åˆ°çš„æ˜¯è°ƒç”¨å‡½æ•°ä¸­sliceæˆ–mapå˜é‡çš„å‰¯æœ¬ï¼Œ<!-- raw HTML omitted -->
ä½†è¿™ä¸ªå‰¯æœ¬å˜é‡é‡Œå¯¹sliceçš„æ•°ç»„æˆ–mapçš„å“ˆå¸Œé¦–åœ°å€æ˜¯å¼•ç”¨çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´å‰¯æœ¬çš„åœ°å€å’Œè°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡åœ°å€ä¸åŒï¼Œä½†æ˜¯å‰¯æœ¬å¼•ç”¨çš„æ•°ç»„æˆ–å“ˆå¸Œåœ°å€æ˜¯å’Œè°ƒç”¨å‡½æ•°ä¸­çš„ç›¸åŒçš„ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">S</span> []<span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">M</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">func_slice</span>(<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">S</span>) {
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">555</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_slice&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;s: %p s: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">s</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™sèµ‹nilå€¼ä¹‹åï¼Œsåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†func_sliceè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºsçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨sæ‰€ä»¥è¿™é‡Œs=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;s: %p s: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">func_slice_ptr</span>(<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">S</span>) {
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">s</span>)[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">666</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_slice_ptr&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %p *s: %p %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">s</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™sèµ‹nilå€¼ä¹‹åï¼Œsåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†func_slice_ptrè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºsçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨sæ‰€ä»¥è¿™é‡Œs=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %p %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
}

<span style="color:#75715e">//[]intæ˜¯â€œéå®šä¹‰çš„ç±»å‹â€ï¼Œå¦‚æœmethod_sliceçš„æ–¹æ³•æ¥æ”¶è€…ç”±(s S)æ”¹ä¸º(s []int)åä¼šå¯¼è‡´
</span><span style="color:#75715e"></span><span style="color:#75715e">//&#34;invalid receiver type []int ([]int is not a defined type)&#34;çš„é”™è¯¯.
</span><span style="color:#75715e"></span><span style="color:#75715e">//type S []intç”¨typeå®šä¹‰çš„Sæ˜¯[]intçš„å®šä¹‰ç±»å‹ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#a6e22e">S</span>) <span style="color:#a6e22e">method_slice</span>() {
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">888</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nmethod_slice&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;s: %p s: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">s</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™sèµ‹nilå€¼ä¹‹åï¼Œsåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†method_sliceè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºsçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨sæ‰€ä»¥è¿™é‡Œs=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;s: %p s: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">S</span>) <span style="color:#a6e22e">method_slice_ptr</span>() {
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">s</span>)[<span style="color:#ae81ff">3</span>] = <span style="color:#ae81ff">999</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nmethod_slice_ptr&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %p *s: %p %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">s</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™sèµ‹nilå€¼ä¹‹åï¼Œsåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†method_slice_ptrè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºsçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨sæ‰€ä»¥è¿™é‡Œs=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %p %#v\n&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)
}

<span style="color:#75715e">//##############################################################################################################################
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">func_map</span>(<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">M</span>) {
	<span style="color:#a6e22e">m</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#e6db74">&#34;ooo&#34;</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_map&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;m: %p m: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™mèµ‹nilå€¼ä¹‹åï¼Œmåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†func_mapè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºmçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨mæ‰€ä»¥è¿™é‡Œm=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;m: %p m: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">func_map_ptr</span>(<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">M</span>) {
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">m</span>)[<span style="color:#ae81ff">3</span>] = <span style="color:#e6db74">&#34;ppp&#34;</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_map_ptr&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %p *m: %p %#v\n&#34;</span>, <span style="color:#a6e22e">m</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™mèµ‹nilå€¼ä¹‹åï¼Œmåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†func_map_ptrè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºmçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨mæ‰€ä»¥è¿™é‡Œm=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %p %#v\n&#34;</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
}

<span style="color:#75715e">//map[int]stringæ˜¯â€œéå®šä¹‰çš„ç±»å‹â€ï¼Œå¦‚æœmethod_mapçš„æ–¹æ³•æ¥æ”¶è€…ç”±(m M)æ”¹ä¸º(m map[int]string)åä¼šå¯¼è‡´
</span><span style="color:#75715e"></span><span style="color:#75715e">//&#34;invalid receiver type map[int]string (map[int]string is not a defined type)&#34;çš„é”™è¯¯.
</span><span style="color:#75715e"></span><span style="color:#75715e">//type M map[int]stringç”¨typeå®šä¹‰çš„Sæ˜¯[]intçš„å®šä¹‰ç±»å‹ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">M</span>) <span style="color:#a6e22e">method_map</span>() {
	<span style="color:#a6e22e">m</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#e6db74">&#34;xxx&#34;</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_map&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;m: %p m: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™mèµ‹nilå€¼ä¹‹åï¼Œmåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†method_mapè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºmçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨mæ‰€ä»¥è¿™é‡Œm=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;m: %p m: %p %#v\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">M</span>) <span style="color:#a6e22e">method_map_ptr</span>() {
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">m</span>)[<span style="color:#ae81ff">3</span>] = <span style="color:#e6db74">&#34;yyy&#34;</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nfunc_map_ptr&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %p *m: %p %#v\n&#34;</span>, <span style="color:#a6e22e">m</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//TODO: ä¸ç¡®å®šè¿™é‡Œç»™mèµ‹nilå€¼ä¹‹åï¼Œmåˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆå·²ä¸ºnilï¼Œä½†method_map_ptrè¿”å›åï¼Œä»èƒ½æ‰“å°å‡ºmçš„å†…å®¹ã€‚éš¾é“GCæœºåˆ¶ä¼šåˆ¤æ–­åé¢è¿˜ä¼šç”¨mæ‰€ä»¥è¿™é‡Œm=nilçš„èµ‹å€¼æ²¡ç”Ÿæ•ˆï¼Ÿ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %p %#v\n&#34;</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">S</span>{<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">M</span>{<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#ae81ff">1</span>: <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#ae81ff">2</span>: <span style="color:#e6db74">&#34;c&#34;</span>, <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#34;d&#34;</span>, <span style="color:#ae81ff">4</span>: <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#ae81ff">5</span>: <span style="color:#e6db74">&#34;f&#34;</span>}

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s:&#34;</span>, <span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;s: %p s: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#a6e22e">func_slice</span>(<span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;func_slice s:&#34;</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#a6e22e">func_slice_ptr</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;func_slice_ptr s:&#34;</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">method_slice</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;method_slice s:&#34;</span>, <span style="color:#a6e22e">s</span>)

	(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>).<span style="color:#a6e22e">method_slice_ptr</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;method_slice_ptr s:&#34;</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\n\nm:&#34;</span>, <span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;&amp;m: %p m: %p\n&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">m</span>)

	<span style="color:#a6e22e">func_map</span>(<span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;func_map m:&#34;</span>, <span style="color:#a6e22e">m</span>)

	<span style="color:#a6e22e">func_map_ptr</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;func_map_ptr m:&#34;</span>, <span style="color:#a6e22e">m</span>)

	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">method_map</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;method_map m:&#34;</span>, <span style="color:#a6e22e">m</span>)

	(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>).<span style="color:#a6e22e">method_map_ptr</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;method_map_ptr m:&#34;</span>, <span style="color:#a6e22e">m</span>)
}
</code></pre></div><p><code>s: [0 1 2 3 4 5]</code><!-- raw HTML omitted -->
<code>&amp;s: 0x40a0e0 s: 0x450000</code><!-- raw HTML omitted --></p>
<p><code>func_slice</code><!-- raw HTML omitted -->
<code>&amp;s: 0x40a110 s: 0x450000 main.S{0, 1, 2, 555, 4, 5}</code><!-- raw HTML omitted -->
<code>&amp;s: 0x40a110 s: 0x0 main.S(nil)</code><!-- raw HTML omitted -->
<code>func_slice s: [0 1 2 555 4 5]</code><!-- raw HTML omitted --></p>
<p><code>func_slice_ptr</code><!-- raw HTML omitted -->
<code>s: 0x40a0e0 *s: 0x450000 &amp;main.S{0, 1, 2, 666, 4, 5}</code><!-- raw HTML omitted -->
<code>s: 0x0 (*main.S)(nil)</code><!-- raw HTML omitted -->
<code>func_slice_ptr s: [0 1 2 666 4 5]</code><!-- raw HTML omitted --></p>
<p><code>method_slice</code><!-- raw HTML omitted -->
<code>&amp;s: 0x40a180 s: 0x450000 main.S{0, 1, 2, 888, 4, 5}</code><!-- raw HTML omitted -->
<code>&amp;s: 0x40a180 s: 0x0 main.S(nil)</code><!-- raw HTML omitted -->
<code>method_slice s: [0 1 2 888 4 5]</code><!-- raw HTML omitted --></p>
<p><code>method_slice_ptr</code><!-- raw HTML omitted -->
<code>s: 0x40a0e0 *s: 0x450000 &amp;main.S{0, 1, 2, 999, 4, 5}</code><!-- raw HTML omitted -->
<code>s: 0x0 (*main.S)(nil)</code><!-- raw HTML omitted -->
<code>method_slice_ptr s: [0 1 2 999 4 5]</code><!-- raw HTML omitted --></p>
<p><code>m: map[0:a 1:b 2:c 3:d 4:e 5:f]</code><!-- raw HTML omitted -->
<code>&amp;m: 0x40c128 m: 0x43e260</code><!-- raw HTML omitted --></p>
<p><code>func_map</code><!-- raw HTML omitted -->
<code>&amp;m: 0x40c168 m: 0x43e260 main.M{0:&quot;a&quot;, 1:&quot;b&quot;, 2:&quot;c&quot;, 3:&quot;ooo&quot;, 4:&quot;e&quot;, 5:&quot;f&quot;}</code><!-- raw HTML omitted -->
<code>&amp;m: 0x40c168 m: 0x0 main.M(nil)</code><!-- raw HTML omitted -->
<code>func_map m: map[0:a 1:b 2:c 3:ooo 4:e 5:f]</code><!-- raw HTML omitted --></p>
<p><code>func_map_ptr</code><!-- raw HTML omitted -->
<code>m: 0x40c128 *m: 0x43e260 &amp;main.M{0:&quot;a&quot;, 1:&quot;b&quot;, 2:&quot;c&quot;, 3:&quot;ppp&quot;, 4:&quot;e&quot;, 5:&quot;f&quot;}</code><!-- raw HTML omitted -->
<code>m: 0x0 (*main.M)(nil)</code><!-- raw HTML omitted -->
<code>func_map_ptr m: map[0:a 1:b 2:c 3:ppp 4:e 5:f]</code><!-- raw HTML omitted --></p>
<p><code>func_map</code><!-- raw HTML omitted -->
<code>&amp;m: 0x40c230 m: 0x43e260 main.M{0:&quot;a&quot;, 1:&quot;b&quot;, 2:&quot;c&quot;, 3:&quot;xxx&quot;, 4:&quot;e&quot;, 5:&quot;f&quot;}</code><!-- raw HTML omitted -->
<code>&amp;m: 0x40c230 m: 0x0 main.M(nil)</code><!-- raw HTML omitted -->
<code>method_map m: map[0:a 1:b 2:c 3:xxx 4:e 5:f]</code><!-- raw HTML omitted --></p>
<p><code>func_map_ptr</code><!-- raw HTML omitted -->
<code>m: 0x40c128 *m: 0x43e260 &amp;main.M{0:&quot;a&quot;, 1:&quot;b&quot;, 2:&quot;c&quot;, 3:&quot;yyy&quot;, 4:&quot;e&quot;, 5:&quot;f&quot;}</code><!-- raw HTML omitted -->
<code>m: 0x0 (*main.M)(nil)</code><!-- raw HTML omitted -->
<code>method_map_ptr m: map[0:a 1:b 2:c 3:yyy 4:e 5:f]</code><!-- raw HTML omitted --></p>
<p>ä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†sliceå’Œmapçš„å‡½æ•°å’Œæ–¹æ³•å¯¹å‚æ•°å’Œæ¥æ”¶è€…ä¸ºæ™®é€šå˜é‡å’ŒæŒ‡é’ˆå˜é‡æ—¶çš„ä¿®æ”¹æ–¹æ³•ã€‚<!-- raw HTML omitted -->
åŠ è¿™ä¹ˆå¤šæ‰“å°ä¸»è¦ç”¨æ¥å¯¹æ¯”ä¿®æ”¹å‰åçš„å†…å®¹å’Œä¸€ä¸ªç–‘æƒ‘ğŸ¤”ï¼šåœ¨è¢«è°ƒå‡½æ•°ä¸­å¯¹sliceæˆ–mapèµ‹å€¼ä¸ºnilæ—¶ï¼Œ<!-- raw HTML omitted -->
è¢«è°ƒå‡½æ•°å†…æ‰“å°çš„sliceå€¼ä¸º(*main.S)(nil)æˆ–main.S(nil)ï¼Œè¢«è°ƒå‡½æ•°å†…æ‰“å°çš„mapå€¼ä¸ºmain.M(nil)æˆ–(*main.M)(nil)ï¼Œ<!-- raw HTML omitted -->
ä½†æ˜¯ä»è¢«è°ƒå‡½æ•°è¿”å›åˆ°mainå‡½æ•°æ—¶ï¼Œsliceæˆ–mapä»æœ‰è¢«èµ‹ä¸ºnilä¹‹å‰çš„å€¼ï¼Œæ¯”å¦‚mainå‡½æ•°é‡Œæ‰“å°çš„<!-- raw HTML omitted -->
<code>func_slice s: [0 1 2 555 4 5]</code>æˆ–<code>func_map m: map[0:a 1:b 2:c 3:ooo 4:e 5:f]</code>ï¼Œ<!-- raw HTML omitted -->
è¿™é‡Œæœ‰å¯èƒ½æ˜¯golangçš„GCå°†s = niæˆ–m = nilçš„æ“ä½œç»™æ¶ˆé™¤äº†ï¼Œå¾…è§£ã€‚</p>
<p><a href="https://play.golang.org/p/BET_ATfoimb"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<p>å½“ä¸€ä¸ªå¼•ç”¨ç±»å‹(slice, map, channel)çš„å˜é‡è¢«èµ‹ä¸ºnilåï¼Œè¿™ä¸ªå˜é‡ä»æ‹¥æœ‰è¿™ä¸ªç±»å‹æ‰€æŒæœ‰çš„æ–¹æ³•ï¼Œä½†è¦æ³¨æ„æ¥æ”¶è€…ä¸ºnilæ—¶å¯¹æ–¹æ³•çš„è°ƒç”¨  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">M</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">int</span>

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">M</span>) <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">idx</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">idx</span>]
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#a6e22e">M</span>) <span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">idx</span>, <span style="color:#a6e22e">v</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">idx</span>] = <span style="color:#a6e22e">v</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">M</span>{<span style="color:#ae81ff">0</span>: <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">1</span>: <span style="color:#ae81ff">99</span>, <span style="color:#ae81ff">2</span>: <span style="color:#ae81ff">999</span>, <span style="color:#ae81ff">3</span>: <span style="color:#ae81ff">9999</span>}

	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">get</span>(<span style="color:#ae81ff">1</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>) <span style="color:#75715e">//map[0:9 1:99 2:999 3:9999]
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">set</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">100</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>) <span style="color:#75715e">//map[1:100 2:999 3:9999 0:9]
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">nil</span>

	<span style="color:#a6e22e">ret</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">get</span>(<span style="color:#ae81ff">2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;ret: &#34;</span>, <span style="color:#a6e22e">ret</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>) <span style="color:#75715e">//map[]
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//m.set(2, 200) //panic: assignment to entry in nil map
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(m)
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>map[0:9 1:99 2:999 3:9999]'&lt;br&gt;</code>map[0:9 1:100 2:999 3:9999]&lsquo;<!-- raw HTML omitted -->
<code>ret:  0'&lt;br&gt;</code>map[]&lsquo;<!-- raw HTML omitted --></p>
<p><code>m = nil</code>ä¹‹åï¼Œm.get(2)ä»èƒ½æˆåŠŸè°ƒç”¨ï¼Œå› ä¸ºgetæ–¹æ³•åªæ˜¯å¯¹mçš„è¯»å–ï¼Œå½“key(2)åœ¨map(m)ä¸­ä¸å­˜åœ¨æ—¶ï¼Œmap(m)å°†è¿”å›0å€¼ï¼Œï¼Œå³get(2)è¿”å›intå‹çš„0.<!-- raw HTML omitted -->
set(2, 200)å°è¯•å‘ä¸€ä¸ªnil mapå†™å€¼ï¼Œè¿™æ—¶mapè¿˜æ²¡æœ‰ä¸ºå“ˆå¸Œè¡¨åˆ†é…åœ°å€ï¼Œæ‰€ä»¥è¿™æ—¶å€™å‘mapå†™å€¼å°†ä¼šå¯¼è‡´panicã€‚</p>
<p><a href="https://play.golang.org/p/D2g8d_1sglc"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<h2 id="63-">6.3 ç»“æ„ä½“å¼•ç”¨æˆå‘˜ç±»å‹çš„æ–¹æ³•</h2>
<p>å¦‚æœä¸€ä¸ªç±»å‹è¢«ä¸€ä¸ªç»“æ„ä½“ç±»å‹åŒ…å«ï¼Œåˆ™ç»“æ„ä½“å¯ä»¥ç›´æ¥å¼•ç”¨è¿™ä¸ªç±»å‹çš„æˆå‘˜ï¼Œç»“æ„ä½“ä¹Ÿå¯ä»¥ç›´æ¥å¼•ç”¨è¿™ä¸ªç±»å‹æ‰€æ‹¥æœ‰çš„æ–¹æ³•  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Arm</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">lefthand</span>, <span style="color:#a6e22e">righthand</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Leg</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">leftleg</span>, <span style="color:#a6e22e">rightleg</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Wing</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">leftwing</span>, <span style="color:#a6e22e">rightwing</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Arm</span>) <span style="color:#a6e22e">move</span>(<span style="color:#a6e22e">angle</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">lefthand</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">angle</span>
	<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">righthand</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">angle</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">l</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Leg</span>) <span style="color:#a6e22e">walk</span>(<span style="color:#a6e22e">step</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">leftleg</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
	<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">rightleg</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">w</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Wing</span>) <span style="color:#a6e22e">fly</span>(<span style="color:#a6e22e">step</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">leftwing</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">rightwing</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Body</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Arm</span>
	<span style="color:#a6e22e">Leg</span>
	<span style="color:#f92672">*</span><span style="color:#a6e22e">Wing</span>
	<span style="color:#a6e22e">height</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Body</span>{<span style="color:#a6e22e">Arm</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>}, <span style="color:#a6e22e">Leg</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>}, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Wing</span>{<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>}, <span style="color:#ae81ff">180</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">2</span>)
	<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">walk</span>(<span style="color:#ae81ff">5</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>).<span style="color:#a6e22e">fly</span>(<span style="color:#ae81ff">100</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;b.leftwing = %d, b.rightwing = %d\n&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">leftwing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">rightwing</span>)
}
</code></pre></div><p><code>{1 1} {2 2} {50 50} 180</code><!-- raw HTML omitted -->
<code>{3 3} {7 7} {50 50} 180</code><!-- raw HTML omitted -->
<code>{3 3} {7 7} {150 150} 180</code><!-- raw HTML omitted -->
<code>b.leftwing = 150, b.rightwing = 150</code><!-- raw HTML omitted --></p>
<p>ç±»å‹Armï¼ŒLegï¼Œ*Wingå‡æœ‰è‡ªå·±çš„æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºmoveï¼Œwalkï¼Œflyã€‚<!-- raw HTML omitted --></p>
<ol>
<li>BodyåŒ…å«äº†Armï¼ŒLegå’Œ<em>Wingçš„ç±»å‹ï¼ŒBodyç±»å‹çš„å˜é‡bå¯ä»¥ç›´æ¥å¼•ç”¨Armï¼ŒLegå’Œ</em>Wingç±»å‹çš„æˆå‘˜ï¼Œæ¯”å¦‚æœ€åä¸€è¡Œçš„æ‰“å°b.leftwing,è€Œä¸å¿…å†™æˆb.<em>Wing.leftwing,<!-- raw HTML omitted -->
b.leftwingè¿™ç§å†™æ³•åœ¨ç¼–è¯‘æ—¶ç¼–è¯‘å™¨ä¼šç”Ÿæˆè€Œå¤–çš„ä»£ç æ¥å±•å¼€å¹¶è°ƒç”¨åˆ°</em>Wingç±»å‹çš„leftwingå˜é‡ã€‚<!-- raw HTML omitted --></li>
<li>Bodyç±»å‹çš„å˜é‡båŒæ ·èƒ½å¼•ç”¨Arm, Legå’Œ*Wingæ‰€æ‹¥æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚b.move, b.walk, (&amp;b).flyï¼Œè¿™äº›éƒ½æ˜¯Bodyæˆå‘˜ç±»å‹çš„æ–¹æ³•ã€‚<!-- raw HTML omitted -->
å½“ç„¶äº†ï¼Œè¿™äº›æˆå‘˜ç±»å‹çš„æ–¹æ³•ä¸èƒ½é‡åï¼Œå¦åˆ™bè°ƒç”¨æ—¶ä¼šå‡ºç°æ­§ä¹‰ã€‚</li>
</ol>
<p><a href="https://play.golang.org/p/D2g8d_1sglc"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<h2 id="64-">6.4 æ–¹æ³•æŒ‡é’ˆ</h2>
<p>æ–¹æ³•çš„æŒ‡é’ˆåˆ†ä¸º2ç§ï¼Œå˜é‡æ–¹æ³•çš„æŒ‡é’ˆå’Œç±»å‹æ–¹æ³•çš„æŒ‡é’ˆ  //adm</p>
<p>å˜é‡æ–¹æ³•çš„æŒ‡é’ˆï¼Œç»™æŒ‡é’ˆä¼ çš„å‚æ•°å’Œç»™æ–¹æ³•ä¼ çš„å‚æ•°ä¸€æ ·ï¼›<!-- raw HTML omitted -->
ç±»å‹æ–¹æ³•çš„æŒ‡é’ˆï¼Œç»™æŒ‡é’ˆä¼ çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–¹æ³•çš„æ¥æ”¶ç±»å‹çš„å˜é‡ï¼Œåé¢å†ä¼ ç»™æŒ‡é’ˆçš„å‚æ•°æ‰æ˜¯æŒ‡é’ˆæŒ‡å‘çš„æ–¹æ³•çš„å‚æ•°ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Arm</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">lefthand</span>, <span style="color:#a6e22e">righthand</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Leg</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">leftleg</span>, <span style="color:#a6e22e">rightleg</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Wing</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">leftwing</span>, <span style="color:#a6e22e">rightwing</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Arm</span>) <span style="color:#a6e22e">move</span>(<span style="color:#a6e22e">angle</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">lefthand</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">angle</span>
	<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">righthand</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">angle</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">l</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Leg</span>) <span style="color:#a6e22e">walk</span>(<span style="color:#a6e22e">step</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">leftleg</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
	<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">rightleg</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">w</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Wing</span>) <span style="color:#a6e22e">fly</span>(<span style="color:#a6e22e">step</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">leftwing</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">rightwing</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">step</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Body</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Arm</span>
	<span style="color:#a6e22e">Leg</span>
	<span style="color:#f92672">*</span><span style="color:#a6e22e">Wing</span>
	<span style="color:#a6e22e">height</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Arm</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>}
	<span style="color:#a6e22e">l</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Leg</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>}
	<span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Wing</span>{<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>}

	<span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Body</span>{<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">l</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">w</span>, <span style="color:#ae81ff">180</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Ori&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	<span style="color:#75715e">//b.move(2)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">bmv</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">move</span> <span style="color:#75715e">//å°†å˜é‡bçš„æ–¹æ³•move(å®é™…ä¸Šæ˜¯armçš„æ–¹æ³•ï¼Œåªæ˜¯è¢«bå¼•ç”¨è€Œå·²)çš„åœ°å€èµ‹ç»™bmvï¼Œbmvå…¶å®æ˜¯b.moveçš„æ–¹æ³•æŒ‡é’ˆã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bmv</span>(<span style="color:#ae81ff">2</span>)        <span style="color:#75715e">//å‘bmvä¼ å…¥å‚æ•°2ï¼Œå®é™…ä¸Šç­‰åŒäºb.move(2)çš„è¡¨ç¤ºæ–¹å¼ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Arm&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	<span style="color:#75715e">//b.walk(5)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">wk1</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">Leg</span>).<span style="color:#a6e22e">walk</span> <span style="color:#75715e">//å°†*Legç±»å‹çš„æ–¹æ³•walkèµ‹ç»™wk1ï¼Œ wk1æ˜¯(*Leg).walkçš„*Legç±»å‹walkæ–¹æ³•çš„æŒ‡é’ˆ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">wk1</span>(<span style="color:#f92672">&amp;</span>(<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>), <span style="color:#ae81ff">5</span>)   <span style="color:#75715e">//(*Leg) ç±»å‹çš„æ–¹æ³•walkå®é™…ä¸Šåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä½†è¿™é‡Œå´ç»™wk1ä¼ é€’äº†2ä¸ªå‚æ•°ï¼Œå› ä¸ºwk1çš„ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æ˜¯wk1è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ–¹æ³•çš„æ¥æ”¶è€…ç±»å‹çš„å˜é‡ï¼Œå³walkæ–¹æ³•çš„æ¥æ”¶è€…*Legç±»å‹çš„å˜é‡&amp;(b.Leg)ï¼Œåé¢çš„5æ‰æ˜¯ä¼ ç»™walkçš„å‚æ•°step.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;\nwk1 type %T\n&#34;</span>, <span style="color:#a6e22e">wk1</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Leg&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	<span style="color:#a6e22e">wk2</span> <span style="color:#f92672">:=</span> (<span style="color:#f92672">*</span><span style="color:#a6e22e">Body</span>).<span style="color:#a6e22e">walk</span> <span style="color:#75715e">//wk2å’Œwk1éƒ½æŒ‡å‘walkæ–¹æ³•ï¼Œåªä¸è¿‡wk1çš„walkæ–¹æ³•æ¥æ”¶è€…å˜é‡æ˜¯*Legï¼Œwk2çš„æ¥æ”¶è€…å˜é‡ç±»å‹æ˜¯*Body
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">wk2</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>, <span style="color:#ae81ff">8</span>)          <span style="color:#75715e">//wk2çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯*Bodyç±»å‹çš„å˜é‡&amp;bï¼Œç¬¬äºŒä¸ªå‚æ•°8æ˜¯ä¼ ç»™walkçš„å‚æ•°step.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;\nwk2 type %T\n&#34;</span>, <span style="color:#a6e22e">wk2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Leg&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>).<span style="color:#a6e22e">fly</span>(<span style="color:#ae81ff">100</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nWing&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Arm</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Leg</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">Wing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">height</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;b.leftwing = %d, b.rightwing = %d\n&#34;</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">leftwing</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">rightwing</span>)
}
</code></pre></div><p><code>Ori {1 1} {2 2} {50 50} 180</code><!-- raw HTML omitted -->
<code>Arm {3 3} {2 2} {50 50} 180</code><!-- raw HTML omitted --></p>
<p><code>wk1 type func(*main.Leg, int)</code><!-- raw HTML omitted -->
<code>Leg {3 3} {7 7} {50 50} 180</code><!-- raw HTML omitted --></p>
<p><code>wk2 type func(*main.Body, int)</code><!-- raw HTML omitted -->
<code>Leg {3 3} {15 15} {50 50} 180</code><!-- raw HTML omitted --></p>
<p><code>Wing {3 3} {15 15} {150 150} 180</code><!-- raw HTML omitted -->
<code>b.leftwing = 150, b.rightwing = 150</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/D2g8d_1sglc"><strong>ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯  P L A Y A R O U N D ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ° ğŸ¯ ğŸ¥© ğŸŒ°</strong></a></p>
<h1 id="7-">7. æ¥å£</h1>
<h2 id="71-">7.1 æ¥å£ç±»å‹</h2>
<p>æ¥å£æ˜¯ä¸€ç§å®šä¹‰äº†ä¸€ç»„æ–¹æ³•çš„ç±»å‹ï¼Œæ¥å£ç±»å‹åªå®šä¹‰è¿™ç»„æ–¹æ³•ï¼Œæ–¹æ³•ç”±å¦ä¸€ç§ç±»å‹æ¥å®ç°ï¼Œæœ€ç»ˆæ¥å£ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘å®ç°è¿™ç»„æ–¹æ³•çš„ç±»å‹çš„å˜é‡ã€‚æ¥å£ç±»å‹å†™ä½œ:interface  //adm</p>
<p>æœªå®šä¹‰çš„æ¥å£ç±»å‹ï¼Œè¿™ä¸ªæ¥å£ç±»å‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•<code>eat() error</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">interface</span> {
   <span style="color:#a6e22e">eat</span>() <span style="color:#66d9ef">error</span>
}
</code></pre></div><p>å®šä¹‰çš„æ¥å£ç±»å‹eaterï¼Œè¿™ä¸ªæ¥å£ç±»å‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•<code>eat() error</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">eater</span> <span style="color:#66d9ef">interface</span> {
   <span style="color:#a6e22e">eat</span>() <span style="color:#66d9ef">error</span>
}
</code></pre></div><p>æœªå®šä¹‰çš„æ¥å£ç±»å‹çš„åˆ«åeater, è¿™ä¸ªæ¥å£ç±»å‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•<code>eat() error</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">eatalias</span> = <span style="color:#66d9ef">interface</span> {
 	<span style="color:#a6e22e">eat</span>() <span style="color:#66d9ef">error</span>
}
</code></pre></div><p>Goè¯­è¨€ä¸­æ¥å£(interface)ç»“æ„ä½“ç±»å‹çš„å†…éƒ¨å®šä¹‰å¦‚ä¸‹ï¼š  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">_interface</span> <span style="color:#66d9ef">struct</span> {
   <span style="color:#a6e22e">dynamicTypeInfo</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">struct</span> {
       <span style="color:#a6e22e">dynamicType</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">_type</span>       <span style="color:#75715e">// the dynamic type
</span><span style="color:#75715e"></span>       <span style="color:#a6e22e">methods</span>     []<span style="color:#f92672">*</span><span style="color:#a6e22e">_function</span> <span style="color:#75715e">// method table
</span><span style="color:#75715e"></span>   }
   <span style="color:#a6e22e">dynamicValue</span> <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span> <span style="color:#75715e">// the dynamic value
</span><span style="color:#75715e"></span>}
</code></pre></div><p>æ¥å£ç±»å‹çš„ç»“æ„ä½“æˆå‘˜åŒ…å«ä¸€ä¸ªdynamicTypeInfoç»“æ„ä½“æŒ‡é’ˆå˜é‡å’Œä¸€ä¸ªdynamicValueçš„unsafe.PointeræŒ‡é’ˆå˜é‡.<!-- raw HTML omitted -->
dynamicTypeInfoçš„2ä¸ªæˆå‘˜ï¼š<!-- raw HTML omitted -->
Â Â dynamicTypeæŒ‡å‘çš„æ˜¯å®ç°interfaceæ¥å£æ–¹æ³•çš„ç±»å‹ã€‚<!-- raw HTML omitted -->
Â Â methodsåˆ‡ç‰‡æŒ‡å‘çš„æ˜¯å®ç°interfaceæ¥å£æ–¹æ³•çš„ç±»å‹æ–¹æ³•ã€‚<!-- raw HTML omitted -->
dynamicValueå˜é‡æŒ‡å‘çš„æ˜¯å®ç°interfaceæ¥å£æ–¹æ³•ç±»å‹çš„å˜é‡ã€‚<!-- raw HTML omitted --></p>
<p>æ¥å£ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">//eateræ˜¯å®šä¹‰çš„æ¥å£ç±»å‹ï¼Œè¿™ä¸ªæ¥å£ç±»å‹å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•eat()
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">eater</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">eat</span>(<span style="color:#a6e22e">sth</span> <span style="color:#66d9ef">string</span>)
}

<span style="color:#75715e">//kidæ˜¯å®šä¹‰çš„ç»“æ„ä½“ç±»å‹ï¼Œè¿™ä¸ªç»“æ„ä½“ç±»å‹å®šä¹‰äº†ä¸€ä¸ªstringç±»å‹çš„å˜é‡name
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">kid</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#75715e">//kidç±»å‹å®ç°äº†eatæ–¹æ³•
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">k</span> <span style="color:#a6e22e">kid</span>) <span style="color:#a6e22e">eat</span>(<span style="color:#a6e22e">sth</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">k</span>.<span style="color:#a6e22e">name</span>, <span style="color:#e6db74">&#34;is eating&#34;</span>, <span style="color:#a6e22e">sth</span>)
}

<span style="color:#75715e">//feedå‡½æ•°æœ‰2ä¸ªå‚æ•°:
</span><span style="color:#75715e"></span><span style="color:#75715e">//ç¬¬1ä¸ªå‚æ•°æ˜¯eateræ¥å£ç±»å‹çš„å˜é‡sbdã€‚å› ä¸ºkidç±»å‹å®ç°äº†eateræ¥å£è¦æ±‚çš„eat()æ–¹æ³•ï¼Œ
</span><span style="color:#75715e"></span><span style="color:#75715e">//æ‰€ä»¥kidç±»å‹æ»¡è¶³eateræ¥å£ç±»å‹çš„è¦æ±‚, eateræ¥å£ç±»å‹çš„å˜é‡sbdèƒ½æŒ‡å‘kidç±»å‹çš„å˜é‡ã€‚
</span><span style="color:#75715e"></span><span style="color:#75715e">//ç¬¬2ä¸ªå‚æ•°æ˜¯stringç±»å‹çš„å˜é‡sthï¼Œä»£è¡¨è¦åƒçš„ä¸œè¥¿ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">feed</span>(<span style="color:#a6e22e">sbd</span> <span style="color:#a6e22e">eater</span>, <span style="color:#a6e22e">sth</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">sbd</span>.<span style="color:#a6e22e">eat</span>(<span style="color:#a6e22e">sth</span>)
	<span style="color:#75715e">//fmt.Printf(&#34;sbd type: %T  value: %s\n&#34;, sbd, sbd) //sbd type: main.kid  value: {Louis}
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">k</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">kid</span>{<span style="color:#e6db74">&#34;Louis&#34;</span>}

	<span style="color:#a6e22e">feed</span>(<span style="color:#a6e22e">k</span>, <span style="color:#e6db74">&#34;bread&#34;</span>)
	<span style="color:#a6e22e">feed</span>(<span style="color:#a6e22e">k</span>, <span style="color:#e6db74">&#34;apple&#34;</span>)
}
</code></pre></div><p><code>Louis is eating bread</code><!-- raw HTML omitted -->
<code>Louis is eating apple</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/HD7BoI2rUye"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="72-">7.2 ç©ºæ¥å£ç±»å‹</h2>
<p>å¦‚æœä¸€ä¸ªæ¥å£ç±»å‹æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç©ºæ¥å£ç±»å‹(blank interface type)ã€‚ç©ºæ¥å£ç±»å‹å†™ä½œinterface{}  //adm</p>
<p>Goè¯­è¨€ä¸­ç©ºæ¥å£(blank interface)ç»“æ„ä½“ç±»å‹çš„å†…éƒ¨å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">_interface</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">dynamicType</span>  <span style="color:#f92672">*</span><span style="color:#a6e22e">_type</span>         <span style="color:#75715e">// the dynamic type
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">dynamicValue</span> <span style="color:#a6e22e">unsafe</span>.<span style="color:#a6e22e">Pointer</span> <span style="color:#75715e">// the dynamic value
</span><span style="color:#75715e"></span>}
</code></pre></div><p>ç›¸æ¯”æ¥å£ç±»å‹ï¼Œç©ºæ¥å£ç±»å‹ä¸å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥ç©ºæ¥å£çš„ç»“æ„ä½“ç±»å‹æˆå‘˜ä¸åŒ…å«æ¥å£æˆå‘˜çš„å‡½æ•°æŒ‡é’ˆåˆ‡ç‰‡<code>methods     []*_function // method table</code>ã€‚</p>
<p>å› ä¸ºç©ºæ¥å£ç±»å‹interface{}æ²¡æœ‰å®šä¹‰æ–¹æ³•ï¼Œä¸è®ºä¸€ä¸ªç±»å‹æœ‰æ²¡æœ‰è‡ªèº«çš„æ–¹æ³•ï¼Œç©ºæ¥å£ç±»å‹çš„2ä¸ªæˆå‘˜dynamicTypeå’ŒdynamicValueéƒ½å¯ä»¥æŒ‡å‘ä»»ä½•ç±»å‹å’Œè¿™ä¸ªç±»å‹çš„å˜é‡ã€‚
æ‰€ä»¥ç©ºæ¥å£ç±»å‹interface{}åœ¨GOè¯­è¨€ä¸­æ˜¯ä¸€ç§ä¸‡èƒ½ç±»å‹çš„å­˜åœ¨ï¼Œinterface{}ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘ä»»ä½•ç±»å‹çš„å˜é‡ã€‚</p>
<p>ç©ºæ¥å£ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;bytes&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">interface</span>{}<span style="color:#75715e">//ç©ºæ¥å£ç±»å‹å˜é‡i
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">i</span> = <span style="color:#ae81ff">1</span>	<span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘intç±»å‹ï¼ŒdynamicValueæŒ‡å‘intç±»å‹å€¼1
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = <span style="color:#ae81ff">1.0</span> <span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘floatç±»å‹ï¼ŒdynamicValueæŒ‡å‘floatç±»å‹å€¼1.0
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = <span style="color:#e6db74">&#34;abcdef&#34;</span> <span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘stringç±»å‹ï¼ŒdynamicValueæŒ‡å‘stringç±»å‹å€¼&#34;abcdef&#34;
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">string</span>{<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;monday&#34;</span>} <span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘map[int]stringç±»å‹ï¼ŒdynamicValueæŒ‡å‘map[int]stringç±»å‹å€¼0: &#34;monday&#34;
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>} <span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘[]intç±»å‹ï¼ŒdynamicValueæŒ‡å‘[]intç±»å‹å€¼1, 2, 3, 4, 5
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = new(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>) <span style="color:#75715e">//içš„dynamicTypeæŒ‡å‘bytes.Bufferç±»å‹çš„æŒ‡é’ˆï¼ŒdynamicValueæŒ‡å‘bytes.Bufferç±»å‹å˜é‡çš„defaultå€¼
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">i</span> = <span style="color:#66d9ef">nil</span> <span style="color:#75715e">//interfaceå’Œinterface{}ç±»å‹çš„0å€¼æ˜¯nil
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;i type: %-14T &#34;</span>, <span style="color:#a6e22e">i</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; value:&#34;</span>, <span style="color:#a6e22e">i</span>)
}
</code></pre></div><p><code>i type: int             value: 1</code><!-- raw HTML omitted -->
<code>i type: float64         value: 1</code><!-- raw HTML omitted -->
<code>i type: string          value: abcdef</code><!-- raw HTML omitted -->
<code>i type: map[int]string  value: map[0:monday]</code><!-- raw HTML omitted -->
<code>i type: []int           value: [1 2 3 4 5]</code><!-- raw HTML omitted -->
<code>i type: *bytes.Buffer   value:</code><!-- raw HTML omitted -->
<code>i type: &lt;nil&gt;           value: &lt;nil&gt;</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/ETmmBwnF_HW"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="73-">7.3 ç»™æ¥å£å˜é‡èµ‹å€¼</h2>
<p>å½“æŠŠå¦ä¸€ç§ç±»å‹çš„å˜é‡èµ‹ç»™æ¥å£ç±»å‹çš„å˜é‡æ—¶ï¼Œéœ€è¦éµå¾ªä¸€ç§è§„åˆ™ï¼šå¦ä¸€ç§ç±»å‹çš„æ–¹æ³•å®šä¹‰ä¸€å®šè¦åŒ…å«æ¥å£ç±»å‹çš„æ–¹æ³•å®šä¹‰ã€‚æ¯”å¦‚æ¥å£ç±»å‹å®šä¹‰äº†3ä¸ªæ–¹æ³•ï¼Œ<!-- raw HTML omitted -->
è¦æŠŠå¦ä¸€ç§ç±»å‹çš„å˜é‡èµ‹ç»™æ¥å£ç±»å‹çš„å˜é‡æ—¶ï¼Œå¦ä¸€ç§ç±»å‹çš„æ–¹æ³•å®šä¹‰å¯ä»¥æœ‰10ä¸ªï¼Œä½†è¿™10ä¸ªæ–¹æ³•ä¸€å®šè¦åŒ…å«è¦è¢«èµ‹å€¼çš„æ¥å£ç±»å‹çš„æ–¹æ³•å®šä¹‰ï¼Œ<!-- raw HTML omitted -->
å³èµ‹å€¼ç±»å‹å˜é‡çš„æ–¹æ³•ä¸è¢«èµ‹å€¼æ¥å£ç±»å‹çš„å˜é‡çš„æ–¹æ³•æ˜¯å¤§äºç­‰äºçš„å…³ç³»ã€‚<!-- raw HTML omitted -->
ä¸Šé¢çš„â€œå¦ä¸€ç§ç±»å‹â€ä¹ŸåŒ…æ‹¬æ¥å£ç±»å‹ï¼Œä¸‹é¢çš„ä¾‹å­è§£é‡Šæ¥ä¸Šé¢çš„æè¿°<!-- raw HTML omitted --></p>
<p>ç»™æ¥å£å˜é‡èµ‹å€¼çš„ä¾‹å­  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">human</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">man</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superman</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can fly&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">h</span> <span style="color:#a6e22e">human</span>      <span style="color:#75715e">//hä»£è¡¨äººç±»
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#75715e">//sä»£è¡¨è¶…äººç±»
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">s</span> <span style="color:#75715e">//sè¶…äººç±»å…·æœ‰äººç±»hæ‰€æ‹¥æœ‰çš„æ‰€æœ‰æŠ€èƒ½: swimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠsèµ‹ç»™hã€‚
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//s = h //äººç±»hä¼šçš„æ–¹æ³•æ²¡æœ‰è¶…äººç±»så¤šï¼Œäººç±»è‡ªèº«æ²¡æœ‰flyçš„æŠ€èƒ½ï¼Œæ‰€ä»¥ä¸èƒ½æŠŠhèµ‹ç»™sã€‚æ­¤è¡Œç¼–è¯‘ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//cannot use h (type human) as type superhuman in assignment: human does not implement superhuman (missing fly method)
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#a6e22e">man</span> <span style="color:#75715e">//mä»£è¡¨ä¸€ä¸ªäºº
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">m</span>     <span style="color:#75715e">//mè¿™ä¸ªäººå®ç°äº†häººç±»çš„æ‰€æœ‰æŠ€èƒ½: swimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠmèµ‹ç»™hã€‚ hè¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡æŒ‡å‘äº†ä¸€ä¸ªå®ç°å…¶3ä¸ªæ–¹æ³•çš„å˜é‡mã€‚
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sm</span> <span style="color:#a6e22e">superman</span> <span style="color:#75715e">//smä»£è¡¨ä¸€ä¸ªè¶…äºº
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">sm</span>          <span style="color:#75715e">//smè¿™ä¸ªè¶…äººå®ç°äº†sè¶…äººç±»çš„æ‰€æœ‰æŠ€èƒ½: flyï¼Œswimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠsmèµ‹ç»™sã€‚ sè¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡æŒ‡å‘ä¸€ä¸ªå®ç°äº†s 4ä¸ªæ–¹æ³•çš„å˜é‡sm.
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//è¯•è¯•häººç±»æŒ‡å‘çš„è¿™ä¸ªäººmæ‰€å…·æœ‰çš„æŠ€èƒ½ï¼š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">swim</span>()
	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">walk</span>()
	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">talk</span>()

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>() <span style="color:#75715e">//æ‰“å°ä¸€ä¸ªç©ºè¡Œ
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//è¯•è¯•sè¶…äººç±»æŒ‡å‘çš„è¿™ä¸ªè¶…äººsmæ‰€å…·æœ‰çš„æŠ€èƒ½ï¼š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">fly</span>()
	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">swim</span>()
	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">walk</span>()
	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">talk</span>()

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>() <span style="color:#75715e">//æ‰“å°ä¸€ä¸ªç©ºè¡Œ
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">s</span> <span style="color:#75715e">//sè¶…äººç±»å…·æœ‰äººç±»hæ‰€æ‹¥æœ‰çš„æ‰€æœ‰æŠ€èƒ½: swimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠsèµ‹ç»™hã€‚è¿™æ—¶å€™hæŒ‡å‘çš„æ˜¯è¶…äººsmã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">swim</span>()
	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">walk</span>()
	<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">talk</span>()
}
</code></pre></div><p><code>Man can swim</code><!-- raw HTML omitted -->
<code>Man can walk</code><!-- raw HTML omitted -->
<code>Man can talk</code><!-- raw HTML omitted --></p>
<p><code>superman can fly</code><!-- raw HTML omitted -->
<code>superman can swim</code><!-- raw HTML omitted -->
<code>superman can walk</code><!-- raw HTML omitted -->
<code>superman can talk</code><!-- raw HTML omitted --></p>
<p><code>superman can swim</code><!-- raw HTML omitted -->
<code>superman can walk</code><!-- raw HTML omitted -->
<code>superman can talk</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/D2g8d_1sglc"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="74-">7.4 ç±»å‹æ–­è¨€</h2>
<p>ç±»å‹æ–­è¨€(type assertion)å°±æ˜¯å¯¹æ¥å£ç±»å‹çš„å˜é‡è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¹¶æ£€æŸ¥è½¬æ¢ç»“æœçš„æ„æ€ï¼Œè¿™ç§è½¬æ¢ç»“æœçš„æ£€æŸ¥å‘ç”Ÿåœ¨ç¨‹åºè¿è¡Œæ—¶ã€‚<!-- raw HTML omitted -->
æ¯”å¦‚è¦æ£€æŸ¥æŸæ¥å£ç±»å‹çš„å˜é‡iè¦è½¬æ¢æˆç±»å‹Tï¼Œå†™ä½œi.(T)ã€‚<!-- raw HTML omitted -->
Tçš„ç±»å‹åˆ†ä¸º2ç§ï¼šä¸€ç§æ˜¯éæ¥å£ç±»å‹ï¼Œä¸€ç§æ˜¯æ¥å£ç±»å‹:<!-- raw HTML omitted -->
å¦‚æœTæ˜¯éæ¥å£ç±»å‹ï¼šiå†…éƒ¨çš„åŠ¨æ€ç±»å‹(dynamicType)è¦å’ŒTç›¸åŒï¼Œ    åˆ™i.(T)ç±»å‹æ–­è¨€ï¼ˆè½¬æ¢ç»“æœï¼‰æˆåŠŸã€‚<!-- raw HTML omitted -->
å¦‚æœTæ˜¯Â Â Â Â æ¥å£ç±»å‹ï¼šiå†…éƒ¨çš„åŠ¨æ€ç±»å‹(dynamicType)å®ç°äº†Tçš„æ–¹æ³•ï¼Œåˆ™i.(T)ç±»å‹æ–­è¨€ï¼ˆè½¬æ¢ç»“æœï¼‰æˆåŠŸã€‚<!-- raw HTML omitted --></p>
<p>ç±»å‹æ–­è¨€çš„ä¾‹å­  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">human</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">man</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superman</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can fly&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">h</span> <span style="color:#a6e22e">human</span>      <span style="color:#75715e">//hä»£è¡¨äººç±»
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#75715e">//sä»£è¡¨è¶…äººç±»
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#a6e22e">man</span> <span style="color:#75715e">//mä»£è¡¨ä¸€ä¸ªäºº
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">h</span> = <span style="color:#a6e22e">m</span>     <span style="color:#75715e">//mè¿™ä¸ªäººå®ç°äº†häººç±»çš„æ‰€æœ‰æŠ€èƒ½: swimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠmèµ‹ç»™hã€‚ hè¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡æŒ‡å‘äº†ä¸€ä¸ªå®ç°å…¶3ä¸ªæ–¹æ³•çš„å˜é‡m, mçš„æ–¹æ³•å’Œmçš„ç±»å‹manã€‚
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sm</span> <span style="color:#a6e22e">superman</span> <span style="color:#75715e">//smä»£è¡¨ä¸€ä¸ªè¶…äºº
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">sm</span>          <span style="color:#75715e">//smè¿™ä¸ªè¶…äººå®ç°äº†sè¶…äººç±»çš„æ‰€æœ‰æŠ€èƒ½: flyï¼Œswimï¼Œwalkï¼Œtalkï¼Œæ‰€ä»¥å¯ä»¥æŠŠsmèµ‹ç»™sã€‚ sè¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡æŒ‡å‘ä¸€ä¸ªå®ç°äº†s 4ä¸ªæ–¹æ³•çš„å˜é‡smï¼Œsmçš„æ–¹æ³•å’Œsmçš„ç±»å‹supermanã€‚
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>() <span style="color:#75715e">//æ‰“å°ä¸€ä¸ªç©ºè¡Œ
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i.(T) type asertion (type conversion check) test&#34;</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nT is a non-interface type:&#34;</span>) <span style="color:#75715e">//Tæ˜¯éæ¥å£ç±»å‹çš„æƒ…å†µ, iæŒ‡å‘çš„åŠ¨æ€ç±»å‹ä¸€å®šè¦å’ŒTéæ¥å£çš„ç±»å‹ç›¸åŒï¼Œåˆ™æ–­è¨€æˆåŠŸã€‚å› ä¸ºhçš„åŠ¨æ€ç±»å‹æ˜¯manï¼Œæ‰€ä»¥h.(superman)æ˜¯æ–­è¨€å¤±è´¥çš„ã€‚sçš„åŠ¨æ€ç±»å‹æ˜¯supermanï¼Œæ‰€ä»¥s.(man)ä¹Ÿæ˜¯æ–­è¨€å¤±è´¥çš„ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;h.(man)          type asertion (type conversion check) is %T\n&#34;</span>, <span style="color:#a6e22e">h</span>.(<span style="color:#a6e22e">man</span>))
	<span style="color:#75715e">//fmt.Printf(&#34;h.(superman)   type asertion (type conversion check) is %T\n&#34;, h.(superman)) //panic: interface conversion: main.human is main.man, not main.superman
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s.(superman)     type assertion (type conversion check) is %T\n&#34;</span>, <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">superman</span>))
	<span style="color:#75715e">//fmt.Printf(&#34;s.(man)        type assertion (type conversion check) is %T\n&#34;, s.(man)) //impossible type assertion: man does not implement superhuman (missing fly method)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nT is a interface type:&#34;</span>) <span style="color:#75715e">//Tæ˜¯æ¥å£ç±»å‹çš„æƒ…å†µï¼Œ iæŒ‡å‘çš„åŠ¨æ€ç±»å‹å®ç°äº†Tæ¥å£ç±»å‹æ‰€æ‹¥æœ‰çš„æ–¹æ³•ï¼Œåˆ™æ–­è¨€æˆåŠŸã€‚hæ²¡æœ‰å®ç°superhumanç±»å‹æ‰€å®šä¹‰çš„fly()æ–¹æ³•ï¼Œæ‰€ä»¥h.(superhuman)æ˜¯æ–­è¨€å¤±è´¥çš„ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;h.(human)        type asertion (type conversion check) is %T\n&#34;</span>, <span style="color:#a6e22e">h</span>.(<span style="color:#a6e22e">human</span>))
	<span style="color:#75715e">//fmt.Printf(&#34;h.(superhuman) type asertion (type conversion check) is %T\n&#34;, h.(superhuman)) //panic: interface conversion: main.man is not main.superhuman: missing method fly
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s.(superhuman)   type assertion (type conversion check) is %T\n&#34;</span>, <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">superhuman</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s.(human)        type assertion (type conversion check) is %T\n&#34;</span>, <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">human</span>))
}
</code></pre></div><p><code>i.(T) type asertion (type conversion check) test</code><!-- raw HTML omitted --></p>
<p><code>T is a non-interface type:</code><!-- raw HTML omitted -->
<code>h.(man)          type asertion (type conversion check) is main.man</code><!-- raw HTML omitted -->
<code>s.(superman)     type assertion (type conversion check) is main.superman</code><!-- raw HTML omitted --></p>
<p><code>T is a interface type:</code><!-- raw HTML omitted -->
<code>h.(human)        type asertion (type conversion check) is main.man</code><!-- raw HTML omitted -->
<code>s.(superhuman)   type assertion (type conversion check) is main.superman</code><!-- raw HTML omitted -->
<code>s.(human)        type assertion (type conversion check) is main.superman</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/JK2vKX4NshX"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<p>åˆ©ç”¨ç¬¬2ä¸ªè¿”å›å€¼åˆ¤æ–­ç±»å‹æ–­è¨€æ˜¯å¦æˆåŠŸï¼Œå¹¶é˜²æ­¢ç±»å‹æ–­è¨€å¤±è´¥æ—¶äº§ç”Ÿpanic  //adm</p>
<p>ç±»å‹æ–­è¨€æ˜¯ä¸ºäº†æˆ‘ä»¬èƒ½æ›´å¥½çš„æ£€æŸ¥å½“å‰ä½¿ç”¨çš„æ¥å£å˜é‡æ˜¯å¦ç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„ç±»å‹ï¼Œå¦‚æœè½¬æ¢ç±»å‹ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œä¸Šè¿°ä¾‹å­ä¸­(h.(superhuman))ä¼šç›´æ¥ä½¿ç¨‹åºpanicï¼Œ<!-- raw HTML omitted -->
è¿™æ ·åšåœ¨ç¨‹åºä¸­ä¸å¤ªä¼˜é›…ï¼Œå¹¸å¥½Goè¯­è¨€ä¸ºç±»å‹æ–­è¨€çš„è¿”å›å€¼æä¾›äº†2ä¸ªç»“æœ:<!-- raw HTML omitted -->
ç¬¬1ä¸ªæ˜¯è½¬æ¢ç»“æœï¼Œè½¬æ¢æˆåŠŸçš„è¯ï¼Œè½¬æ¢ç»“æœæ˜¯iå€¼çš„ä¸€ä»½å‰¯æœ¬ï¼Œè½¬æ¢å¤±è´¥çš„è¯ï¼Œè½¬æ¢ç»“æœæ˜¯è½¬æ¢ç±»å‹çš„0å€¼ã€‚<!-- raw HTML omitted -->
ç¬¬2ä¸ªæ˜¯å¯é€‰çš„boolç±»å‹çš„trueæˆ–falseè½¬æ¢ç»“æœï¼Œç”¨äºåˆ¤æ–­è½¬æ¢æ˜¯å¦æˆåŠŸï¼Œå¹¶é˜²æ­¢è½¬æ¢å¤±è´¥çš„ç¨‹åºè¿›å…¥panic<!-- raw HTML omitted --></p>
<p>ä¸€ä¸ªinterface{}ç±»å‹çš„å˜é‡ï¼Œé»˜è®¤å€¼ä¸ºnilï¼Œè¿™ä¸ªå˜é‡è¦è½¬æ¢æˆå…¶ä»–ç±»å‹æ—¶éƒ½ä¼šå¤±è´¥, å¦‚ä¸‹é¢ç¨‹åºä¸­çš„å˜é‡jã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">interface</span>{} = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i is&#34;</span>, <span style="color:#a6e22e">i</span>)

	<span style="color:#a6e22e">x</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>.(<span style="color:#66d9ef">int</span>)               <span style="color:#75715e">//interface{}ç±»å‹çš„iæŒ‡å‘100æ—¶ï¼Œä¼šæŠŠ100çš„é»˜è®¤ç±»å‹è½¬æ¢ä¸ºintæ•´å‹ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i.(int):&#34;</span>, <span style="color:#a6e22e">x</span>) <span style="color:#75715e">//100
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>.(<span style="color:#66d9ef">int</span>)               <span style="color:#75715e">//åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€ä¸ŠåŠ å…¥å¯é€‰å˜é‡okï¼Œç”¨äºåˆ¤æ–­ç±»å‹æ–­è¨€æ˜¯å¦æˆåŠŸã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i.(int):&#34;</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">ok</span>) <span style="color:#75715e">//100 true
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//y := i.([]int)              //içš„é»˜è®¤ç±»å‹æ˜¯intï¼Œè¿™é‡Œç”¨[]intä½œä¸ºæ–­è¨€ç±»å‹è‚¯å®šä¼šæ–­è¨€å¤±è´¥ï¼ŒåŒæ—¶è¿™é‡Œåªç”¨äº†1ä¸ªè¿”å›ç»“æœyï¼Œç¨‹åºä¼šç›´æ¥è¿›å…¥panicã€‚
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(&#34;i.([]int)&#34;, y) //panic: interface conversion: interface {} is int, not []int
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>.([]<span style="color:#66d9ef">int</span>)               <span style="color:#75715e">//åœ¨ä¸Šä¸€æ­¥çš„åŸºç¡€ä¸ŠåŠ å…¥å¯é€‰å˜é‡okï¼Œç”¨äºåˆ¤æ–­ç±»å‹æ–­è¨€æ˜¯å¦æˆåŠŸã€‚å¦‚æœç±»å‹æ–­è¨€å¤±è´¥ï¼Œåˆ™ç¨‹åºå¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä¸panicã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i.([]int):&#34;</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">ok</span>) <span style="color:#75715e">//[] false
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">z</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>.(<span style="color:#66d9ef">interface</span>{})               <span style="color:#75715e">//içš„æ–­è¨€ç±»å‹æ˜¯interface{}æ—¶ï¼Œå› ä¸ºinterface{}æ²¡æœ‰ä»»ä½•æ–¹æ³•, å¯ä»¥ç†è§£ä¸ºinterface{}ç±»å‹ä¸ç”¨å®ç°ï¼Œæˆ–è€…iå®ç°äº†interface{}ç±»å‹ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;i.(interface{}):&#34;</span>, <span style="color:#a6e22e">z</span>, <span style="color:#a6e22e">ok</span>) <span style="color:#75715e">//100 true
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">j</span> <span style="color:#66d9ef">interface</span>{} <span style="color:#75715e">//jä¸ºinterface{}ç±»å‹çš„å˜é‡ï¼Œjçš„é»˜è®¤å€¼ä¸ºnil
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;j is&#34;</span>, <span style="color:#a6e22e">j</span>)

	<span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">j</span>.(<span style="color:#66d9ef">int</span>)               <span style="color:#75715e">//æµ‹è¯•jèƒ½å¦æˆåŠŸè½¬æ¢æˆintç±»å‹
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;j.(int):&#34;</span>, <span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">ok</span>) <span style="color:#75715e">//0 false è½¬æ¢å¤±è´¥
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">j</span>.(<span style="color:#66d9ef">interface</span>{})               <span style="color:#75715e">//æµ‹è¯•jèƒ½å¦æˆåŠŸè½¬æ¢æˆinterface{}ç±»å‹
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;j.(interface{}):&#34;</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">ok</span>) <span style="color:#75715e">//&lt;nil&gt; false è½¬æ¢å¤±è´¥
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>i is 100</code><!-- raw HTML omitted -->
<code>i.(int): 100</code><!-- raw HTML omitted -->
<code>i.(int): 100 true</code><!-- raw HTML omitted -->
<code>i.([]int): [] false</code><!-- raw HTML omitted -->
<code>i.(interface{}): 100 true</code><!-- raw HTML omitted --></p>
<p><code>j is &lt;nil&gt;</code><!-- raw HTML omitted -->
<code>j.(int): 0 false</code><!-- raw HTML omitted -->
<code>j.(interface{}): &lt;nil&gt; false</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/t5dUd4e8aEx"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="75-type-switch">7.5 type-switch</h2>
<p>type-switchè¯­å¥æ˜¯ç±»å‹æ–­è¨€çš„å¢å¼ºä¸è¡¥å……ï¼Œtype-switchä¸switch-caseè¯­å¥æœ‰äº›ç›¸ä¼¼ï¼Œtype-switchçš„è¯­å¥ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">SimpleStmt</span>; <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span>.(<span style="color:#66d9ef">type</span>) {
<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">TypeA</span>:
	<span style="color:#f92672">...</span>
<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">TypeB</span>, <span style="color:#a6e22e">TypeC</span>:
	<span style="color:#f92672">...</span>
<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">nil</span>:
	<span style="color:#f92672">...</span>
<span style="color:#66d9ef">default</span>:
	<span style="color:#f92672">...</span>
}
</code></pre></div><p>SimpleStmtåœ¨type-switchä¸­æ˜¯å¯é€‰çš„ã€‚<!-- raw HTML omitted --></p>
<p>iæ˜¯ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡ï¼Œvæ˜¯içš„æ–­è¨€ç»“æœï¼Œæ³¨æ„i.(type)ï¼Œä¸i.(T)ä¸­çš„Tå¯ä»¥æ”¹æˆå…·ä½“ç±»å‹ä¸åŒï¼Œè¿™é‡Œå¿…é¡»å†™æˆtype, å¦‚ä¸‹ä¾‹ä¸­çš„x.(type)ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">values</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">interface</span>{}{
		<span style="color:#ae81ff">456</span>, <span style="color:#e6db74">&#34;abc&#34;</span>, <span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">0.33</span>, int32(<span style="color:#ae81ff">789</span>),
		[]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>}, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">bool</span>{}, <span style="color:#66d9ef">nil</span>,
	}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">x</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">values</span> {
		<span style="color:#75715e">// Here, v is declared once, but it denotes
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// different variables in different branches.
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">x</span>.(<span style="color:#66d9ef">type</span>) {

		<span style="color:#75715e">//case interface{}:
</span><span style="color:#75715e"></span>		<span style="color:#75715e">//fmt.Println(&#34;\ninterface{} val: &#34;, v)
</span><span style="color:#75715e"></span>		<span style="color:#75715e">//fmt.Printf(&#34;interface{} type: %T\n&#34;, v)
</span><span style="color:#75715e"></span>
		<span style="color:#66d9ef">case</span> []<span style="color:#66d9ef">int</span>: <span style="color:#75715e">// a type literal
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nint slice:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">string</span>: <span style="color:#75715e">// one type name
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nstring:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">float64</span>, <span style="color:#66d9ef">int32</span>: <span style="color:#75715e">// multiple type names
</span><span style="color:#75715e"></span>			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nnumber:&#34;</span>, <span style="color:#a6e22e">v</span>)

		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">bool</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nbool:&#34;</span>, <span style="color:#a6e22e">v</span>)

		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">nil</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nnil val: &#34;</span>, <span style="color:#a6e22e">v</span>)
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;nil type: %T\n&#34;</span>, <span style="color:#a6e22e">v</span>)

		<span style="color:#66d9ef">default</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nOthers val: &#34;</span>, <span style="color:#a6e22e">v</span>)
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Others type: %T\n&#34;</span>, <span style="color:#a6e22e">v</span>)
		}
	}
}
</code></pre></div><p><code>number: 456</code><!-- raw HTML omitted --></p>
<p><code>string: abc</code><!-- raw HTML omitted --></p>
<p><code>bool: true</code><!-- raw HTML omitted --></p>
<p><code>number: 0.33</code><!-- raw HTML omitted --></p>
<p><code>number: 789</code><!-- raw HTML omitted --></p>
<p><code>int slice: [1 2 3]</code><!-- raw HTML omitted --></p>
<p><code>Others val:  map[]</code><!-- raw HTML omitted -->
<code>Others type: map[int]bool</code><!-- raw HTML omitted --></p>
<p><code>nil val:  &lt;nil&gt;</code><!-- raw HTML omitted -->
<code>nil type: &lt;nil&gt;</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/1NYl6BGpQaK"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="76-">7.6 æ¥å£åµŒå…¥</h2>
<p>ä¸€ä¸ªæ¥å£ç±»å‹é‡Œå¯ä»¥åµŒå…¥å¦ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œä½†æ¥å£ç±»å‹ä¸èƒ½åµŒå¥—å¤šä¸ªå…·æœ‰ç›¸åŒæ–¹æ³•åçš„æ¥å£ç±»å‹ï¼Œä¹Ÿä¸èƒ½è‡ªå·±åµŒå¥—è‡ªå·±  //adm</p>
<p>æ¯”å¦‚ä¸‹é¢çš„asianæ¥å£ç±»å‹é‡ŒåµŒå…¥äº†humanæ¥å£ç±»å‹ï¼Œasianæ¥å£ç±»å‹é‡ŒåŒæ ·ä¹Ÿå£°æ˜äº†fly() erroræ–¹æ³•ï¼Œæ‰€ä»¥æ¥å£asianå’Œæ¥å£superhuman
åœ¨æ•ˆæœä¸Šæ˜¯ä¸€æ ·çš„.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">human</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span>
	<span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">man</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">man</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Man can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">superman</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can fly&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">superman</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;superman can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#75715e">//æ¥å£ç±»å‹å¯ä»¥åŒ…è£¹å…¶ä»–æ¥å£ç±»å‹ï¼Œæ¯”å¦‚asianæ¥å£ç±»å‹å¯ä»¥åŒ…å«humanæ¥å£ç±»å‹ï¼Œasianå«æœ‰humanæ‹¥æœ‰çš„æ‰€æœ‰æ–¹æ³•ã€‚
</span><span style="color:#75715e"></span><span style="color:#75715e">//å¦‚æœç»™asianå†åŠ ä¸Šä¸€ä¸ªfly()çš„æ–¹æ³•ï¼Œé‚£asianå°±æˆä¸ºè¶…çº§äºšæ´²äººäº†ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">asian</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">human</span>
	<span style="color:#75715e">//superhuman //æ¥å£ç±»å‹ä¸èƒ½åµŒå¥—å¤šä¸ªå…·æœ‰ç›¸åŒæ–¹æ³•åçš„æ¥å£ç±»å‹
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//asian //æ¥å£ç±»å‹ä¸èƒ½è‡ªå·±åµŒå¥—è‡ªå·±
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span>
}

<span style="color:#75715e">//flymanå®ç°äº†fly()æ–¹æ³•ã€‚
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">flyman</span> <span style="color:#66d9ef">struct</span>{}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">flyman</span>) <span style="color:#a6e22e">swim</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;flyman can swim&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">flyman</span>) <span style="color:#a6e22e">walk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;flyman can walk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">flyman</span>) <span style="color:#a6e22e">talk</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;flyman can talk&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">flyman</span>) <span style="color:#a6e22e">fly</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Believe me I can fly, I am singing in the sky&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">asian</span>      <span style="color:#75715e">//aæ˜¯è¶…çº§äºšæ´²äººæ¥å£ç±»å‹å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#75715e">//sä»£è¡¨è¶…äººç±»æ¥å£ç±»å‹å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#a6e22e">flyman</span>     <span style="color:#75715e">//fæ˜¯ä¸€ä¸ªflymanç±»å‹çš„å˜é‡ï¼Œflymanç±»å‹å®ç°äº†asianæ¥å£ç±»å‹çš„æ‰€æœ‰æ–¹æ³•ï¼Œflymanç±»å‹çš„å˜é‡fä¹Ÿå…·æœ‰flymanç±»å‹çš„æ‰€æœ‰æ–¹æ³•ã€‚
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">f</span>
	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">f</span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.(<span style="color:#a6e22e">human</span>) <span style="color:#75715e">//humanæ˜¯æ¥å£ç±»å‹ï¼Œaå®ç°äº†humanæ¥å£ç±»å‹çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ‰€ä»¥a.(human)æ–­è¨€æˆåŠŸ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a.(human): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">human</span>)  <span style="color:#75715e">//åŒä¸Š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s.(human): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">a</span>.(<span style="color:#a6e22e">superhuman</span>) <span style="color:#75715e">//superhumanæ˜¯æ¥å£ç±»å‹ï¼Œaå®ç°äº†superhumanæ¥å£ç±»å‹çš„æ‰€æœ‰æ–¹æ³•(flymanä¼šflyäº†)ï¼Œæ‰€ä»¥a.(superhuman)æ–­è¨€æˆåŠŸ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a.(superhuman): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">superhuman</span>)  <span style="color:#75715e">//åŒä¸Š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s.(superhuman): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#75715e">//_, ok = a.(man) //manæ˜¯ä¸€ä¸ªéæ¥å£ç±»å‹ï¼Œaçš„æ–¹æ³•è¦å’Œmançš„æ–¹æ³•å®ç°å®Œå…¨ä¸€è‡´æ‰èƒ½æ–­è¨€æˆåŠŸï¼Œmanæ²¡æœ‰å®ç°flyæ¥å£ï¼Œæ‰€ä»¥a.(man)æ–­è¨€å¤±è´¥ã€‚ impossible type assertion: man does not implement asian (missing fly method)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(&#34;a.(man): &#34;, ok)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//_, ok = s.(man) //åŒä¸Šimpossible type assertion:man does not implement superhuman (missing fly method)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//fmt.Println(&#34;s.(man): &#34;, ok)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">a</span>.(<span style="color:#a6e22e">superman</span>) <span style="color:#75715e">//supermanæ˜¯ä¸€ä¸ªéæ¥å£ç±»å‹ï¼Œaçš„åŠ¨æ€ç±»å‹æ˜¯flymanï¼Œä¸æ˜¯supermanï¼Œæ‰€ä»¥a.(superman)æ–­è¨€å¤±è´¥
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a.(superman): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">superman</span>) <span style="color:#75715e">//åŒä¸Š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s.(superman): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">a</span>.(<span style="color:#a6e22e">flyman</span>) <span style="color:#75715e">//flymanæ˜¯ä¸€ä¸ªéæ¥å£ç±»å‹ï¼Œaçš„åŠ¨æ€ç±»å‹æ˜¯flymanï¼Œæ‰€ä»¥a.(flyman)æ–­è¨€æˆåŠŸ
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a.(flyman): &#34;</span>, <span style="color:#a6e22e">ok</span>)

	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> = <span style="color:#a6e22e">s</span>.(<span style="color:#a6e22e">flyman</span>) <span style="color:#75715e">//åŒä¸Š
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;s.(flyman): &#34;</span>, <span style="color:#a6e22e">ok</span>)
}
</code></pre></div><p><code>a.(human):  true</code><!-- raw HTML omitted -->
<code>s.(human):  true</code><!-- raw HTML omitted -->
<code>a.(superhuman):  true</code><!-- raw HTML omitted -->
<code>s.(superhuman):  true</code><!-- raw HTML omitted -->
<code>a.(superman):  false</code><!-- raw HTML omitted -->
<code>s.(superman):  false</code><!-- raw HTML omitted -->
<code>a.(flyman):  true</code><!-- raw HTML omitted -->
<code>s.(flyman):  true</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/CzUcp96U9HR"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h2 id="77-">7.7 æ¥å£å˜é‡æ¯”è¾ƒ</h2>
<p>æ¥å£å˜é‡è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœç›¸ç­‰çš„æ¡ä»¶åªæœ‰å¦‚ä¸‹2ä¸ªï¼š<!-- raw HTML omitted --></p>
<ol>
<li>2ä¸ªæ¥å£å˜é‡çš„å€¼å‡ä¸ºnil<!-- raw HTML omitted --></li>
<li>2ä¸ªæ¥å£å˜é‡å…·æœ‰ç›¸åŒçš„åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼<!-- raw HTML omitted --></li>
</ol>
<p>å°†7.6ä¸­çš„mainå‡½æ•°æ”¹æˆå¦‚ä¸‹å¯ä»¥çœ‹åˆ°æ¥å£å˜é‡æ¯”è¾ƒç»“æœçš„ä¾‹å­  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#a6e22e">asian</span>      <span style="color:#75715e">//aæ˜¯è¶…çº§äºšæ´²äººæ¥å£ç±»å‹å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">superhuman</span> <span style="color:#75715e">//sä»£è¡¨è¶…äººç±»æ¥å£ç±»å‹å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#a6e22e">flyman</span>     <span style="color:#75715e">//fæ˜¯ä¸€ä¸ªflymanç±»å‹çš„å˜é‡ï¼Œflymanç±»å‹å®ç°äº†asianæ¥å£ç±»å‹çš„æ‰€æœ‰æ–¹æ³•ï¼Œflymanç±»å‹çš„å˜é‡fä¹Ÿå…·æœ‰flymanç±»å‹çš„æ‰€æœ‰æ–¹æ³•ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sm</span> <span style="color:#a6e22e">superman</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;s:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34; a == s&#34;</span>, <span style="color:#a6e22e">a</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">s</span>) <span style="color:#75715e">//a: &lt;nil&gt; s: &lt;nil&gt;  a == s true. a å’Œ sçš„å€¼å‡ä¸ºnil, ç¬¦åˆæ¡ä»¶1
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">f</span>
	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">f</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;s:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34; a == s&#34;</span>, <span style="color:#a6e22e">a</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">s</span>) <span style="color:#75715e">//a: {} s: {}  a == s true. a å’Œ så‡æŒ‡å‘åŒä¸€ä¸ªå˜é‡fï¼Œç¬¦åˆæ¡ä»¶2
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">f</span>
	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">sm</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;a:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;s:&#34;</span>, <span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34; a == s&#34;</span>, <span style="color:#a6e22e">a</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">s</span>) <span style="color:#75715e">//a: {} s: {}  a == s false. få’Œsmè™½ç„¶å‡æœ‰ç›¸åŒçš„æ–¹æ³•å®ç°ï¼Œä½†æ˜¯å®ƒä»¬å¯¹äºaå’Œsæ¥è¯´å±äºä¸åŒçš„åŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ï¼Œæ‰€ä»¥æ¯”è¾ƒç»“æœä¸åŒï¼Œ ä¸ç¬¦åˆæ¡ä»¶2ã€‚
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>a: &lt;nil&gt; s: &lt;nil&gt;  a == s true</code><!-- raw HTML omitted -->
<code>a: {} s: {}  a == s true</code><!-- raw HTML omitted -->
<code>a: {} s: {}  a == s false</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/U7_ncGQz_jS"><strong>âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  P L A Y A R O U N D ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸  ğŸ§°  ğŸ“Ÿ âš™ï¸</strong></a></p>
<h1 id="8">8.é€šé“</h1>
<p>é€šè¿‡å…±äº«å†…å­˜é€šä¿¡å’Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜æ˜¯2ç§ä¸åŒçš„ç¼–ç¨‹æ–¹å¼ã€‚é€šè¿‡å…±äº«å†…å­˜é€šä¿¡éœ€è¦ä½¿ç”¨äº’æ–¥é”ä¹‹ç±»çš„åŒæ­¥æ–¹å¼æ¥é˜²æ­¢æ•°æ®ç«äº‰ï¼Œ
è€Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜åˆ™å¯ä»¥é€šè¿‡é€šé“channelçš„æ–¹å¼æ¥å®ç°ï¼Œå³é€šè¿‡channel(é€šé“)æ¥å®ç°goroutine(å¹¶å‘)ä¹‹é—´çš„å…±äº«å†…å­˜ã€‚</p>
<h2 id="81-">8.1 ä»€ä¹ˆæ˜¯é€šé“</h2>
<p>é€šé“(channel)çš„å…³é”®å­—ä¸ºchanï¼Œå¯ä»¥æŠŠé€šé“çœ‹ä½œFIFO(first in first out)ä¸€æ ·çš„æ•°æ®é˜Ÿåˆ—ã€‚åŒsliceï¼Œmapä¸€æ ·ï¼Œ
chanæ˜¯Goè¯­è¨€çš„å†…ç½®ç±»å‹ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦å¯¼å…¥åŒ…ï¼Œä½†æ˜¯åƒå…¶ä»–çš„åŒæ­¥æ–¹å¼ï¼ˆæ¯”å¦‚WaitGroupï¼‰åˆ™éœ€è¦å¯¼å…¥syncæˆ–sync/atomicåŒ…ã€‚
chanæœ‰ä¸åŒçš„ç±»å‹ï¼Œchanä¼ è¾“çš„æ•°æ®ç±»å‹è¦å’Œchançš„ç±»å‹ä¸€è‡´ï¼Œå‡è®¾Tæ˜¯chançš„ç±»å‹ï¼š<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
</blockquote>
<p><code>chan T</code> Â Â è¡¨ç¤ºä¸€ä¸ªåŒå‘é€šé“ï¼Œå³å¯ä»¥å¾€é€šé“å‘é€Tç±»å‹çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä»é€šé“è¯»å–Tç±»å‹çš„æ•°æ®ã€‚<!-- raw HTML omitted -->
<code>chan&lt;- T</code>è¡¨ç¤ºä¸€ä¸ªåªèƒ½å¾€é€šé“å‘é€Tç±»å‹æ•°æ®çš„å•å‘é€šé“ã€‚ä»æ­¤é€šé“é‡Œè¯»å–æ•°æ®ä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯âŒ<!-- raw HTML omitted -->
<code>&lt;-chan T</code>è¡¨ç¤ºä¸€ä¸ªåªèƒ½ä»é€šé“è¯»å–Tç±»å‹æ•°æ®çš„å•å‘é€šé“ã€‚å¾€æ­¤é€šé“é‡Œå‘é€æ•°æ®ä¼šå¼•èµ·ç¼–è¯‘é”™è¯¯âŒ<!-- raw HTML omitted --></p>
<p><code>chan T</code>ç±»å‹çš„é€šé“å€¼å¯ä»¥éšå¼çš„è½¬æ¢ä¸º<code>chan&lt;- T</code>æˆ–<code>&lt;-chan T</code>ç±»å‹çš„å€¼ã€‚<!-- raw HTML omitted -->
<code>chan&lt;- T</code>å’Œ<code>&lt;-chan T</code>ç±»å‹çš„å€¼ä¸èƒ½è½¬æ¢ä¸º<code>chan T</code>ç±»å‹çš„å€¼;<!-- raw HTML omitted -->
<code>chan&lt;- T</code>å’Œ<code>&lt;-chan T</code>ç±»å‹çš„å€¼ä¹Ÿä¸èƒ½äº’ç›¸è½¬æ¢ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„åŒå‘é€šé“å˜é‡bidirCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// or bidirCh := chan int(nil)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„send onlyçš„å•å‘é€šé“å˜é‡sendOnlyCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sendOnlyCh</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„receive onlyçš„å•å‘é€šé“å˜é‡receiveOnlyCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">receiveOnlyCh</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;bidirCh is nil? %t\n&#34;</span>, <span style="color:#a6e22e">bidirCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;bidirCh type is: %#v\n\n&#34;</span>, <span style="color:#a6e22e">bidirCh</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sendOnlyCh is nil? %t\n&#34;</span>, <span style="color:#a6e22e">sendOnlyCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sendOnlyCh type is: %#v\n\n&#34;</span>, <span style="color:#a6e22e">sendOnlyCh</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;receiveOnlyCh is nil? %t\n&#34;</span>, <span style="color:#a6e22e">receiveOnlyCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;receiveOnlyCh type is: %#v\n&#34;</span>, <span style="color:#a6e22e">receiveOnlyCh</span>)

	<span style="color:#75715e">//chan int å‹çš„åŒå‘é€šé“çš„å˜é‡å¯ä»¥éšå¼çš„è½¬æ¢ä¸ºchan&lt;- intæˆ–&lt;-chan intå‹çš„å•å‘é€šé“çš„å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">sendOnlyCh</span> = <span style="color:#a6e22e">bidirCh</span>    <span style="color:#75715e">//ä¹Ÿå¯æ˜¾å¼åœ°è½¬æ¢:  sendOnlyCh := (chan&lt;- int)(bidirCh)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">receiveOnlyCh</span> = <span style="color:#a6e22e">bidirCh</span> <span style="color:#75715e">//ä¹Ÿå¯æ˜¾å¼åœ°è½¬æ¢:  receiveOnlyCh := (&lt;-chan int)(bidirCh)
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>bidirCh is nil? true</code><!-- raw HTML omitted -->
<code>bidirCh type is: (chan int)(nil)</code><!-- raw HTML omitted --></p>
<p><code>sendOnlyCh is nil? true</code><!-- raw HTML omitted -->
<code>sendOnlyCh type is: (chan&lt;- int)(nil)</code><!-- raw HTML omitted --></p>
<p><code>receiveOnlyCh is nil? true</code><!-- raw HTML omitted -->
<code>receiveOnlyCh type is: (&lt;-chan int)(nil)</code><!-- raw HTML omitted --></p>
<p><a href=""><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="82-">8.2 åˆ›å»ºé€šé“</h2>
<p>8.1çš„ä¾‹å­ä¸­æˆ‘ä»¬åˆ›å»ºçš„3ä¸ªé€šé“bidirCh, sendOnlyChå’ŒreceiveOnlyChçš„å€¼å‡ä¸ºnilï¼Œå³ç³»ç»Ÿä¸ºè¿™3ä¸ªå£°æ˜çš„å˜é‡åˆ†é…äº†åœ°å€ï¼Œ
ä½†å˜é‡å†…éƒ¨çš„æˆå‘˜å€¼è¿˜å‡ä¸º0å€¼ã€‚æˆ‘ä»¬å¯ä»¥ç”¨make()å‡½æ•°ä¸ºè¿™äº›é€šé“åˆ†é…ç¼“å­˜å¤§å°ã€‚<!-- raw HTML omitted --></p>
<p>make(chan int, 10) //åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º10ç±»å‹ä¸ºintçš„é€šé“<!-- raw HTML omitted -->
make(chan int, 0)  //åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º0ç±»å‹ä¸ºintçš„é€šé“<!-- raw HTML omitted --></p>
<p>makeå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯0ï¼Œæ‰€ä»¥make(chan int, 0)ä¹Ÿå¯ä»¥å†™æˆmake(chan int)ã€‚å®¹é‡ä¸º0çš„é€šé“ç§°ä¸ºæ— ç¼“å†²çš„é€šé“ï¼Œå¦åˆ™ç§°ä¹‹ä¸ºæœ‰ç¼“å†²çš„é€šé“<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„åŒå‘é€šé“å˜é‡bidirCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// or bidirCh := chan int(nil)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„send onlyçš„å•å‘é€šé“å˜é‡sendOnlyCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sendOnlyCh</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„receive onlyçš„å•å‘é€šé“å˜é‡receiveOnlyCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">receiveOnlyCh</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>

	<span style="color:#75715e">//å°†bidircChåˆ†é…æˆä¸€ä¸ªæ— ç¼“å†²çš„åŒå‘é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bidirCh</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//æˆ–è€…bidirCh = make(chan int)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//å°†sendOnlyChåˆ†é…æˆä¸€ä¸ªæœ‰20ä¸ªæ•´æ•°ç¼“å†²çš„send onlyçš„é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">sendOnlyCh</span> = make(<span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">20</span>)

	<span style="color:#75715e">//å°†receiveOnlyChåˆ†é…æˆä¸€ä¸ªæœ‰30ä¸ªæ•´æ•°ç¼“å†²çš„receive onlyçš„é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">receiveOnlyCh</span> = make(<span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">30</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;bidirCh is nil? %t\n&#34;</span>, <span style="color:#a6e22e">bidirCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sendOnlyCh is nil? %t\n&#34;</span>, <span style="color:#a6e22e">sendOnlyCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;receiveOnlyCh is nil? %t\n\n&#34;</span>, <span style="color:#a6e22e">receiveOnlyCh</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;bidirCh len %d cap:%d\n&#34;</span>, len(<span style="color:#a6e22e">bidirCh</span>), cap(<span style="color:#a6e22e">bidirCh</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sendOnlyCh len %d cap:%d\n&#34;</span>, len(<span style="color:#a6e22e">sendOnlyCh</span>), cap(<span style="color:#a6e22e">sendOnlyCh</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;receiveOnlyCh len %d cap:%d\n\n&#34;</span>, len(<span style="color:#a6e22e">receiveOnlyCh</span>), cap(<span style="color:#a6e22e">receiveOnlyCh</span>))

	<span style="color:#75715e">//chan int å‹çš„åŒå‘é€šé“çš„å˜é‡å¯ä»¥éšå¼çš„è½¬æ¢ä¸ºchan&lt;- intæˆ–&lt;-chan intå‹çš„å•å‘é€šé“çš„å˜é‡
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">sendOnlyCh</span> = <span style="color:#a6e22e">bidirCh</span>    <span style="color:#75715e">//ä¹Ÿå¯æ˜¾å¼åœ°è½¬æ¢:  sendOnlyCh := (chan&lt;- int)(bidirCh)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">receiveOnlyCh</span> = <span style="color:#a6e22e">bidirCh</span> <span style="color:#75715e">//ä¹Ÿå¯æ˜¾å¼åœ°è½¬æ¢:  receiveOnlyCh := (chan&lt;- int)(bidirCh)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//æ³¨æ„: è¿™æ—¶çš„sendOnlyChå’ŒreceiveOnlyChå‡æ˜¯ç”±bidirChè½¬æ¢è€Œæ¥ï¼Œå®ƒä»¬çš„å®¹é‡capå·²å˜æˆbidirChçš„å®¹é‡ã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;sendOnlyCh len %d cap:%d\n&#34;</span>, len(<span style="color:#a6e22e">sendOnlyCh</span>), cap(<span style="color:#a6e22e">sendOnlyCh</span>))
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;receiveOnlyCh len %d cap:%d\n&#34;</span>, len(<span style="color:#a6e22e">receiveOnlyCh</span>), cap(<span style="color:#a6e22e">receiveOnlyCh</span>))
}
</code></pre></div><p><code>bidirCh is nil? false</code><!-- raw HTML omitted -->
<code>sendOnlyCh is nil? false</code><!-- raw HTML omitted -->
<code>receiveOnlyCh is nil? false</code><!-- raw HTML omitted --></p>
<p><code>bidirCh len 0 cap:0</code><!-- raw HTML omitted -->
<code>sendOnlyCh len 0 cap:20</code><!-- raw HTML omitted -->
<code>receiveOnlyCh len 0 cap:30</code><!-- raw HTML omitted --></p>
<p><code>sendOnlyCh len 0 cap:0</code><!-- raw HTML omitted -->
<code>receiveOnlyCh len 0 cap:0</code><!-- raw HTML omitted --></p>
<p><a href=""><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="83-">8.3 å‘é€/æ¥æ”¶æ•°æ®</h2>
<p><strong>å¯¹é€šé“çš„æ ‡è¯†ç¬¦&lt;-çš„è¯´æ˜:<!-- raw HTML omitted --></strong></p>
<ol>
<li>æŠŠ&lt;-æ”¾åœ¨chançš„å·¦è¾¹æˆ–å³è¾¹è¡¨ç¤ºé€šé“ç±»å‹æ˜¯å‘é€è¿˜æ˜¯æ¥æ”¶ï¼Œæ¯”å¦‚ï¼š<!-- raw HTML omitted -->
<code>var sch chan&lt;- int</code>ï¼š&lt;-æŒ‡å‘é€šé“ï¼Œä»£è¡¨schæ˜¯ä¸€ä¸ªsend onlyé€šé“ç±»å‹çš„å˜é‡<!-- raw HTML omitted -->
<code>var rch &lt;-chan int</code>:Â   &lt;-æºè‡ªé€šé“ï¼Œä»£è¡¨rchæ˜¯ä¸€ä¸ªreceive onlyé€šé“ç±»å‹çš„å˜é‡<!-- raw HTML omitted --></li>
<li>æŠŠ&lt;-æ”¾åœ¨é€šé“å˜é‡çš„å·¦é¢æˆ–å³é¢è¡¨ç¤ºå¯¹é€šé“è¿›è¡Œæ¥æ”¶æˆ–å‘é€ï¼Œæ¯”å¦‚ï¼š<!-- raw HTML omitted -->
<code>sch &lt;- 5</code>: &lt;-æŒ‡å‘schï¼Œè¡¨ç¤ºå°†æ•°ç»„5å‘é€åˆ°sché€šé“<!-- raw HTML omitted -->
<code>i &lt;- sch</code>: &lt;-æºè‡ªschï¼Œè¡¨ç¤ºä»sché€šé“é‡Œæ¥æ”¶ä¸€ä¸ªæ•°å­—åˆ°å˜é‡i<!-- raw HTML omitted --></li>
</ol>
<p>ä¸‹é¢çš„ç¨‹åºæ¼”ç¤ºäº†ä»ä¸€ä¸ªæ— ç¼“å†²çš„bidirChé€šé“å‘é€å¹¶æ¥æ”¶æ•°æ®çš„è¿‡ç¨‹ï¼Œsenderç”¨æ¥å‘bidirChå‘é€æ•°æ®ï¼Œ
receiverç”¨æ¥ä»bidirChæ¥æ”¶æ•°æ®ã€‚ç”±äºbidirChæ˜¯æ— ç¼“å†²çš„é€šé“ï¼Œsenderæ¯å‘å®Œä¸€ä¸ªæ•°æ®åéƒ½ä¼šblock
åœ¨bidirChç«¯ç­‰å¾…æ•°æ®è¢«receiveræ¥æ”¶ï¼Œreceiveræ¥æ”¶å®Œæ•°æ®åä¹Ÿä¼šblockåœ¨bidirChç«¯ç­‰å¾…senderå†æ¬¡
å‘é€æ•°æ®ï¼Œä¾æ¬¡å¾ªç¯ï¼Œç›´åˆ°senderå’ŒreceiveræŠŠåˆ‡ç‰‡sæ¶ˆè€—å®Œä¸ºæ­¢ã€‚<!-- raw HTML omitted -->
ç¨‹åºçš„ç¬¬35è¡Œå’Œ38è¡Œåˆ†åˆ«ç”¨å…³é”®å­—goè°ƒç”¨äº†senderå’Œreceiverçš„å‡½æ•°ï¼Œè¿™ç›¸å½“äºåœ¨ç¨‹åºé‡Œèµ·äº†ä¸€ä¸ªâ€œçº¿ç¨‹â€ï¼Œ
è¿™é‡Œæˆ‘ä»¬å«goroutineï¼Œmainå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªgoroutineï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºmain goroutineã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nsend block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">v</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;send %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nrecv block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;recv %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•°æ®ç±»å‹ä¸ºintçš„åŒå‘é€šé“å˜é‡bidirCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// or bidirCh := chan int(nil)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//ä¸ºbidircChåˆ†é…ä¸€ä¸ªæ— ç¼“å†²çš„åŒå‘é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bidirCh</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//æˆ–è€…bidirCh = make(chan int)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>}

	<span style="color:#75715e">//å¯åŠ¨senderçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">bidirCh</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">//å¯åŠ¨receiverçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">bidirCh</span>)

	<span style="color:#75715e">//è®©main goroutine å»¶è¿Ÿ5ç§’é€€å‡ºï¼Œä»¥ä¾¿ç­‰å¾…senderå’Œreceiverçš„goroutineå®Œæˆã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">5</span>)
}
</code></pre></div><p><code>recv 5</code><!-- raw HTML omitted -->
<code>send 5</code><!-- raw HTML omitted -->
<code>send 4</code><!-- raw HTML omitted -->
<code>recv 4</code><!-- raw HTML omitted -->
<code>recv 3</code><!-- raw HTML omitted -->
<code>send 3</code><!-- raw HTML omitted -->
<code>send 2</code><!-- raw HTML omitted -->
<code>recv 2</code><!-- raw HTML omitted -->
<code>recv 1</code><!-- raw HTML omitted -->
<code>send 1</code><!-- raw HTML omitted -->
<code>send 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted --></p>
<p>sendå’Œrecvå¯¹æ•°å­—çš„å‘é€ä¸æ¥æ”¶éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œè¯´æ˜æ— ç¼“å†²çš„é€šé“bidirChå…·æœ‰åŒæ­¥çš„æ•ˆæœï¼Œ
åœ¨Goè¯­è¨€ä¸­æ— ç¼“å†²çš„é€šé“ä¹Ÿç§°ä½œ<strong>åŒæ­¥é€šé“</strong>ã€‚<!-- raw HTML omitted -->
sendå’Œrecvåœ¨å¤„ç†ä¸åŒçš„æ•°å­—æ—¶å®ƒä»¬å‡ºç°çš„å…ˆåé¡ºåºä¸åŒï¼Œæ¯”å¦‚æ•°å­—1ï¼Œ3ï¼Œ5æ˜¯sendåœ¨recvå‰ï¼Œ
æ•°å­—2ï¼Œ4æ˜¯recvåœ¨sendå‰ï¼Œå¯¹äºè¿™ç§xäº‹ä»¶å’Œyäº‹ä»¶å‘ç”Ÿé¡ºåºä¸å›ºå®šçš„æƒ…å†µï¼Œæˆ‘ä»¬å°±å«åšå¹¶å‘ã€‚</p>
<p>åœ¨æ‰“å°ä¸­å¯ä»¥çœ‹åˆ°ä¸€äº›å¥‡æ€ªçš„ç°è±¡ï¼Œå¯¹äºæ•°å­—1ï¼Œ3ï¼Œ5çš„æ“ä½œå‡æ˜¯sendåœ¨recvå‰ï¼Œä½†æ˜¯2å’Œ4çš„recvåœ¨sendå‰ã€‚
ä»¥recv2åœ¨send2ä¹‹å‰ä¸ºä¾‹ï¼Œè¿™å¹¶ä¸æ˜¯è¯´senderè¿˜æœªå‘é€æ•°å­—2æ—¶receiverå°±å·²ç»æ¥æ”¶åˆ°äº†æ•°å­—2ï¼Œè€Œæ˜¯å› ä¸ºåœ¨
senderå‘é€å®Œæ•°å­—1ä¹‹å<code>ch &lt;- v</code>ä¼šblockä½senderçš„goroutineï¼Œç»§è€Œsenderçš„goroutineä»è¿è¡ŒçŠ¶æ€è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œ
ç„¶åreceiverçš„goroutineè¢«å”¤é†’å¹¶æ¥æ”¶senderå‘é€åˆ°é€šé“çš„æ•°å­—1ï¼Œä¹‹åreceiverçš„<code>v := &lt;-ch</code>ä¼šblockä½receiver
çš„goroutineï¼Œè¿™ä¸ªæ“ä½œå‘ç”Ÿåœ¨senderå‘é€2ä¹‹å‰ï¼Œåœ¨senderå‘é€æ•°å­—2ä¹‹å‰receiverå°±å·²ç»blockåœ¨é€šé“çš„å¦ä¸€ç«¯å‡†å¤‡å¥½äº†æ¥æ”¶çš„æ“ä½œï¼Œ</p>
<p><a href=""><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="84-">8.4 å…³é—­é€šé“</h2>
<p>å‡è®¾é€šé“å˜é‡ä¸ºch,å…³é—­é€šé“çš„æ“ä½œä¸ºï¼š close(ch), ä½¿ç”¨close()å‡½æ•°éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š<!-- raw HTML omitted --></p>
<ol>
<li>closeä¸€ä¸ªå€¼ä¸ºnilçš„é€šé“ä¼šå¯¼è‡´panicã€‚<!-- raw HTML omitted --></li>
<li>closeä¸€ä¸ªå·²ç»close()çš„é€šé“ä¼šå¯¼è‡´panicå¼‚å¸¸ã€‚<!-- raw HTML omitted --></li>
<li>åœ¨å‘ä¸€ä¸ªå·²ç»close()çš„é€šé“å‘é€æ•°æ®æ—¶ä¼šå¯¼è‡´panicã€‚<!-- raw HTML omitted --></li>
<li>close()ä¸èƒ½å…³é—­receive-onlyç±»å‹çš„é€šé“ã€‚<!-- raw HTML omitted --></li>
<li>ä»ä¸€ä¸ªå·²ç»close()çš„é€šé“æ¥æ”¶æ•°æ®æ—¶ä¼šäº§ç”Ÿæ— å°½çš„0å€¼ã€‚<!-- raw HTML omitted --></li>
</ol>
<p>ä¸‹ä¾‹ç¨‹åºçš„æ³¨é‡Šæ ‡å‡ºäº†ä»¥ä¸Šitem1 ï½ item4çš„4ç§é”™è¯¯æ“ä½œï¼Œitem5çš„æ— å°½0å€¼å¯ä»¥çœ‹ä¸‹ä¾‹ç¨‹åºçš„æ‰“å°è¾“å‡ºã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>) {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nsend block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">v</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;send %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
	close(<span style="color:#a6e22e">ch</span>)
	<span style="color:#75715e">//close(ch) //item2 âŒ panic: close of closed channel
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- 99  //item3 âŒ panic: send on closed channel
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nrecv block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#75715e">//close(ch) //item4 âŒ invalid operation: close(ch) (cannot close receive-only channel)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;recv %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªé€šé“æ•°æ®ç±»å‹ä¸ºintçš„åŒå‘é€šé“bidirCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// or bidirCh := chan int(nil)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//close(bidirCh) //item1 âŒ panic: close of nil channel
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//å°†bidircChåˆ†é…æˆä¸€ä¸ªæ— ç¼“å†²çš„åŒå‘é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bidirCh</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//æˆ–è€…bidirCh = make(chan int)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>}

	<span style="color:#75715e">//å¯åŠ¨senderçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">bidirCh</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">//å¯åŠ¨receiverçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">bidirCh</span>)

	<span style="color:#75715e">//è®©main goroutine å»¶è¿Ÿ5ç§’é€€å‡ºï¼Œä»¥ä¾¿ç­‰å¾…senderå’Œreceiverçš„goroutineå®Œæˆã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">5</span>)
}
</code></pre></div><p><code>recv 5</code><!-- raw HTML omitted -->
<code>send 5</code><!-- raw HTML omitted -->
<code>send 4</code><!-- raw HTML omitted -->
<code>recv 4</code><!-- raw HTML omitted -->
<code>recv 3</code><!-- raw HTML omitted -->
<code>send 3</code><!-- raw HTML omitted -->
<code>send 2</code><!-- raw HTML omitted -->
<code>recv 2</code><!-- raw HTML omitted -->
<code>recv 1</code><!-- raw HTML omitted -->
<code>send 1</code><!-- raw HTML omitted -->
<code>send 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>recv 0</code><!-- raw HTML omitted -->
<code>... </code><!-- raw HTML omitted --></p>
<p>ä¸Šé¢çš„æ‰“å°å‡ºç°äº†å¾ˆå¤š<code>recv 0</code>çš„æ‰“å°ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­ç©¶ç«Ÿå“ªä¸€ä¸ªæ˜¯senderå‘é€çš„é‚£äº›æ˜¯é€šé“close()ä¹‹åè¯»å‡ºæ¥çš„ï¼Œ
ä¸‹ä¸€èŠ‚çš„ä¾‹å­ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><a href="https://play.golang.org/p/kkGOj6tG-sJ"><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<p>Goè¯­è¨€ä¸­çš„é€šé“åœ¨ä½¿ç”¨å®Œæ¯•åä¸å¿…éå¾—ä½¿ç”¨close()å‡½æ•°æ¥å…³é—­é€šé“ï¼ŒGCä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å›æ”¶ä¸å†è¢«å¼•ç”¨çš„é€šé“ï¼Œ
é‚£close()å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢: close()å¯ä»¥é€šçŸ¥é€šé“çš„æ¥æ”¶è€…åœ¨æ¥æ”¶åˆ°æŸä¸€ä¸ªæ•°æ®ååç»­å†æ¥æ”¶çš„æ•°æ®å°†ä¸å†æœ‰æ•ˆã€‚<!-- raw HTML omitted -->
äº‹å®ä¸Šä»é€šé“æ¥æ”¶æ•°æ®è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„boolå˜é‡ï¼Œç”¨äºåˆ¤æ–­è¿™ä¸ªæ•°æ®æ˜¯å¦æ˜¯ä»ä»é€šé“é‡Œè¯»å–å‡ºæ¥çš„ï¼Œè¿™æ ·å°±èƒ½è§£å†³ä¸Šé¢é‡åˆ°çš„
ä¸ç¡®å®šå“ªä¸ª<code>recv 0</code> æ˜¯senderå‘é€çš„é—®é¢˜ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­é‡Œçš„æ¥æ”¶è€…å°†åˆ¤æ–­ä»å½“å‰é€šé“é‡Œè¯»å–æ•°æ®å¦‚æœä¸æ˜¯trueçš„è¯å°†ç»ˆæ­¢æ¥æ”¶é€šé“çš„æ•°æ®ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>) {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nsend block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">v</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;send %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
	close(<span style="color:#a6e22e">ch</span>)
	<span style="color:#75715e">//close(ch) //item2 âŒ panic: close of closed channel
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- 99  //item3 âŒ panic: send on closed channel
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> {
		<span style="color:#75715e">//fmt.Println(&#34;\nrecv block&#34;)
</span><span style="color:#75715e"></span>		<span style="color:#75715e">//close(ch) //item4 âŒ invalid operation: close(ch) (cannot close receive-only channel)
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ok</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span> {
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;recv %d %t\n&#34;</span>, <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span>)
		} <span style="color:#66d9ef">else</span> {
			<span style="color:#66d9ef">break</span>
		}
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">//å£°æ˜ä¸€ä¸ªé€šé“æ•°æ®ç±»å‹ä¸ºintçš„åŒå‘é€šé“bidirCh
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span> <span style="color:#75715e">// or bidirCh := chan int(nil)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//close(bidirCh) //item1 âŒ panic: close of nil channel
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//å°†bidircChåˆ†é…æˆä¸€ä¸ªæ— ç¼“å†²çš„åŒå‘é€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">bidirCh</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//æˆ–è€…bidirCh = make(chan int)
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>}

	<span style="color:#75715e">//å¯åŠ¨senderçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">bidirCh</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">//å¯åŠ¨receiverçš„goroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">bidirCh</span>)

	<span style="color:#75715e">//è®©main goroutine å»¶è¿Ÿ5ç§’é€€å‡ºï¼Œä»¥ä¾¿ç­‰å¾…senderå’Œreceiverçš„goroutineå®Œæˆã€‚
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">5</span>)
}
</code></pre></div><p><code>recv 5 true</code><!-- raw HTML omitted -->
<code>send 5</code><!-- raw HTML omitted -->
<code>send 4</code><!-- raw HTML omitted -->
<code>recv 4 true</code><!-- raw HTML omitted -->
<code>recv 3 true</code><!-- raw HTML omitted -->
<code>send 3</code><!-- raw HTML omitted -->
<code>send 2</code><!-- raw HTML omitted -->
<code>recv 2 true</code><!-- raw HTML omitted -->
<code>recv 1 true</code><!-- raw HTML omitted -->
<code>send 1</code><!-- raw HTML omitted -->
<code>send 0</code><!-- raw HTML omitted -->
<code>recv 0 true</code><!-- raw HTML omitted --></p>
<p>ä½¿ç”¨close()å‡½æ•°å¹¶é…åˆæ¥æ”¶è€…å¯¹æ¥æ”¶æ•°æ®çš„true/falseçš„åˆ¤æ–­ï¼Œå¯ä»¥æœ‰æ•ˆæ§åˆ¶é€šè¿‡é€šé“è¦å‘é€æˆ–æ¥æ”¶çš„æ•°æ®ã€‚</p>
<p>å¯¹äºåœ¨æœ¬èŠ‚åˆšå¼€å§‹æåˆ°çš„ä»¥ä¸‹3ç§å¯¹é€šé“çš„æ“ä½œä¼šå¯¼è‡´panicçš„æƒ…å†µï¼Œéƒ½å¯ä»¥å…ˆä»é€šé“è¯»å–å‡ºä¸€ä¸ªæ•°æ®å¹¶åˆ¤æ–­å…¶
æ˜¯å¦ä¸ºtrueçš„æ–¹å¼å†æ‰§è¡Œä»¥ä¸‹3ç§closeé€šé“çš„æ–¹å¼ï¼Œä»¥é¿å…äº§ç”Ÿpanic:<!-- raw HTML omitted --></p>
<ol>
<li>closeä¸€ä¸ªå€¼ä¸ºnilçš„é€šé“ä¼šå¯¼è‡´panicã€‚<!-- raw HTML omitted --></li>
<li>closeä¸€ä¸ªå·²ç»close()çš„é€šé“ä¼šå¯¼è‡´panicå¼‚å¸¸ã€‚<!-- raw HTML omitted --></li>
<li>åœ¨å‘ä¸€ä¸ªå·²ç»close()çš„é€šé“å‘é€æ•°æ®æ—¶ä¼šå¯¼è‡´panicã€‚<!-- raw HTML omitted --></li>
</ol>
<p><a href="https://play.golang.org/p/kkGOj6tG-sJ"><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="84-timesleep">8.4 ç”¨é€šé“æ›¿æ¢time.Sleep</h2>
<p>åœ¨mainå‡½æ•°ç»“å°¾åŠ ä¸€ä¸ª<code>time.Sleep(time.Second * 5)</code>æ˜¯ä¸ºäº†è°ƒè¯•senderå’Œreceiverçš„goroutineï¼Œä½†æ˜¯æ­£å¼ç¼–å†™ç¨‹åºæ—¶è¿™ä¸ªtime.Sleep
çš„å»¶æ—¶ä¸åˆ©äºç¨‹åºçš„å¿«é€ŸğŸ”œæ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾€receiverçš„goroutineä¼ å…¥ä¸€ä¸ªsend onlyçš„doneé€šé“ï¼Œä¹‹åmainå‡½æ•°é˜»å¡åœ¨doneçš„ä¸€ç«¯
è¯»å–æ•°æ®ã€‚å½“receiverå‡½æ•°æ¥æ”¶å®Œché€šé“çš„æ•°æ®åï¼Œå¯ä»¥åƒdoneé€šé“å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åmainå‡½æ•°å°±ä»doneé€šé“æ¥æ”¶åˆ°äº†receiverå†™å…¥
çš„æ•°æ®ï¼Œæ•´ä¸ªç¨‹åºç»“æŸã€‚<!-- raw HTML omitted -->
è¿™ç§goroutineåƒé€šé“å†™å…¥æ•°æ®å¹¶ç”±main goroutineè¯»å–çš„æ–¹æ³•ä¹Ÿé€‚åˆè§£å†³go å¯åŠ¨goroutineæ— æ³•å–å¾—è¿”å›å€¼çš„é—®é¢˜ã€‚goroutineå¯ä»¥é€šè¿‡
åƒä¸€ä¸ªé€šé“å†™å…¥æƒ³è¦è¿”å›ğŸ”™ç»™main goroutineçš„æ•°æ®å¹¶ç”±main goroutineè¯»å–å³å¯ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>) {

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">v</span>
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;send %d\n&#34;</span>, <span style="color:#a6e22e">v</span>)
	}
	close(<span style="color:#a6e22e">ch</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">done</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#66d9ef">for</span> {
		<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ok</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span> {
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;recv %d %t\n&#34;</span>, <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span>)
		} <span style="color:#66d9ef">else</span> {
			<span style="color:#66d9ef">break</span>
		}
	}
	<span style="color:#a6e22e">done</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;**********************************&#34;</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bidirCh</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">done</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">0</span>)

	<span style="color:#a6e22e">bidirCh</span> = make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>)

	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>}

	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">sender</span>(<span style="color:#a6e22e">bidirCh</span>, <span style="color:#a6e22e">s</span>)

	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">receiver</span>(<span style="color:#a6e22e">bidirCh</span>, <span style="color:#a6e22e">done</span>)

	<span style="color:#75715e">//time.Sleep(time.Second * 5)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//Replace time.Sleep() statement with &lt;-done and
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//print the receiving string from done channel.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">done</span>)
}
</code></pre></div><p><code>recv 5 true</code><!-- raw HTML omitted -->
<code>send 5</code><!-- raw HTML omitted -->
<code>send 4</code><!-- raw HTML omitted -->
<code>recv 4 true</code><!-- raw HTML omitted -->
<code>recv 3 true</code><!-- raw HTML omitted -->
<code>send 3</code><!-- raw HTML omitted -->
<code>send 2</code><!-- raw HTML omitted -->
<code>recv 2 true</code><!-- raw HTML omitted -->
<code>recv 1 true</code><!-- raw HTML omitted -->
<code>send 1</code><!-- raw HTML omitted -->
<code>send 0</code><!-- raw HTML omitted -->
<code>recv 0 true</code><!-- raw HTML omitted -->
<code>**********************************</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/C3fkUTPXmRi"><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="85-">8.5 å¤šä¸ªå‘é€ç«¯</h2>
<h2 id="85-outofmemorybug">8.5 ä¸€ç§èƒ½äº§ç”Ÿoutofmemoryçš„bug</h2>
<h2 id="86-channel">8.6 é€‰å–åˆé€‚çš„channelç¼“å­˜å¤§å°</h2>
<h2 id="83--1">8.3 é€šé“ç›¸å…³çš„æ“ä½œ</h2>
<p>é€šé“çš„æ“ä½œé€šå¸¸æ¶‰åŠï¼š1. åˆ›å»ºï¼Œ2. å†™å…¥æ•°æ®ï¼Œ3. è·å¾—é€šé“é•¿åº¦å’Œå®¹é‡ï¼Œ4. è¯»å–æ•°æ®ï¼Œ8. å…³é—­é€šé“ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">10</span>)

	<span style="color:#75715e">//1. åˆ›å»ºï¼š åˆ›å»ºä¸€ä¸ªç¼“å†²ä¸º5çš„é€šé“ch
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">5</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;len(ch):%2d  cap(ch):%2d\n&#34;</span>, len(<span style="color:#a6e22e">ch</span>), cap(<span style="color:#a6e22e">ch</span>))<span style="color:#75715e">//len(ch): 0  cap(ch): 5
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//2. å†™å…¥ï¼š å¾€é€šé“ché‡Œå‘é€æ•°æ®
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">1</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">2</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">3</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">4</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">5</span>

	<span style="color:#75715e">//3.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// é•¿åº¦
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// å®¹é‡
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;len(ch):%2d  cap(ch):%2d\n&#34;</span>, len(<span style="color:#a6e22e">ch</span>), cap(<span style="color:#a6e22e">ch</span>))<span style="color:#75715e">//len(ch): 0  cap(ch): 5
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//âŒ ch &lt;- 6 //é€šé“å·²æ»¡(len(ch) == len(cap))ï¼Œå†åƒé€šé“å†™å…¥æ•°æ®ä¼šäº§ç”Ÿé”™è¯¯ï¼šfatal error: all goroutines are asleep - deadlock!
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//4. è¯»å–
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">3</span>] = <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>
	<span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">4</span>] = <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;len(ch):%2d  cap(ch):%2d\n&#34;</span>, len(<span style="color:#a6e22e">ch</span>), cap(<span style="color:#a6e22e">ch</span>))<span style="color:#75715e">//len(ch): 0  cap(ch): 5
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//âŒ s[5] = &lt;-ch //é€šé“å·²ç©º(len(ch) == 0)ï¼Œå†ä»é€šé“è¯»å–æ•°æ®ä¼šäº§ç”Ÿé”™è¯¯ï¼šfatal error: all goroutines are asleep - deadlock!
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">//8. å…³é—­
</span><span style="color:#75715e"></span>	close(<span style="color:#a6e22e">ch</span>)
}
</code></pre></div><p><code>len(ch): 0  cap(ch): 5</code><!-- raw HTML omitted -->
<code>len(ch): 5  cap(ch): 5</code><!-- raw HTML omitted -->
<code>len(ch): 0  cap(ch): 5</code><!-- raw HTML omitted -->
<code>[1 2 3 4 5 0 0 0 0 0]</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/HCrPO1n5mlc"><strong>ğŸã€°ï¸ğŸã€°ï¸ğŸã€°ï¸ğŸŠã€°ï¸ğŸ‹ã€°ï¸ğŸŒã€°ï¸ğŸ‰ P L A Y A R O U N D ã€°ï¸ğŸ‡ã€°ï¸ğŸ“ã€°ï¸ğŸˆã€°ï¸ğŸ’ã€°ï¸ğŸ‘ã€°ï¸ğŸ¥­ ã€°ï¸ğŸ¥</strong></a></p>
<h2 id="84--1">8.4 é€šé“ä¼šå´©æºƒçš„å‡ ç§æƒ…å†µ</h2>
<h1 id="9-parallelism">9. å¹¶å‘ä¸å¹¶è¡Œï¼ˆparallelismï¼‰</h1>
<h2 id="heading"></h2>
<h2 id="91-concurrency">9.1. å¹¶å‘ï¼ˆconcurrencyï¼‰</h2>
<p>Goè¯­è¨€ä¸­çš„å¹¶å‘ä¸»è¦æ˜¯é€šè¿‡goroutineæ¥å®ç°ï¼Œgoroutineæ˜¯ä¸€ç§è¶…è½»é‡çš„threadã€‚
Goè¯­è¨€çš„goroutineç”¨çš„æ˜¯<a href="https://docs.google.com/document/d/1TTj4T2JO42uD5ID9e89oa0sLKhJYD0Y_kqxDv3I3XMw/edit">M-P-Gæ¨¡å‹</a>:
Mä»£è¡¨ç³»ç»Ÿthreadï¼Œ Pä»£è¡¨é€»è¾‘CPUï¼ŒGä»£è¡¨goroutineã€‚<!-- raw HTML omitted -->
Goè¯­è¨€çš„è¿è¡Œæ—¶(runtime)ä¼šä¸ºæ¯ä¸ªç‰©ç†CPUåˆ†é…ä¸€ä¸ªç³»ç»Ÿthread(ä¸‹å›¾ä¸­çš„M0)å’Œä¸€ä¸ªé€»è¾‘CPUï¼ˆä¸‹å›¾ä¸­çš„P0ï¼‰ï¼Œ
å¹¶å°†è¿™ä¸ªé€»è¾‘CPUç»‘å®šåˆ°ç³»ç»Ÿthreadä¸Šï¼ˆä¸‹å›¾ä¸­çš„P0è¢«ç»‘å®šåˆ°äº†M0ä¸Šï¼‰ã€‚
å½“æœ‰goroutineè¦è¿è¡Œçš„æ—¶å€™ï¼Œè¿è¡Œæ—¶ä¼šå°†goroutineæ”¾åˆ°é€»è¾‘CPUï¼ˆä¸‹å›¾çš„P0ï¼‰çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼ˆä¸‹å›¾ä¸­çš„G1, G2, G3, G4, G5ï¼‰ã€‚
åŒä¸€æ—¶åˆ»ï¼Œä¸€ä¸ªé€»è¾‘CPUï¼ˆä¸‹å›¾çš„P0ï¼‰åªèƒ½å¤„ç†ä¸€ä¸ªgoroutineï¼ˆä¸‹å›¾ä¸­çš„G0æ­£è¿è¡Œåœ¨P0ä¸Šï¼‰ï¼Œè¿è¡Œé˜Ÿåˆ—ä¸­çš„å…¶ä»–goroutine
å¤„äºç­‰å¾…çŠ¶æ€ï¼ˆä¸‹å›¾ä¸­çš„G1, G2, G3, G4, G5å¤„äºç­‰å¾…é˜Ÿåˆ—ï¼‰ï¼Œå½“å½“å‰goroutine(G0)çš„æ—¶é—´ç‰‡ç”¨å®Œåï¼Œ
å½“å‰goroutine(G0)è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œè°ƒåº¦å™¨ä¼šä»ç­‰å¾…é˜Ÿåˆ—ä¸­æŒ‘é€‰ä¸€ä¸ªæœ€æ–°çš„goroutineï¼ˆG1ï¼‰äº¤ç»™é€»è¾‘CPU(P0ï¼‰æ¥æ‰§è¡Œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">M0
|
|
|
P0 &lt;----ç­‰-å¾…-é˜Ÿ-åˆ—----G1--G2--G3--G4--G5---&lt;----
|						|
è¿						|
|						|
è¡Œ						|
|						|
G0 -&gt;----å›-åˆ°-ç­‰-å¾…-é˜Ÿ-åˆ—--------&gt;---------&gt;----
</code></pre></div><p>å½“ä¸€ä¸ªgoroutineæ‰§è¡Œäº†ä¸€ä¸ªé˜»å¡çš„ç³»ç»Ÿè°ƒç”¨æ—¶(æ¯”å¦‚G0å¤„äºé˜»å¡çŠ¶æ€)ï¼Œè°ƒåº¦å™¨ä¼šå°†G0ç»‘å®šåˆ°M0ä¸Šï¼ŒM0ã€G0å‡ä¸P0åˆ†ç¦»ï¼Œ
è°ƒåº¦å™¨ä¼šä¸ºP0é‡æ–°åˆ†é…ä¸€ä¸ªç³»ç»Ÿthead M1ï¼Œå¹¶å°†P0ç»‘å®šåˆ°M1ä¸Šï¼Œæ­¤æ—¶P0ä¼šå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„å…¶ä»–goroutine(æ¯”å¦‚G1)ï¼Œ
å¾…G0é˜»å¡å®Œæ¯•åï¼ŒG0ä¼šé‡æ–°å›åˆ°P0çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼ŒM0ä¼šè¢«ç³»ç»Ÿä¿å­˜å¥½ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">M0
|
|
|
G0<span style="color:#f92672">(</span>é˜»å¡çŠ¶æ€<span style="color:#f92672">)</span>
1. G0å¤„äºé˜»å¡çŠ¶æ€è¢«ç»‘å®šåˆ°M0ä¸Šï¼ŒM0ã€G0å‡ä¸P0åˆ†ç¦»


M1
|
|
|
P0 &lt;----ç­‰-å¾…-é˜Ÿ-åˆ—----G2--G3--G4--G5-------&lt;----
|						|
è¿						|
|						|
è¡Œ						|
|						|
G1 -&gt;----å›-åˆ°-ç­‰-å¾…-é˜Ÿ-åˆ—--------&gt;---------&gt;----
2. è°ƒåº¦å™¨ä¸ºG1é‡æ–°åˆ†é…äº†ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹M1ï¼Œ P0æ‰§è¡Œç­‰å¾…é˜Ÿåˆ—ä¸­çš„å…¶ä»–goroutine


M1
|
|
|
P0 &lt;----ç­‰-å¾…-é˜Ÿ-åˆ—----G3--G4--G5--G1--G0---&lt;----
|						|
è¿						|
|						|
è¡Œ						|
|						|
G2 -&gt;----å›-åˆ°-ç­‰-å¾…-é˜Ÿ-åˆ—--------&gt;---------&gt;----
3. G0é˜»å¡å®Œæ¯•ï¼Œé‡æ–°å›åˆ°P0çš„ç­‰å¾…é˜Ÿåˆ—ä¸­


M0
|
|
|
4. M0è¢«ç³»ç»Ÿä¿å­˜ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚
</code></pre></div><p>GO 1.5ç‰ˆæœ¬ä¹‹åä¼šä¸ºæ¯ä¸ªç‰©ç†CPUåˆ†é…ä¸€ä¸ªé€»è¾‘CPUï¼Œ1.5ç‰ˆæœ¬ä¹‹å‰è¿è¡Œæ—¶åªç»™Goçš„åº”ç”¨ç¨‹åºåˆ†é…ä¸€ä¸ªé€»è¾‘CPUï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªé€»è¾‘CPUï¼Œ
GOä»ç„¶å¯ä»¥ä»¥ç¥å¥‡çš„æ€§èƒ½å’Œæ•ˆç‡ï¼Œå¹¶å‘è°ƒåº¦æ— æ•°ä¸ªgoroutineã€‚</p>
<p>Goç¨‹åºä¸­çš„mainå‡½æ•°å°±æ˜¯ä¸€ä¸ªgoroutineï¼Œå¦‚æœè¦å¯åŠ¨å…¶ä»–çš„gotoutineåªéœ€åœ¨è°ƒç”¨çš„å‡½æ•°å‰é¢åŠ ä¸Šä¸€ä¸ªgoå…³é”®å­—å³å¯ï¼Œå¦‚ä¸‹ç¤ºä¾‹:</p>
<p>goroutineç®€å•ç¤ºä¾‹  //adm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">times</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">times</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>)
		<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">SetFlags</span>(<span style="color:#ae81ff">0</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#e6db74">&#34;watching TV&#34;</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#e6db74">&#34;coding&#34;</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
}
</code></pre></div><p><code>watching TV</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted --></p>
<p>åœ¨mainå‡½æ•°çš„æœ€ååŠ å…¥time.Sleep(5 * time.Second)ä¸åˆ©äºæ›´å¤šgoroutineçš„è°ƒç”¨ï¼Œæ‰€å¹¸åŒæ­¥æœºåˆ¶èƒ½æ”¹å˜è¿™ä¸€ç°çŠ¶, ä¸‹é¢çš„å°èŠ‚å°†ä»‹ç»goè¯­è¨€ä¸­çš„å¤šç§å¹¶å‘åŒæ­¥æœºåˆ¶ã€‚</p>
<p><a href="https://play.golang.org/p/_xz8XxNcDIh"><strong>âš½ï¸ ğŸ€ ğŸˆ âš¾ï¸ ğŸ¥  ğŸ ğŸ‰ ğŸ¾ ğŸ¥  ğŸ±  P L A Y A R O U N D  ğŸ“ ğŸ¸ ğŸ ğŸ¹ ğŸ¥Š ğŸ¥‹ ğŸ½ â›¸  ğŸ¥Œ ğŸ›· ğŸ›¹  â›³ï¸</strong></a></p>
<h2 id="92-waitgroup">9.2 å¹¶å‘åŒæ­¥ä¹‹WaitGroup</h2>
<p>WaitGroupæœ‰3ä¸ªæ–¹æ³•ï¼šAdd, Doneå’ŒWait<!-- raw HTML omitted -->
Addæ–¹æ³•çš„å‚æ•°ä¸ºè¦æ‰§è¡Œçš„goroutineæ•°é‡<!-- raw HTML omitted -->
Doneæ–¹æ³•ç”¨äºé€šçŸ¥å½“å‰goroutineå·²ç»æ‰§è¡Œå®Œæ¯•<!-- raw HTML omitted -->
Waitæ–¹æ³•ç”¨äºgoroutineçš„è°ƒç”¨è€…ç­‰å¾…goroutineæ‰§è¡Œå®Œæˆï¼Œgoroutineçš„æ‰§è¡Œå®Œæˆç”±Doneæ–¹æ³•é€šçŸ¥ç»™Wait<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>
	<span style="color:#e6db74">&#34;sync&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">times</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">times</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>)
		<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">SetFlags</span>(<span style="color:#ae81ff">0</span>)
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">2</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#e6db74">&#34;watching TV&#34;</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">routineTest</span>(<span style="color:#e6db74">&#34;coding&#34;</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
}
</code></pre></div><p><code>coding</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>coding</code><!-- raw HTML omitted -->
<code>watching TV</code><!-- raw HTML omitted --></p>
<p>ä¸Šè¿°ç¨‹åºä¸­mainå‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶å¤„äºrunningçš„çŠ¶æ€ï¼Œå½“mainå‡½æ•°æ‰§è¡Œå®Œ2ä¸ª&quot;go routineTest&quot;è¯­å¥åï¼Œè¿™2ä¸ªroutineTestçš„goroutineå¤„äºrunningçŠ¶æ€ï¼Œ
ä¹‹åmainå‡½æ•°æ‰§è¡Œwg.Wait()ï¼Œwg.Wait()ä½¿mainå‡½æ•°è¿›å…¥blockçŠ¶æ€ã€‚å½“routineTestæ‰§è¡Œåˆ°time.Sleep()è¯­å¥æ—¶ï¼Œgoroutineå¤„åœ¨staying in running
çš„çŠ¶æ€(ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¤„åœ¨queuingçŠ¶æ€)ï¼Œå½“2ä¸ªroutineTestéƒ½æ‰§è¡Œåˆ°wg.Done()çš„æ—¶å€™ï¼ŒroutineTestä»runningçŠ¶æ€é€€å‡ºï¼Œç„¶åå›åˆ°mainå‡½æ•°ï¼Œ
mainå‡½æ•°ä»blockçŠ¶æ€æ¢å¤åˆ°runningçŠ¶æ€ï¼Œç„¶åå†ä»runningçŠ¶æ€é€€å‡ºã€‚goroutineåªèƒ½ä»runningçŠ¶æ€é€€å‡ºï¼Œmainç¨‹åºä¹Ÿæ˜¯goroutineã€‚</p>
<p><a href="https://play.golang.org/p/0LuRQas0CTa"><strong>âš½ï¸ ğŸ€ ğŸˆ âš¾ï¸ ğŸ¥  ğŸ ğŸ‰ ğŸ¾ ğŸ¥  ğŸ±  P L A Y A R O U N D  ğŸ“ ğŸ¸ ğŸ ğŸ¹ ğŸ¥Š ğŸ¥‹ ğŸ½ â›¸  ğŸ¥Œ ğŸ›· ğŸ›¹  â›³ï¸</strong></a></p>
<h2 id="92-channel">9.2 å¹¶å‘åŒæ­¥ä¹‹channel</h2>
<p><a href="https://play.golang.org/p/0LuRQas0CTa"><strong>âš½ï¸ ğŸ€ ğŸˆ âš¾ï¸ ğŸ¥  ğŸ ğŸ‰ ğŸ¾ ğŸ¥  ğŸ±  P L A Y A R O U N D  ğŸ“ ğŸ¸ ğŸ ğŸ¹ ğŸ¥Š ğŸ¥‹ ğŸ½ â›¸  ğŸ¥Œ ğŸ›· ğŸ›¹  â›³ï¸</strong></a></p>
<h1 id="10-">10 æ§åˆ¶æµç¨‹</h1>
<p>é™¤äº†break, continue, gotoä»£ç è·³è½¬è¯­å¥, goè¿˜æ”¯æŒfallthroughã€‚<!-- raw HTML omitted -->
é™¤äº†if-elseï¼Œ2-6å‡å¯ä½¿ç”¨breakè·³å‡ºæ§åˆ¶æµã€‚<!-- raw HTML omitted -->
2å’Œ3å«åšå¾ªç¯æ§åˆ¶æµè¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨continueæå‰ç»“æŸå½“å‰çš„å¾ªç¯ï¼Œä»¥è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚<!-- raw HTML omitted --></p>
<h2 id="101-if">10.1 ifæ¡ä»¶æ‰§è¡Œ</h2>
<p>ifè¯­å¥çš„è¯­æ³•å¦‚ä¸‹ï¼Œifåé¢è·Ÿ<code>SimpleStmt; Condition</code>ã€‚  SimpleStmtæ˜¯Goä¸­SimpleStatementçš„ç®€ç§°ï¼ŒSimpleStmtå¯ä»¥çœç•¥ã€‚Conditionæ˜¯å¸ƒå°”ç±»å‹çš„è¡¨è¾¾å¼ï¼Œä¸èƒ½çœç•¥ã€‚elseè¯­å¥ä¹Ÿå¯ä»¥çœç•¥<!-- raw HTML omitted -->
ifä¼šæ ¹æ®Conditionçš„ç»“æœæ¥æ¡ä»¶æ‰§è¡Œåé¢çš„è¯­å¥å—ã€‚å¦‚æœConditionä¸ºtrueï¼Œåˆ™æ‰§è¡Œifåˆ†æ”¯çš„è¯­å¥å—; å¦‚æœConditionä¸ºfalseï¼Œåˆ™æ‰§è¡Œelseè¯­å¥å—æˆ–åç»­çš„ä»£ç ã€‚<!-- raw HTML omitted --></p>
<blockquote>
</blockquote>
<p>if SimpleStmt; Condition {<!-- raw HTML omitted -->
Â Â Â Â // do something<!-- raw HTML omitted -->
} else {<!-- raw HTML omitted -->
Â Â Â Â // do something<!-- raw HTML omitted -->
}<!-- raw HTML omitted --></p>
<p><strong>SimpleStatement</strong></p>
<p>Goä¸­çš„SimpleStatementï¼ˆç®€ç§°SimpleStmtï¼‰åˆ†ä¸ºä»¥ä¸‹6ç§æƒ…å†µï¼š<!-- raw HTML omitted --></p>
<ol>
<li>ç©ºè¯­å¥ã€‚å¯¹ï¼Œå°±æ˜¯ç®€å•çš„ä»€ä¹ˆéƒ½æ²¡æœ‰<!-- raw HTML omitted --></li>
<li>é€šé“å‘é€/æ¥æ”¶æ“ä½œã€‚ æ¯”å¦‚ ch&lt;-iæˆ–i&lt;-ch <!-- raw HTML omitted --></li>
<li>++æˆ–&ndash;ï¼ŒåŠ åŠ æˆ–å‡å‡çš„æ“ä½œã€‚ æ¯”å¦‚ i++æˆ–i&ndash; <!-- raw HTML omitted --></li>
<li>èµ‹å€¼è¯­å¥ã€‚ æ¯”å¦‚ i = 1<!-- raw HTML omitted --></li>
<li>çŸ­å˜é‡å£°æ˜ã€‚æ¯”å¦‚ i := 1<!-- raw HTML omitted --></li>
<li>è¡¨è¾¾å¼è¯­å¥ã€‚æ¯”å¦‚ ä¸€å…ƒæ“ä½œç¬¦(+ - ! ^ * &amp; &lt;-)ç›¸å…³çš„è¡¨è¾¾å¼ï¼Œç±»å‹è½¬æ¢ï¼Œæ–­è¨€ï¼Œå‡½æ•°/æ–¹æ³•çš„è°ƒç”¨ç­‰<!-- raw HTML omitted --></li>
</ol>
<p>è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†å±•ç¤ºif-elseæ§åˆ¶æµçš„SimpleStmtçš„ 6ç§æƒ…å†µï¼Œéƒ¨åˆ†ifè¯­å¥çš„Conditionç›´æ¥ä½¿ç”¨äº†trueçš„å¸ƒå°”å€¼ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">myint</span> <span style="color:#66d9ef">int</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">myfunc</span>(<span style="color:#a6e22e">mi</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">myint</span>) {
	<span style="color:#f92672">*</span><span style="color:#a6e22e">mi</span> = <span style="color:#ae81ff">3</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mi</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">myint</span>) <span style="color:#a6e22e">mymethod</span>() {
	<span style="color:#f92672">*</span><span style="color:#a6e22e">mi</span> = <span style="color:#ae81ff">4</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">10</span>)

	<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt1 ç©ºè¯­å¥&#34;</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">5</span>; <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt2 é€šé“å‘é€ ch &lt;- 5&#34;</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>; <span style="color:#a6e22e">ok</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt2 é€šé“æ¥æ”¶ _, ok = &lt;-ch&#34;</span>, <span style="color:#a6e22e">ok</span>)
	}

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ptr</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span> = new(<span style="color:#66d9ef">int</span>)
	<span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span> = <span style="color:#ae81ff">5</span>
	<span style="color:#66d9ef">if</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span><span style="color:#f92672">++</span>; <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt3 åŠ åŠ å‡å‡ *ptr++&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span><span style="color:#f92672">--</span>; <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt3 åŠ åŠ å‡å‡ *ptr--&#34;</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">ptr</span>)
	}

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span> = <span style="color:#ae81ff">1</span>; <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt4 èµ‹å€¼è¯­å¥ i =&#34;</span>, <span style="color:#a6e22e">i</span>)
	}

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt5 çŸ­å˜é‡å£°æ˜ x := &#34;</span>, <span style="color:#a6e22e">x</span>)
	}

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">mi</span> <span style="color:#a6e22e">myint</span>
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">myfunc</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">mi</span>); <span style="color:#a6e22e">mi</span> &gt; <span style="color:#ae81ff">0</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt6 å‡½æ•°è°ƒç”¨ myfunc(&amp;mi), mi&#34;</span>, <span style="color:#a6e22e">mi</span>)
	}

	<span style="color:#66d9ef">if</span> (<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">mi</span>).<span style="color:#a6e22e">mymethod</span>(); <span style="color:#a6e22e">mi</span> &gt; <span style="color:#ae81ff">0</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;SimpleStmt6 æ–¹æ³•è°ƒç”¨ (&amp;mi).mymethod(), mi&#34;</span>, <span style="color:#a6e22e">mi</span>)
	}
}
</code></pre></div><p><code>SimpleStmt1 ç©ºè¯­å¥</code><!-- raw HTML omitted -->
<code>SimpleStmt2 é€šé“å‘é€ ch &lt;- 5</code><!-- raw HTML omitted -->
<code>SimpleStmt2 é€šé“æ¥æ”¶ _, ok = &lt;-ch true</code><!-- raw HTML omitted -->
<code>SimpleStmt3 åŠ åŠ å‡å‡ *ptr++ 6</code><!-- raw HTML omitted -->
<code>SimpleStmt3 åŠ åŠ å‡å‡ *ptr-- 5</code><!-- raw HTML omitted -->
<code>SimpleStmt4 èµ‹å€¼è¯­å¥ i = 1</code><!-- raw HTML omitted -->
<code>SimpleStmt5 çŸ­å˜é‡å£°æ˜ x :=  1</code><!-- raw HTML omitted -->
<code>SimpleStmt6 å‡½æ•°è°ƒç”¨ myfunc(&amp;mi), mi 3</code><!-- raw HTML omitted -->
<code>SimpleStmt6 æ–¹æ³•è°ƒç”¨ (&amp;mi).mymethod(), mi 4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/c_2sGJNDtyr"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<h2 id="102-for">10.2 forå¾ªç¯æ‰§è¡Œ</h2>
<p>forå¾ªç¯è¯­å¥èƒ½å¤Ÿæ ¹æ®æ¡ä»¶é‡å¤æ‰§è¡Œä¸€ä¸ªè¯­å¥å—ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œforå¾ªç¯è¯­å¥æœ‰3ç§å½¢å¼ï¼š</p>
<p><strong>å½¢å¼ä¸€ï¼š forç›´æ¥åŠ Condition</strong> <!-- raw HTML omitted --></p>
<blockquote>
<p>for Condition {<!-- raw HTML omitted -->
Â Â Â Â // do something<!-- raw HTML omitted -->
}</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">0</span>

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>
	}
}
</code></pre></div><p><code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p>ä¸Šä¾‹ä¸­<code>i &lt; 5</code>ç›¸å½“äºConditionã€‚</p>
<p><a href="https://play.golang.org/p/eaaUOkqtl37"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><strong>å½¢å¼äºŒï¼š foråé¢è·Ÿ3ä¸ªåˆ†å¥<code>InitStmt;Condition;PostStmt</code>ï¼Œåˆ†å¥ä¹‹é—´ç”¨<code>;</code>éš”å¼€</strong> <!-- raw HTML omitted --></p>
<blockquote>
<p>for InitStmt;Condition;PostStmt { <!-- raw HTML omitted -->
Â Â Â Â // InitStmtå¯ä»¥æ˜¯ç®€çŸ­å˜é‡å£°æ˜çš„å½¢å¼ï¼Œè¿™æ ·çš„è¯InitStmt<!-- raw HTML omitted -->
Â Â Â Â // çš„æœ‰æ•ˆèŒƒå›´ä»…åœ¨forå¾ªç¯ä½“å†…ï¼Œæ¯æ¬¡è¿­ä»£æ—¶é‡å¤ä½¿ç”¨ã€‚<!-- raw HTML omitted -->
}</p>
</blockquote>
<p>InitStmtå’ŒPostStmtçš„æ ¼å¼å°±æ˜¯SimpleStmtï¼Œåªä¸è¿‡InitStmtåœ¨forå¾ªç¯å¼€å§‹æ—¶åªæ‰§è¡Œä¸€æ¬¡ï¼ŒPostStmtæ˜¯åœ¨æ¯æ¬¡forå¾ªç¯çš„è¯­å¥å—ç»“æŸä¹‹åæ‰æ‰§è¡Œä¸€æ¬¡ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
	}
}
</code></pre></div><p><code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p>ä¸Šä¾‹ä¸­<code>i := 0</code>ç›¸å½“äºInitStmtï¼Œ <code>i &lt; 5</code>ç›¸å½“äºCondition, <code>i++</code>ç›¸å½“äºPostStmtã€‚</p>
<p><a href="https://play.golang.org/p/PM68Sh_yN7K"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<hr>
<p>**foråé¢çš„3ä¸ªåˆ†å¥éƒ½å¯ä»¥çœç•¥ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š**<!-- raw HTML omitted --></p>
<p>foråˆ†å¥çœç•¥æƒ…å†µä¸€: å¦‚æœçœå»InitStmtæˆ–PostStmtï¼Œéœ€è¦ä¿ç•™ä¸å…¶ç›¸é‚»çš„<code>;</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">0</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Remove InitStmt&#34;</span>)
	<span style="color:#66d9ef">for</span> ; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
	}
}
</code></pre></div><p><code>Remove InitStmt</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/Wxa6Z8Tia9U"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Remove PostStmt&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span>; {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>
	}
}
</code></pre></div><p><code>Remove PostStmt</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/lJzwLN6Lsi2"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<hr>
<!-- raw HTML omitted -->
<p>foråˆ†å¥çœç•¥æƒ…å†µäºŒ: å¦‚æœåŒæ—¶çœå»InitStmtå’ŒPostStmt, åˆ™Conditionå‰åçš„2ä¸ª<code>;</code>å¯ä»¥ä¿ç•™ä¹Ÿå¯ä»¥ä¸ä¿ç•™ã€‚<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">0</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Remove InitStmt and PostStmt, reserve smeicolons&#34;</span>)
	<span style="color:#66d9ef">for</span> ; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span>;  {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>
	}
}
</code></pre></div><p><code>Remove InitStmt and PostStmt, reserve smeicolons</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/eZB_ffc9kWc"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">0</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Remove InitStmt and PostStmt, remove smeicolons&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">5</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>
	}
}
</code></pre></div><p><code>Remove InitStmt and PostStmt, remove smeicolons</code><!-- raw HTML omitted -->
<code>0</code><!-- raw HTML omitted -->
<code>1</code><!-- raw HTML omitted -->
<code>2</code><!-- raw HTML omitted -->
<code>3</code><!-- raw HTML omitted -->
<code>4</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/krr8TCD5pkq"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<hr>
<!-- raw HTML omitted -->
<p>import &ldquo;fmt&rdquo;</p>
<p>func main() {
for i := 0; ; i++ {
fmt.Println(&ldquo;Remove Condition&rdquo;)
fmt.Println(i)
}
}</p>
<pre><code>
`Remove Condition`&lt;br&gt;
`0`&lt;br&gt;
`Remove Condition`&lt;br&gt;
`1`&lt;br&gt;
`Remove Condition`&lt;br&gt;
`2`&lt;br&gt;
`Remove Condition`&lt;br&gt;
`3`&lt;br&gt;
`...`&lt;br&gt;

[**ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£**](https://play.golang.org/p/V4Pa36kfqXs)&lt;br&gt;&lt;br&gt;

*** 
&lt;br&gt;
foråˆ†å¥çœç•¥æƒ…å†µå››: å¦‚æœå°†InitStmt;Condition;PostStmtå…¨éƒ¨çœå»,åˆ™ç›¸å½“äºä¸€ä¸ªConditionä¸ºtrueçš„forå¾ªç¯ç¨‹åºã€‚&lt;br&gt;
ä»¥ä¸‹2ä¸ªç¨‹åºæ˜¯ç­‰ä»·çš„, å®ƒä»¬å‡è¾“å‡ºæ— å°½çš„`Remove all for clauses`æ‰“å°

```go
package main

import &quot;fmt&quot;

func main() {
	for {
		fmt.Println(&quot;Remove all for clauses&quot;)
	}
}
</code></pre><p><code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/ghQ5YPTJGOw"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">true</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Remove all for clauses&#34;</span>)
	}
}
</code></pre></div><p><code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted -->
<code>Remove all for clauses</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/y3e4qJT5Be-"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<p><strong>å½¢å¼ä¸‰ï¼š for-rangeè¯­å¥, rangeå³è¾¹çš„Expressionä»£è¡¨array, slice, string, mapæˆ–è€…chanç±»å‹å˜é‡çš„ä¸€ç§</strong></p>
<blockquote>
<p>for IterationValueList := range Expression { <!-- raw HTML omitted -->
Â Â Â Â // IterationValueListä¸ºçŸ­å˜é‡å£°æ˜ï¼Œæ¯æ¬¡è¿­ä»£é‡å¤ä½¿ç”¨ï¼Œ<!-- raw HTML omitted -->
Â Â Â Â // æœ‰æ•ˆèŒƒå›´ä»…åœ¨forå¾ªç¯ä½“å†…ã€‚<!-- raw HTML omitted -->
}<!-- raw HTML omitted -->
æˆ–
<!-- raw HTML omitted -->
for IterationValueList = range Expression { <!-- raw HTML omitted -->
Â Â Â Â // IterationValueListæ˜¯åœ¨forå¾ªç¯å¤–å£°æ˜ï¼Œæ¯æ¬¡è¿­ä»£é‡å¤ä½¿ç”¨, <!-- raw HTML omitted -->
Â Â Â Â // forå¾ªç¯ç»“æŸåIterationValueListä»æœ‰æ•ˆã€‚<!-- raw HTML omitted -->
}</p>
</blockquote>
<p>for-range çš„IterationValueListåœ¨Expressionä¸ºarray, slice, stringæˆ–mapæ—¶ï¼ŒIterationValueListå‡æœ‰2ä¸ªå€¼ï¼Œå¦‚ä¸‹è¡¨çš„
1st iteration valueå’Œ2nd iteration value, 2nd iteration valueæ˜¯å¯ä»¥çœç•¥çš„ã€‚<!-- raw HTML omitted -->
Expressionä¸ºchanæ—¶ï¼ŒIterationValueListåªæœ‰1st iteration valueè¿™1ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ä¸èƒ½çœç•¥ï¼Œä»£è¡¨ä»chä¸­æ¥æ”¶çš„å…ƒç´ å€¼ï¼Œå…·ä½“æƒ…å†µè§ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Expression Type</th>
<th>Expression Variable</th>
<th>1st iteration value</th>
<th>2nd iteration value</th>
</tr>
</thead>
<tbody>
<tr>
<td>array</td>
<td>[&hellip;]T</td>
<td>a</td>
<td>intç±»å‹çš„ç´¢å¼•å€¼i</td>
<td>ç¬¬iä¸ªæ•°ç»„å…ƒç´ a[i]</td>
</tr>
<tr>
<td>slice</td>
<td>[]T</td>
<td>s</td>
<td>intç±»å‹çš„ç´¢å¼•å€¼i</td>
<td>ç¬¬iä¸ªåˆ‡ç‰‡å…ƒç´ s[i]</td>
</tr>
<tr>
<td>string</td>
<td>T</td>
<td>str</td>
<td>intç±»å‹çš„ç´¢å¼•å€¼i</td>
<td>ç¬¬iä¸ªruneç±»å‹çš„UTF-8å­—ç¬¦</td>
</tr>
<tr>
<td>map</td>
<td>map[K]V</td>
<td>m</td>
<td>Kç±»å‹çš„é”®å€¼k</td>
<td>m[k]</td>
</tr>
<tr>
<td>chan</td>
<td>chan T</td>
<td>ch</td>
<td>Tç±»å‹çš„å…ƒç´ å€¼</td>
<td>ğŸˆšï¸</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†for-range Expressionå¯¹åº”çš„5ç§æƒ…å†µï¼Œå¹¶ä¸”è¿˜ä¸ºæ¯ç§Expressioné¢å¤–éå†äº†Expression Typeä¸ºæŒ‡é’ˆç±»å‹çš„å˜é‡ã€‚
Expression Typeä¸ºæŒ‡é’ˆç±»å‹æ—¶ï¼Œé™¤äº†arrayç±»å‹çš„æŒ‡é’ˆå˜é‡å¯ä»¥ä½¿ç”¨for-rangeè¿›è¡Œéå†ï¼Œå…¶ä½™4ä¸ªç±»å‹å‡æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºè¿™4ä¸ª
ç±»å‹æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œrangeæ— æ³•æ‰¾åˆ°å¤åˆæ•°æ®ç±»å‹é‡Œçš„å…ƒç´ å€¼ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Expression: array&#34;</span>)
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">byte</span>{<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">a</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;a: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: array pointer&#34;</span>)
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pa</span> <span style="color:#f92672">*</span>[len(<span style="color:#a6e22e">a</span>)]<span style="color:#66d9ef">byte</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pa</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;pa: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}
	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: slice&#34;</span>)
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">byte</span>{<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#e6db74">&#39;e&#39;</span>}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//fmt.Println(&#34;\nExpression: slice pointer&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//var ps *[]byte = &amp;s
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//for i, v := range ps {
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	fmt.Printf(&#34;ps: %d %c\n&#34;, i, v)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//}
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: string&#34;</span>)
	<span style="color:#a6e22e">str</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;abcde&#34;</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">str</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;str: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//fmt.Println(&#34;\nExpression: string pointer&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//var pstr *string = &amp;str
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//for i, v := range pstr {
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	fmt.Printf(&#34;pstr: %d %c\n&#34;, i, v)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//}
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: map&#34;</span>)
	<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">byte</span>{<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#ae81ff">1</span>: <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#ae81ff">2</span>: <span style="color:#e6db74">&#39;c&#39;</span>, <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#39;d&#39;</span>, <span style="color:#ae81ff">4</span>: <span style="color:#e6db74">&#39;e&#39;</span>}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">m</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %d %c\n&#34;</span>, <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//fmt.Println(&#34;\nExpression: string pointer&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//var pm *map[int]byte = &amp;m
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//for k, v := range pm {
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	fmt.Printf(&#34;pm: %d %c\n&#34;, k, v)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//}
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: chan&#34;</span>)
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">byte</span>, <span style="color:#ae81ff">5</span>)
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;a&#39;</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;b&#39;</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;c&#39;</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;d&#39;</span>
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;e&#39;</span>
	close(<span style="color:#a6e22e">ch</span>)

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">ele</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ch</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;ch: %c\n&#34;</span>, <span style="color:#a6e22e">ele</span>)
	}

	<span style="color:#75715e">//fmt.Println(&#34;\nExpression: chan pointer&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch = make(chan byte, 5)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- &#39;a&#39;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- &#39;b&#39;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- &#39;c&#39;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- &#39;d&#39;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//ch &lt;- &#39;e&#39;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//close(ch)
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//var pch *chan byte = &amp;ch
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//for ele := range pch {
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	fmt.Printf(&#34;ch: %c\n&#34;, ele)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//}
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>Expression: array</code><!-- raw HTML omitted -->
<code>a: 0 a</code><!-- raw HTML omitted -->
<code>a: 1 b</code><!-- raw HTML omitted -->
<code>a: 2 c</code><!-- raw HTML omitted -->
<code>a: 3 d</code><!-- raw HTML omitted -->
<code>a: 4 e</code><!-- raw HTML omitted --></p>
<p><code>Expression: array pointer</code><!-- raw HTML omitted -->
<code>pa: 0 a</code><!-- raw HTML omitted -->
<code>pa: 1 b</code><!-- raw HTML omitted -->
<code>pa: 2 c</code><!-- raw HTML omitted -->
<code>pa: 3 d</code><!-- raw HTML omitted -->
<code>pa: 4 e</code><!-- raw HTML omitted --></p>
<p><code>Expression: slice</code><!-- raw HTML omitted -->
<code>s: 0 a</code><!-- raw HTML omitted -->
<code>s: 1 b</code><!-- raw HTML omitted -->
<code>s: 2 c</code><!-- raw HTML omitted -->
<code>s: 3 d</code><!-- raw HTML omitted -->
<code>s: 4 e</code><!-- raw HTML omitted --></p>
<p><code>Expression: string</code><!-- raw HTML omitted -->
<code>str: 0 a</code><!-- raw HTML omitted -->
<code>str: 1 b</code><!-- raw HTML omitted -->
<code>str: 2 c</code><!-- raw HTML omitted -->
<code>str: 3 d</code><!-- raw HTML omitted -->
<code>str: 4 e</code><!-- raw HTML omitted --></p>
<p><code>Expression: map</code><!-- raw HTML omitted -->
<code>m: 0 a</code><!-- raw HTML omitted -->
<code>m: 1 b</code><!-- raw HTML omitted -->
<code>m: 2 c</code><!-- raw HTML omitted -->
<code>m: 3 d</code><!-- raw HTML omitted -->
<code>m: 4 e</code><!-- raw HTML omitted --></p>
<p><code>Expression: chan</code><!-- raw HTML omitted -->
<code>ch: a</code><!-- raw HTML omitted -->
<code>ch: b</code><!-- raw HTML omitted -->
<code>ch: c</code><!-- raw HTML omitted -->
<code>ch: d</code><!-- raw HTML omitted -->
<code>ch: e</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/ZxIAielzP4y"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<p>å¦‚æœ5ç§range Expressionçš„å˜é‡å‡ä¸º0å€¼ï¼Œåˆ™:<!-- raw HTML omitted --></p>
<ol>
<li>arrayå’Œarray ptræ˜¯å¯ä»¥è¢«for-rangeè¿­ä»£çš„ã€‚<!-- raw HTML omitted --></li>
<li>sliceï¼Œstringï¼Œmapæ— æ³•è¢«for-rangeè¿­ä»£ã€‚<!-- raw HTML omitted --></li>
<li>chançš„è¿­ä»£ä¼šä¸€ç›´é˜»å¡ï¼Œä½¿ç¨‹åºå‡ºç°æ­»é”ã€‚<!-- raw HTML omitted --></li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">byte</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Expression: zero value array&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">a</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;a: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pa</span> <span style="color:#f92672">*</span>[len(<span style="color:#a6e22e">a</span>)]<span style="color:#66d9ef">byte</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: zero value array pointer&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pa</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;pa: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}
	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">byte</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: nil slice?&#34;</span>, <span style="color:#a6e22e">s</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#a6e22e">str</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;&#34;</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: empty string?&#34;</span>, <span style="color:#a6e22e">str</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">str</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;str: %d %c\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">int</span>]<span style="color:#66d9ef">byte</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: nil map?&#34;</span>, <span style="color:#a6e22e">m</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">m</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;m: %d %c\n&#34;</span>, <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span>)
	}

	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">byte</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;\nExpression: nil chan?&#34;</span>, <span style="color:#a6e22e">ch</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">ele</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ch</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;ch: %c\n&#34;</span>, <span style="color:#a6e22e">ele</span>)
	}

	<span style="color:#75715e">// or empty a channel directly
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// for range ch {}
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//------------------------------------------------------
</span><span style="color:#75715e"></span>}
</code></pre></div><p><code>Expression: zero value array</code><!-- raw HTML omitted -->
<code>a: 0 </code><!-- raw HTML omitted -->
<code>a: 1 </code><!-- raw HTML omitted -->
<code>a: 2 </code><!-- raw HTML omitted -->
<code>a: 3 </code><!-- raw HTML omitted -->
<code>a: 4 </code><!-- raw HTML omitted --></p>
<p><code>Expression: zero value array pointer</code><!-- raw HTML omitted -->
<code>pa: 0 </code><!-- raw HTML omitted -->
<code>pa: 1 </code><!-- raw HTML omitted -->
<code>pa: 2 </code><!-- raw HTML omitted -->
<code>pa: 3 </code><!-- raw HTML omitted -->
<code>pa: 4 </code><!-- raw HTML omitted --></p>
<p><code>Expression: nil slice? true</code><!-- raw HTML omitted --></p>
<p><code>Expression: empty string? true</code><!-- raw HTML omitted --></p>
<p><code>Expression: nil map? true</code><!-- raw HTML omitted --></p>
<p><code>Expression: nil chan? true</code><!-- raw HTML omitted -->
<code>fatal error: all goroutines are asleep - deadlock!</code><!-- raw HTML omitted --></p>
<p><code>goroutine 1 [chan receive (nil chan)]:</code><!-- raw HTML omitted -->
<code>main.main()</code><!-- raw HTML omitted -->
<code>	/tmp/sandbox257575067/prog.go:38 +0x8c0</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/PjoRzJxJfwy"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<hr>
<p><strong>forè¯­å¥ä¸­æœ‰2ä¸ªå˜é‡çš„ç¤ºä¾‹</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34; i&#34;</span>, <span style="color:#e6db74">&#34;    j&#34;</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">20</span>; <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span> = <span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">j</span><span style="color:#f92672">+</span><span style="color:#ae81ff">2</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%2d    %2d\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span>)
	}
}
</code></pre></div><p><code> i     j</code><!-- raw HTML omitted -->
<code> 0     0</code><!-- raw HTML omitted -->
<code> 1     2</code><!-- raw HTML omitted -->
<code> 2     4</code><!-- raw HTML omitted -->
<code> 3     6</code><!-- raw HTML omitted -->
<code> 4     8</code><!-- raw HTML omitted -->
<code> 5    10</code><!-- raw HTML omitted -->
<code> 6    12</code><!-- raw HTML omitted -->
<code> 7    14</code><!-- raw HTML omitted -->
<code> 8    16</code><!-- raw HTML omitted -->
<code> 9    18</code><!-- raw HTML omitted -->
<code>10    20</code><!-- raw HTML omitted --></p>
<p><a href="https://play.golang.org/p/5PE6Gj67HVl"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<h2 id="103-switch">10.3 switchå¤šè·¯æ‰§è¡Œ</h2>
<p>switch-caseè¯­å¥æœ‰2ç§å½¢å¼ï¼Œç¬¬ä¸€ç§æ˜¯å€¼çš„æ¯”è¾ƒï¼Œç§°ä½œexpression-switchï¼ˆè¡¨è¾¾å¼switchï¼‰, ç¬¬äºŒç§æ˜¯ç±»å‹çš„æ¯”è¾ƒ, ç§°ä½œtype-switch(ç±»å‹switch)ã€‚</p>
<p><strong>expression-switch</strong></p>
<p>è·Ÿåœ¨switchåé¢çš„è¡¨è¾¾å¼ç§°ä½œæ¡ä»¶è¡¨è¾¾å¼ã€‚åœ¨expression-switchä¸­ï¼Œcaseè¡¨è¾¾å¼æŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šè‡³ä¸‹çš„æ–¹å‘å–å€¼ã€‚
å½“ç¬¬ä¸€ä¸ªcaseè¡¨è¾¾å¼ä¸æ¡ä»¶è¡¨è¾¾å¼ç›¸ç­‰æ—¶ï¼Œè¿™ä¸ªcaseåˆ†æ”¯çš„è¯­å¥å°†ä¼šè¢«æ‰§è¡Œï¼Œå…¶ä»–çš„caseå€¼è¯­å¥å°†ä¼šè¢«è·³è¿‡ã€‚æ¡ä»¶è¡¨è¾¾å¼å’Œcaseè¡¨è¾¾å¼éœ€è¦æ˜¯å¯æ¯”è¾ƒçš„å…³ç³»ã€‚
switché‡Œè¿˜æœ‰ä¸ªdefaultåˆ†æ”¯ï¼Œå½“æ‰€æœ‰çš„caseå€¼éƒ½ä¸ç­‰äºswitchçš„è¡¨è¾¾å¼å€¼æ—¶ï¼Œdefaultåˆ†æ”¯çš„è¯­å¥å°†ä¼šè¢«æ‰§è¡Œã€‚switchè¯­å¥é‡Œåªèƒ½æœ‰ä¸€ä¸ªdefaultåˆ†æ”¯ï¼Œdefault
åˆ†æ”¯å¯ä»¥æ”¾åœ¨switchè¯­å¥é‡Œçš„ä»»ä½•ä½ç½®ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„expression-switchç¤ºä¾‹<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">2</span>; <span style="color:#a6e22e">i</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;1st case&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;2nd case&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">3</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;3rd case&#34;</span>)
	<span style="color:#66d9ef">default</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;default&#34;</span>)
	}
}
</code></pre></div><p><code>2nd case</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<p>fallthroughä¼šæŠŠswitchè¯­å¥ä¸­caseæˆ–defaultçš„æ§åˆ¶ä¼ é€’ç»™ä¸‹ä¸€æ¡è¯­å¥ã€‚æ³¨æ„fallthroughä¸èƒ½ç”¨åœ¨switchè¯­å¥çš„æœ€åä¸€ä¸ªåˆ†æ”¯ã€‚<!-- raw HTML omitted --></p>
<p>ä¸€ä¸ªç®€å•çš„å¸¦fallthroughçš„expression-switchç¤ºä¾‹<!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">2</span>; <span style="color:#a6e22e">i</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;1st case&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;2nd case&#34;</span>)
		<span style="color:#a6e22e">fallthrougth</span>
	<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">3</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;3rd case&#34;</span>)
	<span style="color:#66d9ef">default</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;default&#34;</span>)
	}
}
</code></pre></div><p><code>2nd case</code><!-- raw HTML omitted -->
<code>3rd case</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<p>å¦‚æœçœå»switchçš„æ¡ä»¶è¡¨è¾¾å¼ï¼ŒåŒforå¾ªç¯çœå»æ‰€æœ‰åˆ†å¥ä¸€æ ·ï¼Œé»˜è®¤ç­‰äºå¸ƒå°”å€¼trueã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">switch</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">true</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;true&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">false</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;false&#34;</span>)
	<span style="color:#66d9ef">default</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;default&#34;</span>)
	}
}
</code></pre></div><p><code>true</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<p><strong>type-switch</strong><!-- raw HTML omitted -->
type-switchæ¯”è¾ƒçš„æ˜¯å˜é‡çš„ç±»å‹ï¼Œ åœ¨switchè¯­å¥çš„æ¡ä»¶è¡¨è¾¾å¼ä¸­æ±‚çš„æ˜¯å˜é‡çš„ç±»å‹ï¼Œcaseè¡¨è¾¾å¼ä¸­åˆ—çš„æ˜¯å„ç§å·²çŸ¥çš„ç±»å‹ã€‚<!-- raw HTML omitted -->
åŠ å…¥è¦ç”¨type-switchæ¯”è¾ƒä¸€ä¸ªå˜é‡içš„ç±»å‹ï¼Œswitchè¯­å¥çš„æ¡ä»¶è¡¨è¾¾å¼é¡»å†™æˆi.(type), ç”¨äºè¡¨ç¤ºæ±‚içš„ç±»å‹ã€‚typeå…³é”®å­—åœ¨è¿™é‡Œæ˜¯å›ºå®šæ ¼å¼ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">unknown</span> <span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">unk</span> <span style="color:#a6e22e">unknown</span>

	<span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">interface</span>{}{<span style="color:#66d9ef">nil</span>, <span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">1.23</span>, <span style="color:#e6db74">&#34;123&#34;</span>, <span style="color:#a6e22e">unk</span>}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">i</span> {
		<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">v</span>.(<span style="color:#66d9ef">type</span>) {
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">nil</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;nil&#34;</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">bool</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;bool type, value:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">int</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;int type, value:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">float64</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;float64 type, value:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">string</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;string type, value:&#34;</span>, <span style="color:#a6e22e">v</span>)
		<span style="color:#66d9ef">default</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;unknown value type, value:&#34;</span>, <span style="color:#a6e22e">v</span>)
		}
	}
}
</code></pre></div><p><code>nil</code><!-- raw HTML omitted -->
<code>bool type, value: true</code><!-- raw HTML omitted -->
<code>int type, value: 123</code><!-- raw HTML omitted -->
<code>float64 type, value: 1.23</code><!-- raw HTML omitted -->
<code>string type, value: 123</code><!-- raw HTML omitted -->
<code>unknown value type, value: 0</code><!-- raw HTML omitted --></p>
<p><a href="-"><strong>ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  P L A Y A R O U N D ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£ â™»ï¸  ğŸ¦‘ ğŸ£</strong></a></p>
<h2 id="104-select">10.4 selecté€šé“æ“ä½œ</h2>
<h1 id="11--1">11. æ€»ç»“</h1>
<h2 id="heading-1">å¯ä»¥æ¯”è¾ƒçš„ç±»å‹</h2>
<p>ä»¥ä¸‹5ç§ç±»å‹åœ¨goè¯­è¨€ä¸­å¯ä»¥æ¯”è¾ƒ  //adm</p>
<p>æ¯”å¦‚boolean, numeric, string, pointer, channel, and interface types, and structs or arrays that contain only those types.
ä½†åƒåˆ‡ç‰‡ã€æ˜ å°„å’Œå‡½æ•°æ˜¯ä¸å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ä½œmapçš„KeyTypeã€‚</p>
<h2 id="heading-2">ä¸å¯æ¯”è¾ƒçš„ç±»å‹</h2>
<p>ä»¥ä¸‹5ç§ç±»å‹åœ¨goè¯­è¨€ä¸­ä¸å¯æ¯”è¾ƒ  //adm</p>
<ol>
<li>slice<!-- raw HTML omitted --></li>
<li>map<!-- raw HTML omitted --></li>
<li>å‡½æ•°<!-- raw HTML omitted --></li>
<li>å«æœ‰ä¸å¯æ¯”è¾ƒç±»å‹å…ƒç´ çš„ç»“æ„ä½“<!-- raw HTML omitted --></li>
<li>å…ƒç´ ç±»å‹ä¸ºä¸å¯æ¯”è¾ƒçš„æ•°ç»„<!-- raw HTML omitted --></li>
</ol>
<p><a href="https://play.golang.org/p/_zbYO7zEAw5"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h2 id="untyped">æ— ç±»å‹untyped</h2>
<h2 id="nil">é›¶å€¼ä¸ºnilçš„ç±»å‹</h2>
<p>goè¯­è¨€ä¸­ä»¥ä¸‹å‡ ç§ç±»å‹çš„0å€¼ç”¨nilè¡¨ç¤º  //adm</p>
<ol>
<li>pointer<!-- raw HTML omitted --></li>
<li>slice<!-- raw HTML omitted --></li>
<li>map<!-- raw HTML omitted --></li>
<li>function<!-- raw HTML omitted --></li>
<li>channel<!-- raw HTML omitted --></li>
<li>interface<!-- raw HTML omitted --></li>
</ol>
<p><a href="https://play.golang.org/p/_zbYO7zEAw5"><strong>ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ P L A Y A R O U N D ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£ ğŸ¥¨ ğŸ’ ğŸ£</strong></a></p>
<h2 id="printf">Printfæ‰“å°å‚æ•°</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">pm</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;C&#34;</span>: <span style="color:#ae81ff">1972</span>, <span style="color:#e6db74">&#34;Go&#34;</span>: <span style="color:#ae81ff">2009</span>}
	<span style="color:#a6e22e">ps</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span>[]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;break&#34;</span>, <span style="color:#e6db74">&#34;continue&#34;</span>}
	<span style="color:#a6e22e">pa</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span>[<span style="color:#f92672">...</span>]<span style="color:#66d9ef">bool</span>{<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%T\n&#34;</span>, <span style="color:#a6e22e">pm</span>) <span style="color:#75715e">// *map[string]int
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%T\n&#34;</span>, <span style="color:#a6e22e">ps</span>) <span style="color:#75715e">// *[]string
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%T\n&#34;</span>, <span style="color:#a6e22e">pa</span>) <span style="color:#75715e">// *[4]bool
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="heading-3">å¯å¯»å€å’Œä¸å¯å¯»å€</h2>
<p>addressable &amp; unaddressable
<a href="https://cloud.tencent.com/developer/article/1187626">å‚è€ƒé“¾æ¥</a></p>
<h2 id="heading-4">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://go101.org">https://go101.org</a> <!-- raw HTML omitted -->
<a href="https://golang.org/ref/spec">https://golang.org/ref/spec</a> <!-- raw HTML omitted -->
<a href="https://tour.golang.org/methods/16">https://tour.golang.org/methods/16</a> <!-- raw HTML omitted -->
<a href="https://golang.org/ref/spec#Method_sets">https://golang.org/ref/spec#Method_sets</a> <!-- raw HTML omitted --></p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Wenjun.Zhu </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://zhu-wenjun.github.io/2018/go/>https://zhu-wenjun.github.io/2018/go/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://zhu-wenjun.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://zhu-wenjun.github.io/2018/docker/" class="prev" rel="prev" title="Dockerç¬”è®°"><i class="iconfont icon-left"></i>&nbsp;Dockerç¬”è®°</a>
         
        
        <a href="https://zhu-wenjun.github.io/2019/smartnode/" class="next" rel="next" title="Smartcash è´§å¸ä¸»èŠ‚ç‚¹">Smartcash è´§å¸ä¸»èŠ‚ç‚¹&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">

    </div>
</article>
          
<div class="comments-container"></div>

          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2011 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://zhu-wenjun.github.io">Wenjun.Zhu</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  




     </div>
  </body>
</html>
